jQuery.template("userProfileCardTmpl",'<div class="UserInfoBlock"><table cellspacing="0" cellpadding="0" style="width:100%;"><tr valign="top"><td style="width:90px;"><img alt="" class="userPhoto" src="${avatar}" /><\/td><td style="padding-left:10px;"><div><a class="link medium bold underline" href="${StudioManager.getLocationPathToModule("people")+"profile.aspx?user=" + encodeURIComponent(userName)}">${displayName}<\/a><\/div>{{if group != null}}<div style="margin-top:0px;"><a class="link underline gray" href="${StudioManager.getLocationPathToModule("people")+"#group="+group.id}">${group.name}<\/a><\/div>{{/if}}<div style="margin-top:10px;">${title}<\/div><div style="margin-top:2px;"><span class="link underline gray" onclick="ASC.Controls.JabberClient.open(\'${userName}\')">{{if isOnline === true}}                            ${ASC.Resources.Master.Resource.Online}                        {{else isOnline === false}}                            ${ASC.Resources.Master.Resource.Offline}                        {{/if}}<\/span><\/div><\/td><\/tr><\/table><\/div>');
jQuery.template("template-filter-combobox-options",'<option class="${classname}" value="${value}"{{if typeof def === "boolean" && def === true}} selected="selected"{{/if}}>${title}<\/option>');jQuery.template("template-filter-filtervalues",'<div class="advansed-item-list advansed-filter-list"><ul class="item-list filter-list"><\/ul><\/div>');jQuery.template("template-filter-sortervalues",'<div class="advansed-item-list advansed-sorter-list"><ul class="item-list sorter-list"><\/ul><\/div>');jQuery.template("template-filter-container",'<div class="advansed-filter empty-filter-list"><div class="advansed-filter-wrapper"><div class="advansed-filter-support"><label class="advansed-filter-label">${ASC.Resources.Master.UserControlsCommonResource.LblFilter}<\/label><label class="advansed-filter-hint"><\/label><div class="advansed-filter-hint-popup-helper"><div class="advansed-filter-hint-popup popup_helper"><\/div><\/div><\/div><label class="advansed-filter-state btn-start-filter"><\/label><div class="advansed-filter-sort-container"><span class="btn-toggle-sorter"><\/span><span class="title">${ASC.Resources.Master.UserControlsCommonResource.LblSort}:&nbsp;<span class="value"><\/span><\/span><\/div><div class="advansed-item-list advansed-sorter-list"><ul class="item-list sorter-list"><\/ul><\/div><div class="advansed-item-list advansed-filter-list"><ul class="item-list filter-list"><\/ul><\/div><div class="advansed-filter-control advansed-filter-groupselector"><div class="advansed-filter-control-container advansed-filter-groupselector-container"><\/div><\/div><div class="advansed-filter-control advansed-filter-userselector"><div class="advansed-filter-control-container advansed-filter-userselector-container"><\/div><\/div><div class="advansed-filter-container"><div class="advansed-filter-filters empty-list"><div class="btn-show-hidden-filters">${ASC.Resources.Master.UserControlsCommonResource.BtnHiddenFilter}<\/div><div class="hidden-filters-container"><\/div><\/div><div class="advansed-filter-button btn-show-filters"><div class="inner-text"><span class="text">+<\/span><\/div><\/div><div class="advansed-filter-input"><label class="advansed-filter-reset btn-reset-filter">&times;<\/label><input class="advansed-filter advansed-filter-input advansed-filter-complete" type="text" placeholder="${ASC.Resources.Master.UserControlsCommonResource.LblFilterPlaceholder}" maxlength="255"/><\/div><\/div>{{if filtervalues.length > 0}}            {{tmpl "template-filter-filtervalues"}}        {{/if}}        {{if sortervalues.length > 0}}            {{tmpl "template-filter-sortervalues"}}        {{/if}}<\/div><div class="advansed-filter-helper"><\/div><\/div>');jQuery.template("template-filter-item",'<div class="default-value"><span class="title">{{if filtertitle}}${filtertitle}{{else}}${title}{{/if}}<\/span><span class="selector-wrapper"><span class="daterange-selector from-daterange-selector"><span class="label">${ASC.Resources.Master.UserControlsCommonResource.LblFrom}<\/span><span class="advansed-filter-dateselector-date dateselector-from-date"><span class="btn-show-datepicker btn-show-datepicker-container"><span class="btn-show-datepicker btn-show-datepicker-title"><\/span><\/span><span class="advansed-filter-datepicker-container asc-datepicker"><span class="datepicker-container"><\/span><\/span><\/span><\/span><span class="daterange-selector to-daterange-selector"><span class="label">${ASC.Resources.Master.UserControlsCommonResource.LblTo}<\/span><span class="advansed-filter-dateselector-date dateselector-to-date"><span class="btn-show-datepicker btn-show-datepicker-container"><span class="btn-show-datepicker btn-show-datepicker-title"><\/span><\/span><span class="advansed-filter-datepicker-container asc-datepicker"><span class="datepicker-container"><\/span><\/span><\/span><\/span>{{if options}}<span class="combobox-selector"><select class="advansed-filter-combobox"{{if $data.multiple === true}} multiple="multiple"{{/if}}>{{tmpl(options) "template-filter-combobox-options"}}<\/select><\/span>{{/if}}<span class="group-selector"><span class="custom-value"><span class="inner-text"><span class="value"><\/span><\/span><\/span><span class="default-value"><span class="inner-text"><span class="value">${ASC.Resources.Master.UserControlsCommonResource.LblSelect}<\/span><\/span><\/span><\/span><span class="person-selector"><span class="custom-value"><span class="inner-text"><span class="value"><\/span><\/span><\/span><span class="default-value"><span class="inner-text"><span class="value">${ASC.Resources.Master.UserControlsCommonResource.LblSelect}<\/span><\/span><\/span><\/span><\/span><span class="btn-delete">&times;<\/span><\/div>');
jQuery.template("feed-inner-comment-tmpl",'<div class="comment"><a href="${author.profileUrl}" target="_blank"><img class="comment-avatar" src="${author.avatarBig}"/><\/a><div class="comment-content-box"><div class="comment-author"><a href="${author.profileUrl}" class="title" target="_blank">${author.displayName}<\/a>,                {{if author.title}}<span>${author.title},<\/span>{{/if}}<span>${formattedDate}<\/span><\/div><div class="comment-body">{{html description}}<\/div><div class="reply-comment-btn" data-commentid="${id}">${ASC.Resources.Master.FeedResource.ReplyCommentBtn}<\/div><\/div><\/div>');jQuery.template("feedTmpl",'<div id="feed_${id}" class="item clearFix"><div class="avatar">{{if !isGuest}}<a href="${author.profileUrl}" target="_blank"><img src="${author.avatarBig}"/><\/a>{{/if}}<\/div><div class="content-box"><div class="feed-item"><div class="header"><span class="action">${actionText}.<\/span><a href="${itemUrl}" class="title" target="_blank"                       data-extra="${additionalInfo}" data-hintName="${hintName}"                       data-extra2="${additionalInfo2}" data-hintName2="${hintName2}"                       data-extra3="${additionalInfo3}" data-hintName3="${hintName3}"                       data-extra4="${additionalInfo4}" data-hintName4="${hintName4}">${title}<\/a>{{if groupedFeeds.length}}<span class="grouped-feeds-count">${ASC.Resources.Master.FeedResource.OtherFeedsCountMsg.format(groupedFeeds.length)}<\/span>{{/if}}{{if isNew}}<span class="new-indicator" title="${ASC.Resources.Master.FeedResource.NewFeedIndicator}">${ASC.Resources.Master.FeedResource.NewFeedIndicator}<\/span>{{/if}}<\/div><div class="description"><span class="menu-item-icon ${itemClass}" /><span class="product">${productText}.<\/span>{{if location}}<span class="location">${location}.<\/span>{{/if}}{{if extraLocation}}<span class="extra-location"><a href="${extraLocationUrl}" class="title" title="${extraLocation}" target="_blank">${extraLocation}<\/a>.<\/span>{{/if}}<\/div><div class="date">{{if isToday}}<span>${ASC.Resources.Master.FeedResource.TodayAt} ${displayModifiedTime}<\/span>{{else isYesterday}}<span>${ASC.Resources.Master.FeedResource.YesterdayAt} ${displayModifiedTime}<\/span>{{else}}<span>${displayModifiedDate}<\/span><span class="time">${displayModifiedTime}<\/span>{{/if}}<\/div>{{if author && !excludeAuthorBox}}<div class="author"><span class="label">${ASC.Resources.Master.FeedResource.Author}:<\/span>{{if !isGuest}}<a href="${author.profileUrl}" class="title" target="_blank">${author.displayName}<\/a>{{if author.title}},<span class="author-title">${author.title}<\/span>{{/if}}                    {{/if}}<\/div>{{/if}}<div class="body">{{html description}}                    {{if hasPreview}}<div class="show-all-btn control-btn">${ASC.Resources.Master.FeedResource.ShowAll}<\/div>{{/if}}<\/div>{{if groupedFeeds.length}}<div class="control-btn show-grouped-feeds-btn">${ASC.Resources.Master.FeedResource.ShowGroupedFeedsBtn}<\/div><div class="control-btn hide-grouped-feeds-btn">${ASC.Resources.Master.FeedResource.HideGroupedFeedsBtn}<\/div><div class="grouped-feeds-box">{{each groupedFeeds}}<div><a href="${ItemUrl}" class="title" target="_blank"                           data-extra="${AdditionalInfo}" data-hintName="${hintName}"                           data-extra2="${AdditionalInfo2}" data-hintName2="${hintName2}"                           data-extra3="${AdditionalInfo3}" data-hintName3="${hintName3}"                           data-extra4="${AdditionalInfo4}" data-hintName4="${hintName4}">${Title}<\/a><\/div>{{/each}}<\/div>{{/if}}                {{if canComment}}<div id="write-comment-btn-${id}" class="control-btn write-comment-btn">${ASC.Resources.Master.FeedResource.WriteComment}<\/div>{{if comments && comments.length}}<div style="margin-top: 5px;"><\/div>{{/if}}<\/div><div class="comments-box">{{if comments && comments.length > 3}}<div class="comments-show-panel"><span class="control-btn" data-show-text="${ASC.Resources.Master.FeedResource.ShowOthersCommentsBtn}" data-hide-text="${ASC.Resources.Master.FeedResource.HideAdditionalCommentsBtn}" data-state="0">${ASC.Resources.Master.FeedResource.ShowOthersCommentsBtn}<\/span><\/div>{{/if}}<div id="comment-form-${id}" class="comment-form"><textarea><\/textarea><div class="comment-error-msg-box"><span class="red-text">${ASC.Resources.Master.FeedResource.CommentErrorMsg}<\/span><\/div><a id="publish-comment-btn-${id}" class="publish-comment-btn button" href="#"                        data-id="${id}"                        data-entity="${item}"                        data-entityid="${itemId}"                        data-commentapiurl="${commentApiUrl}">${ASC.Resources.Master.FeedResource.PublishCommentBtn}<\/a><span class="splitter-buttons"><\/span><a id="cancel-comment-btn-${id}" class="cancel-comment-btn button gray" href="#" data-id="${id}">${ASC.Resources.Master.FeedResource.CancelCommentBtn}<\/a><\/div><div class="main-comments-box">{{each comments.slice(0, 3)}}                    {{tmpl($value) \'feed-inner-comment-tmpl\'}}                    {{/each}}<\/div><div class="extra-comments-box">{{each comments.slice(3)}}                    {{tmpl($value) \'feed-inner-comment-tmpl\'}}                    {{/each}}<\/div><\/div>{{/if}}<\/div><\/div>');jQuery.template("feedCommentTmpl",'<div class="comment"><a href="${author.profileUrl}" target="_blank"><img class="comment-avatar" src="${author.avatarBig}"/><\/a><div class="comment-content-box"><div class="comment-author"><a href="${author.profileUrl}" class="title" target="_blank">${author.displayName}<\/a>,                {{if author.title}}<span>${author.title},<\/span>{{/if}}<span>${date}<\/span><\/div><div class="comment-body">{{html description}}<\/div><div class="reply-comment-btn" data-commentid="${id}">${ASC.Resources.Master.FeedResource.ReplyCommentBtn}<\/div><\/div><\/div>');
jQuery.template("dropFeedTmpl",'<div class="item"><div class="avatar">{{if !isGuest}}<a href="${author.profileUrl}" title="${author.displayName}" target="_blank"><img src="${author.avatarBig}"/><\/a>{{/if}}<\/div><div class="content-box"><div class="description"><span class="menu-item-icon ${itemClass}" ><\/span><span class="product">${productText}.<\/span>{{if location}}<span class="location">${location}.<\/span>{{/if}}<span class="action">${actionText}<\/span>{{if groupedFeeds.length}}<span class="grouped-feeds-count">${ASC.Resources.Master.FeedResource.OtherFeedsCountMsg.format(groupedFeeds.length)}<\/span>{{/if}}<\/div><div class="header"><a class="title" href="${itemUrl}" title="${title}" target="_blank">${title}<\/a><\/div><div class="date">{{if isToday}}<span>${ASC.Resources.Master.FeedResource.TodayAt} ${displayCreatedTime}<\/span>{{else isYesterday}}<span>${ASC.Resources.Master.FeedResource.YesterdayAt} ${displayCreatedTime}<\/span>{{else}}<span>${displayCreatedDatetime}<\/span>{{/if}}<\/div><\/div><\/div>');
jQuery.template("dropMailsTmpl",'{{tmpl($data, {}) "dropMailTmpl"}}');jQuery.template("dropMailTmpl",'<div class="item" data-id="${id}"><div class="content-box"><div class="description"><span>${from}<\/span><\/div><div class="header"><a class="title" href="${itemUrl}" title="${subject}" target="_blank">${subject}<\/a><\/div><div class="date">{{if isToday}}<span>${ASC.Resources.Master.FeedResource.TodayAt}, ${displayTime}<\/span>{{else isYesterday}}<span>${ASC.Resources.Master.FeedResource.YesterdayAt}, ${displayTime}<\/span>{{else}}<span>${displayDate}, ${displayTime}<\/span>{{/if}}<\/div><\/div><\/div>');
jQuery.template("groupSelectorTemplate",'<div class="groupSelectorBox">{{if jq.browser.mobile === true}}<select id="grpselector_mgroupList_${selectorID}" class="comboBox addUserLink mobileSelectList"><\/select>{{else}}<span id="groupSelectorBtn_${selectorID}" class="addUserLink"><a class="link dotline">${linkText}<\/a><span class="sort-down-black"><\/span><\/span><div id="groupSelectorContainer_${selectorID}" class="borderBase tintLight groupSelectorContainer{{if jq.browser.mobile === true}} groupSelectorContainerMobile{{/if}}"><div class="clearFix filterBox"><input type="text" id="grpselector_filter_${selectorID}" class="textEdit" autocomplete="off"/><a id="grpselector_clearFilterBtn_${selectorID}" class="baseLinkAction float-left">${ASC.Resources.Master.TemplateResource.ClearFilterButton}<\/a><\/div><div id="grpselector_groupList_${selectorID}" class="grpselector_groupList"><\/div><\/div>{{/if}}<\/div>');jQuery.template("groupSelectorListTemplate",'{{if jq.browser.mobile === true}}        {{each(i, gpr) Groups}}<option value="${gpr.Id}" style="max-width:300px;">${gpr.Name}<\/option>{{/each}}    {{else}}        {{each(i, gpr) Groups}}<div class="group" data="${gpr.Id}" title="${gpr.Name}">${gpr.Name}<\/div>{{/each}}    {{/if}}');
jQuery.template("sharingListTemplate",'{{each(i, item) items}}<div id="sharing_item_${item.id}" class="sharingItem borderBase clearFix {{if i%2 == 0}}tintMedium{{/if}}">{{if item.isGroup}}<div class="name" title="${item.name}">${item.name}<span class="sharing-group"><\/span><\/div>{{else}}<div class="name"><span class="userLink" id="sharing_item_user_${item.id}" data-uid="${item.id}">${item.name}<\/span><\/div>{{/if}}<div class="remove">{{if item.canEdit & !item.hideRemove}}<div class="removeItem reset-icon" data="${item.id}"><\/div>{{else}}                    &nbsp;                {{/if}}<\/div><div class="action">{{if item.canEdit}}<select data="${item.id}" id="select_${item.id}">{{each(j, action) actions}}                            {{if !action.disabled | action.id == item.selectedAction.id}}<option value="${action.id}"                                    {{if action.id == item.selectedAction.id}}selected="selected"{{/if}}                                     {{if action.disabled}}disabled="disabled"{{/if}} >${action.name}<\/option>{{/if}}                        {{/each}}<\/select>{{else}}<span class="action-clean">${item.selectedAction.name}<\/span>{{/if}}<\/div><\/div>{{/each}}');jQuery.template("sharingActionsTemplate",'<ul class="dropdown-content">{{each(i, action) actions}}            {{if !action.disabled & typeof action.defaultStyle != "undefined"}}<li><a                        class="dropdown-item share-def-action-${action.defaultStyle} {{if action.defaultAction}}active{{/if}}"                        data-id="${action.id}"><span>${action.name}<\/span><\/a><\/li>{{/if}}        {{/each}}<\/ul>');
jQuery.template("template-selector-container",'<div class="advanced-selector-container {{if (opts.onechosen === true)}}onechosen{{/if}}"><div class="advanced-selector-list-block"><div class="advanced-selector-block clearFix"><div class="advanced-selector-block-list">{{if (opts.showSearch ==true)}}<div class="advanced-selector-search"><input class="advanced-selector-search-field" type="text" /><div class="advanced-selector-search-btn"><\/div><div class="advanced-selector-reset-btn"><\/div><\/div>{{/if}}                        {{if (opts.canadd === true)}}<div class="advanced-selector-add-new"><span class="advanced-selector-add-new-link"><span class="advanced-selector-add-new-text">${opts.addtext}<\/span><\/span><\/div>{{/if}}                        {{if (opts.onechosen === false) && (opts.showGroups === false) && !(opts.isTempLoad)}}<div class="advanced-selector-all-select"><input type="checkbox" /><label>${ASC.Resources.Master.UserControlsCommonResource.SelectAll}<\/label><\/div>{{/if}}<div class="advanced-selector-list-items"><div class="advanced-selector-no-results">${opts.noresults}<\/div><div class="advanced-selector-no-items">${opts.noitems}<\/div><div class="advanced-selector-empty-list">${opts.emptylist}<\/div><ul class="advanced-selector-list"><\/ul><\/div><\/div>{{if (opts.showGroups === true)}}<div class="advanced-selector-block-list"><div class="advanced-selector-all-select chosen">{{if (opts.onechosen == false)}}<input type="checkbox" />{{/if}}<label>${ASC.Resources.Master.UserControlsCommonResource.SelectAll}<\/label><\/div><div class="advanced-selector-list-groups"><div class="advanced-selector-no-groups">${opts.nogroups}<\/div><ul class="advanced-selector-list"><\/ul><\/div><\/div>{{/if}}                    {{if (opts.onechosen === false)}}<div class="advanced-selector-selected-count"><\/div>{{/if}}<\/div>{{if (opts.onechosen === false)}}<div class="advanced-selector-btn-cnt"><button type="button" class="advanced-selector-btn-action button blue">${ASC.Resources.Master.UserControlsCommonResource.SaveButton}<\/button><span class="splitter-buttons"><\/span><button type="button" class="advanced-selector-btn-cancel button gray">${ASC.Resources.Master.UserControlsCommonResource.CancelButton}<\/button><\/div>{{/if}}<\/div><\/div>');jQuery.template("template-selector-add-new-item",'<div class="advanced-selector-add-new-block"><div class="advanced-selector-add-new-fields">{{each(i, field) fields}}<div class="advanced-selector-field-wrapper ${field.tag}"><div class="advanced-selector-title">${field.title}<\/div>{{if field.type == "input"}}<input class="advanced-selector-field" type="text" />{{else field.type == "date"}}<input class="textEditCalendar" type="text" />{{else field.type == "choice"}}<select class="advanced-selector-field">{{each(j, item) field.items}}}<option value="${item.type}">${item.title}<\/option>{{/each}}<\/select>{{else field.type == "select"}}<div class="advanced-selector-field-search"><input class="advanced-selector-field" type="text" /><div class="advanced-selector-search-btn"><\/div><div class="advanced-selector-reset-btn" ><\/div><ul class="advanced-selector-field-list"><\/ul><\/div>{{/if}}<span class="advanced-selector-field-error"><\/span><\/div>{{/each}}<\/div><div class="advanced-selector-btn-cnt"><button type="button" class="advanced-selector-btn-add button blue">${btnTitle}<\/button><span class="splitter-buttons"><\/span><button type="button" class="advanced-selector-btn-cancel button gray">${ASC.Resources.Master.UserControlsCommonResource.CancelButton}<\/button><\/div><\/div>');jQuery.template("template-selector-input",'<input class="advanced-selector-search" type="text" />');jQuery.template("template-selector-items-list",'{{each(i, item) Items}}<li title="${item.status}" class="${item.status} ${item.type} {{if (item.isChecked==true)}} selected {{/if}}" data-id="${item.id}" {{if (item.data==true)}} data-cnt="${item.data}" {{/if}}>{{if (isJustList == false)}}<input type="checkbox" {{if (item.isChecked==true)}} checked{{/if}}/><label>{{/if}}                ${item.title}             {{if (isJustList == false)}}<\/label>{{/if}}<\/li>{{/each}}');jQuery.template("template-selector-groups-list",'{{each(i, item) Items}}<li class="" data-id="${item.id}">{{if (isJustList == false)}}<input type="checkbox" />{{/if}}<label>${item.title}<\/label><\/li>{{/each}}');jQuery.template("template-selector-add-new-list-items",'{{each(i, item) Items}}<li data-id="${item.id}">${item.title}<\/li>{{/each}}');jQuery.template("template-selector-add-new-select-items",'{{each(i, item) Items}}<option value="${item.type}">${item.title}<\/option>{{/each}}');jQuery.template("template-selector-selected-items",'{{each(i, item) Items}}<li data-id="${item.id}"><span class="result-name">${item.title}<\/span><span class="reset-icon"><\/span><\/li>{{/each}}');
jQuery.template("template-emailselector-item",'<div class="emailselector-item {{if isValid === false}}error{{/if}}" title="${email}"><span class="emailselector-item-text">{{if name && name !== email }}${name} (${email}){{else}}${email}{{/if}}<\/span><span class="emailselector-item-close">&times;<\/span><\/div>');jQuery.template("template-emailselector-autocomplete","<li><a>{{if name }}${name},&nbsp;{{/if}}{{if email }}${email}{{/if}}<\/a><\/li>");
jQuery.template("template-emptyScreen",'<div id="${ID}" class="noContentBlock emptyScrCtrl{{if typeof(CssClass)!="undefined"}} ${CssClass}{{/if}}">{{if typeof(ImgSrc)!="undefined" && ImgSrc != null && ImgSrc != ""}}<table><tr><td><img src="${ImgSrc}" alt="" class="emptyScrImage"/><\/td><td><div class="emptyScrTd">{{/if}}                        {{if typeof(Header)!="undefined" && Header != null && Header != ""}}<div class="header-base-big">${Header}<\/div>{{/if}}                        {{if typeof(HeaderDescribe)!="undefined" && HeaderDescribe != null && HeaderDescribe != ""}}<div class="emptyScrHeadDscr">${HeaderDescribe}<\/div>{{/if}}                        {{if typeof(Describe)!="undefined" && Describe != null && Describe != ""}}<div class="emptyScrDscr">{{html Describe}}<\/div>{{/if}}                        {{if typeof(ButtonHTML)!="undefined" && ButtonHTML != null && ButtonHTML != ""}}<div class="emptyScrBttnPnl">{{html ButtonHTML}}<\/div>{{/if}}                        {{if typeof(ImgSrc)!="undefined" && ImgSrc != null && ImgSrc != ""}}<\/div><\/td><\/tr><\/table>{{/if}}<\/div>');jQuery.template("template-blockUIPanel",'<div style="display: none;" id="${id}"><div class="popupContainerClass"><div class="containerHeaderBlock"><table cellspacing="0" cellpadding="0" border="0" style="width: 100%; height: 0px;"><tbody><tr valign="top"><td {{if typeof(headerClass) !="undefined" && headerClass !=""}}class="${headerClass}"{{/if}}>${headerTest}<\/td><td class="popupCancel"><div onclick="PopupKeyUpActionProvider.CloseDialog();" class="cancelButton" title="${ASC.Resources.Master.TemplateResource.CloseButton}">&times;<\/div><\/td><\/tr><\/tbody><\/table><\/div><div class="infoPanel{{if typeof(infoType) != "undefined" && infoType !=""}} ${infoType}{{/if}}"                 {{if typeof(infoMessageText) == "undefined" || infoMessageText== ""}}style="display: none;"{{/if}}><div>{{if typeof(infoMessageText) != "undefined" && infoMessageText != ""}}${infoMessageText}{{/if}}<\/div><\/div><div class="containerBodyBlock">{{if typeof(questionText) != "undefined" && questionText != ""}}<div><b>${questionText}<\/b><\/div>{{/if}}                {{html innerHtmlText}}                {{if typeof(OKBtn) != \'undefined\' && OKBtn != "" || typeof(OtherBtnHtml) != \'undefined\' || typeof(CancelBtn) != \'undefined\' && CancelBtn != ""}}<div class="middle-button-container">{{if typeof(OKBtn) != \'undefined\' && OKBtn != ""}}<a class="button blue middle{{if typeof(OKBtnClass) != \'undefined\'}} ${OKBtnClass}{{/if}}"                       {{if typeof(OKBtnID) !=\'undefined\'}}id="${OKBtnID}"{{/if}}                       {{if typeof(OKBtnHref) !=\'undefined\' && OKBtnHref !=""}} href="${OKBtnHref}"{{/if}}>${OKBtn}<\/a><span class="splitter-buttons"><\/span>{{/if}}                    {{if typeof(OtherBtnHtml) != \'undefined\'}}                    {{html OtherBtnHtml}}<span class="splitter-buttons"><\/span>{{/if}}                    {{if typeof(CancelBtn) != \'undefined\' && CancelBtn != ""}}<a class="button gray middle{{if typeof(CancelBtnClass) != \'undefined\'}} ${CancelBtnClass}{{/if}}"                       {{if typeof(CancelBtnID) !=\'undefined\'}}id="${CancelBtnID}"{{/if}}                       onclick="PopupKeyUpActionProvider.EnableEsc = true; jq.unblockUI();">${CancelBtn}<\/a>{{/if}}<\/div>{{/if}}<\/div><\/div><\/div>');jQuery.template("template-newFile",'<tr class="newDoc"><td class="${tdclass}" colspan="2"><input id="newDocTitle" type="text" class="textEdit" data="${ASC.Resources.Master.UserControlsCommonResource.NewDocument}" maxlength="165" value="${ASC.Resources.Master.UserControlsCommonResource.NewDocument}"/><span id="${type}" onclick="${onCreateFile}" class="button gray btn-action __apply createFile" title="${ASC.Resources.Master.TemplateResource.AddButton}"><\/span><span onclick="${onRemoveNewDocument}" title="${ASC.Resources.Master.UserControlsCommonResource.QuickLinksDeleteLink}" class="button gray btn-action __reset remove"><\/span><\/td><\/tr>');jQuery.template("template-fileAttach",'<tr><td id="af_${id}">{{if type=="image"}}<a href="${viewUrl}" rel="imageGalery" class="screenzoom ${exttype}" title="${title}"><div class="attachmentsTitle">${title}<\/div>{{if versionGroup > 1}}<span class="version">${ASC.Resources.Master.UserControlsCommonResource.Version}${versionGroup}<\/span>{{/if}}<\/a>{{else}}                {{if type == "editedFile" || type == "viewedFile"}}<a href="${docEditUrl}" class="${exttype}" title="${title}" target="_blank"><div class="attachmentsTitle">${title}<\/div>{{if versionGroup > 1}}<span class="version">${ASC.Resources.Master.UserControlsCommonResource.Version}${versionGroup}<\/span>{{/if}}<\/a>{{else}}<a href="${viewUrl}" class="${exttype} noEdit" title="${title}" target="_blank"><div class="attachmentsTitle">${title}<\/div>{{if versionGroup > 1}}<span class="version">${ASC.Resources.Master.UserControlsCommonResource.Version}${versionGroup}<\/span>{{/if}}<\/a>{{/if}}                        {{/if}}<\/td><td class="editFile">{{if (access==0 || access==1)}}<a class="{{if trashAction == "delete"}}deleteDoc{{else}}unlinkDoc{{/if}}" title="{{if trashAction == "delete"}}${ASC.Resources.Master.UserControlsCommonResource.DeleteFile}{{else}}${ASC.Resources.Master.UserControlsCommonResource.RemoveFromList}{{/if}}" data-fileId="${id}"><\/a>{{/if}}            {{if (!jq.browser.mobile)}}<a class="downloadLink" title="${ASC.Resources.Master.UserControlsCommonResource.DownloadFile}" href="${viewUrl}"><\/a>{{/if}}            {{if (type == "editedFile")&&(access==0 || access==1)}}<a id="editDoc_${id}" title="${ASC.Resources.Master.UserControlsCommonResource.EditFile}" target="_blank" href="${editUrl}"><\/a>{{/if}}<\/td><\/tr>');jQuery.template("template-accountLinkCtrl",'<div class="account-links tabs-content"><ul class="clearFix">{{each(i, acc) infos}}<li class="${acc.Provider}{{if acc.Linked == true}} connected{{/if}}"><span class="label"><\/span><span {{if acc.Linked == true}} class="linked"{{/if}}>{{if acc.Linked == true}}                        ${ASC.Resources.Master.TemplateResource.AssociateAccountConnected}                    {{else}}                        ${ASC.Resources.Master.TemplateResource.AssociateAccountNotConnected}                    {{/if}}<\/span><a href="${acc.Url}" class="popup{{if acc.Linked == true}} linked{{/if}}" id="${acc.Provider}">{{if acc.Linked == true}}                        ${ASC.Resources.Master.TemplateResource.AssociateAccountDisconnect}                    {{else}}                        ${ASC.Resources.Master.TemplateResource.AssociateAccountConnect}                    {{/if}}<\/a><\/li>{{/each}}<\/ul><\/div>');jQuery.template("template-mailCalendar",'<div style="background-color: #fff; width: 600px; margin: 0 auto; text-align: left;"><table cellspacing="0" cellpadding="0" style="font-family: \'Open Sans\', Tahoma, Arial; font-size: 14px; color: #333; background: #fff; text-align: center; width: 600px; margin: 0; padding: 0; border: 0 none; border-collapse: collapse; empty-cells: show; border-spacing: 0;"><tbody><tr border="0" cellspacing="0" cellpadding="0"><td colspan="3" style="margin: 0; padding: 0; background-color: #fff; height: 65px; padding: 20px 0 0 30px;"><div style="text-align: left; height: 65px; width: 570px; margin: 0; padding: 0;"><a href="http://www.onlyoffice.com/"                style="text-decoration: none; display: inline-block; width: 216px; height: 35px; margin: 0; padding: 0;"                target="_blank"><img style="border: 0px none; width: 216px; height: 35px; margin: 0; padding: 0;"                  src="${ASC.Resources.Master.LogoDarkUrl}" /><\/a><\/div><\/td><\/tr><tr border="0" cellspacing="0" cellpadding="0"><td colspan="3" style="margin: 0; padding: 15px 30px 15px; background-color: #f6f6f6; -moz-border-radius: 6px; -webkit-border-radius: 6px; border-radius: 6px;"><div style="font-family: \'Open Sans\', Tahoma, Arial; font-size: 14px; color: #333; margin: 0; padding: 0; width: 540px; height: auto; overflow: hidden; word-wrap: break-word; vertical-align: top; text-align: left; border: 0 none;"><div style="font-family: \'Open Sans\', Tahoma, Arial; font-size: 14px; color: #333; padding: 5px 0 10px 0; width: 540px; overflow: hidden; word-wrap: break-word;"><table cellpadding="0" cellspacing="0" style="font-family: \'Open Sans\', Tahoma, Arial; border-collapse: collapse; height: 132px; width:100%;"><tr><td colspan="3" style="padding-bottom: 16px;"><table cellpadding="0" cellspacing="0" style="font-family: \'Open Sans\', Tahoma, Arial; border-collapse: collapse;"><tbody><tr><td style="vertical-align: top; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; padding-bottom: 8px;">${action}<\/td><\/tr><tr><td style="vertical-align: top; font-family: \'Open Sans\', Tahoma, Arial; font-size: 24px;">${summary}<\/td><\/tr><\/tbody><\/table><\/td><\/tr><tr><td width="66" height="66" align="left" valign="top" style="width: 66px; height: 66px;"><img style="border: 0px none; width: 66px; height: 66px; margin: 0; padding: 0;" src="${StudioManager.GetImage(\'event_66.png\')}" /><\/td><td style="padding-left: 16px;"><table cellpadding="0" cellspacing="0" style="font-family: \'Open Sans\', Tahoma, Arial; border-collapse: collapse;"><tbody><tr><td style="vertical-align: top; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; color: rgb(153, 153, 153);">${ASC.Resources.Master.TemplateResource.MailIcsCalendarWhenLabel}:<\/td><td style="vertical-align: top; padding-left: 8px; padding-bottom: 8px; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px;" title="${dateEvent}">${dateEvent}<\/td><\/tr>{{if typeof(rruleText) != \'undefined\' && rruleText != \'\' && rruleText != null }}<tr><td style="vertical-align: top; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; color: rgb(153, 153, 153);">${ASC.Resources.Master.TemplateResource.MailIcsCalendarRecurrenceLabel}:<\/td><td style="vertical-align: top; padding-left: 8px; padding-bottom: 8px; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px;" title="${dateEvent}">${rruleText}<\/td><\/tr>{{/if}}<tr><td style="vertical-align: top; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; color: rgb(153, 153, 153);">${ASC.Resources.Master.TemplateResource.MailIcsCalendarWhereLabel}:<\/td><td style="vertical-align: top; padding-left: 8px; padding-bottom: 8px; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; " {{if typeof(location) != \'undefined\' &&  location != \'\'&& location != null }}title="${location}"{{/if}}>{{if typeof(location) != \'undefined\' && location != \'\' && location != null }}                                                ${location}                                                {{if typeof(mapUrl) != \'undefined\' && mapUrl != \'\' && mapUrl != null }}                                                    &nbsp;<a href="${mapUrl}" target="_blank" style="color: #333333;">(${ASC.Resources.Master.TemplateResource.MailIcsCalendarMapLabel})<\/a>{{/if}}                                            {{else}}                                            ${ASC.Resources.Master.TemplateResource.MailIcsCalendarNoLocationLabel}                                            {{/if}}<\/td><\/tr><tr><td style="vertical-align: top; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; color: rgb(153, 153, 153);">${ASC.Resources.Master.TemplateResource.MailIcsCalendarWhoLabel}:<\/td><td style="vertical-align: top; padding-left: 8px; padding-bottom: 8px; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px;">{{if orgEmail !== \'\' }}<a title="${orgEmail}" name="${orgName}" href="${mailToHref}" style="color: #333333;">{{if typeof(orgName) != \'undefined\' && orgName != \'\' && orgName != null }}                                                        ${orgName}                                                    {{else}}                                                        ${orgEmail}                                                    {{/if}}<\/a>{{else}}                                                ${orgName}                                            {{/if}}&nbsp;(${ASC.Resources.Master.TemplateResource.MailIcsCalendarOrganizerLabel})<\/td><\/tr><\/tbody><\/table><\/td><\/tr><\/table><\/div><\/div><\/td><\/tr><tr border="0" cellspacing="0" cellpadding="0"><td colspan="5" style="width: 600px; vertical-align: top; margin: 0; padding: 20px 30px 15px;"><p style="color: #7b7b7b; font-family: \'Open Sans\', Tahoma, Arial; font-size: 12px; margin: 0; padding: 0; text-align: center; width: 540px;">${ASC.Resources.Master.TemplateResource.MailAutoGeneratedText}<br />${ASC.Resources.Master.TemplateResource.AllRightsReservedText}<\/p><\/td><\/tr><\/tbody><\/table><\/div>');
jQuery.template("template-productItem",'{{if CanNotBeDisabled === false}}<div class="tabs-section {{if Disabled === true}} accessRights-disabledText{{/if}}"><span class="header-base"><img src="{{if Disabled === true}}${DisabledIconUrl}{{else}}${IconUrl}{{/if}}" align="absmiddle" /><span>${Name}<\/span><\/span><span id="switcherAccessRights_${ItemName}" data-id="${ItemName}" class="toggle-button"            data-switcher="0" data-showtext="${ASC.Resources.Master.TemplateResource.Show}" data-hidetext="${ASC.Resources.Master.TemplateResource.Hide}">${ASC.Resources.Master.TemplateResource.Hide}<\/span><\/div><div id="accessRightsContainer_${ItemName}" data-id="${ID}" class="accessRights-content"><div{{if Disabled === true}} style=\'display:none\'{{/if}}><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="390px" valign="top"><div>${jq.format(ASC.Resources.Master.AccessRightsAccessToProduct, Name)}:<\/div><div class="accessRightsItems"><input type="radio" id="all_${ID}" name="radioList_${ID}"                             onclick="ASC.Settings.AccessRights.changeAccessType(this, \'${ItemName}\')"><label for="all_${ID}">${ASC.Resources.Master.AccessRightsAllUsers}<\/label><\/div><div class="accessRightsItems"><input type="radio" id="fromList_${ID}" name="radioList_${ID}"                             onclick="ASC.Settings.AccessRights.changeAccessType(this, \'${ItemName}\')"><label for="fromList_${ID}">${ASC.Resources.Master.AccessRightsUsersFromList}<\/label><\/div><\/td><td valign="top">{{if UserOpportunities != null && UserOpportunities.length > 0}}<div>${UserOpportunitiesLabel}:<\/div>{{each(i, opp) UserOpportunities}}<div class="simple-marker-list">${Encoder.htmlEncode(opp)}<\/div>{{/each}}                        {{/if}}<\/td><\/tr><\/tbody><\/table><div id="selectorContent_${ItemName}" class="accessRightProductBlock"><div id="emptyUserListLabel_${ItemName}" class="describe-text accessRightsEmptyUserList">${ASC.Resources.Master.AccessRightsEmptyUserList}<\/div><div id="selectedUsers_${ItemName}" class="clearFix">{{if SelectedUsers != null &&  SelectedUsers.length > 0}}                    {{each(i, usr) SelectedUsers}}<div class="accessRights-selectedItem" id="selectedUser_${ItemName}_${usr.ID}"><img src="${StudioManager.GetImage(\'user_12.png\')}"><img src="${StudioManager.GetImage(\'trash_12.png\')}" id="deleteSelectedUserImg_${ItemName}_${usr.ID}"                                title="${ASC.Resources.Master.TemplateResource.DeleteButton}" class="display-none">${usr.DisplayUserName}<\/div>{{/each}}                {{/if}}<\/div><div id="selectedGroups_${ItemName}" class="clearFix">{{if SelectedGroups != null &&  SelectedGroups.length > 0}}                    {{each(i, gr) SelectedGroups}}<div class="accessRights-selectedItem" id="selectedGroup_${ItemName}_${gr.ID}"><img src="${StudioManager.GetImage(\'group_12.png\')}"><img src="${StudioManager.GetImage(\'trash_12.png\')}" id="deleteSelectedGroupImg_${ItemName}_${gr.ID}"                                title="${ASC.Resources.Master.TemplateResource.DeleteButton}" class="display-none">${gr.Name}<\/div>{{/each}}                {{/if}}<\/div><div class="accessRights-selectorContent"><div id="userSelector_${ItemName}" class="link dotline plus">${ASC.Resources.Master.AccessRightsAddUser}<\/div><div id="groupSelector_${ItemName}" class="link dotline plus">${ASC.Resources.Master.AccessRightsAddGroup}<\/div><\/div><\/div><\/div><div class="accessRights-disabledText" {{if Disabled === false}} style=\'display:none\'{{/if}}>${jq.format(ASC.Resources.Master.AccessRightsDisabledProduct, Name)}<\/div><\/div>{{/if}}');
jQuery.template("template-commentsList",'{{if showCaption == true}}<div id="commentsTitle" class="headerPanel">${ASC.Resources.Master.TemplateResource.Comments}<\/div>{{/if}}<div id="noComments"{{if isEmpty !== true}} style="display: none;"{{/if}}>${ASC.Resources.Master.UserControlsCommonResource.NoComments}<\/div><div id="mainCommentsContainer" class="comment-main-container" style="{{if total%2==0}}border-bottom:1px solid #ddd; {{/if}} {{if isEmpty===true}} display:none; {{/if}}">{{each(i, cmt) comments}}        {{tmpl({comment: cmt, commentLevel: 1, maxDepthLevel: maxDepthLevel}) \'template-comment\'}}        {{/each}}<\/div><br/>{{if isShowAddCommentBtn == true}}<a id="add_comment_btn">${ASC.Resources.Master.TemplateResource.AddNewCommentButton}<\/a>{{/if}}<div id="commentBox" class="comment-main-actions-container"><div id="commentBoxContainer"><input type="hidden" id="hdnParentComment" value=""/><input type="hidden" id="hdnAction" value=""/><input type="hidden" id="hdnCommentID" value=""/><input type="hidden" id="hdnObjectID" value="${objectID}"/><textarea id="commentEditor${_jsObjName}" name="commentEditor${_jsObjName}"><\/textarea><div class="middle-button-container"><a href="javascript:void(0);" id="btnAddComment" class="button">${ASC.Resources.Master.TemplateResource.PublishButton}<\/a><span class="splitter-buttons"><\/span><a href="javascript:void(0);" id="btnPreview" class="button disable">${ASC.Resources.Master.TemplateResource.PreviewButton}<\/a><span class="splitter-buttons"><\/span><a href="javascript:void(0);" id="btnCancel" class="button gray cancelFckEditorChangesButtonMarker">${ASC.Resources.Master.TemplateResource.CancelButton}<\/a><\/div><\/div><div id="previewBox" class="comment-preview-container"><div class="headerPanel">${ASC.Resources.Master.TemplateResource.PreviewButton}<\/div><div id="previewBoxBody"><\/div><div class="middle-button-container"><a href="javascript:void(0);" class="button blue">${ASC.Resources.Master.TemplateResource.CloseButton}<\/a><\/div><\/div><\/div>');jQuery.template("template-comment",'<div{{if commentLevel != 1 && commentLevel <= maxDepthLevel}} style="margin-left: 35px;"{{/if}} id="container_${comment.commentID}"><div class="comments-item-container" id="comment_${comment.commentID}">{{if comment.inactive}}                {{tmpl \'template-comment-inactive\'}}            {{else}}<table cellpadding="0" cellspacing="0"><tr><td><img class="userMiniPhoto" alt="${comment.userFullName}" src="${comment.userAvatarPath}"/><\/td><td><div class="comments-item-data"><div><a style="margin-left:10px;" class="link bold" href="${comment.userProfileLink}">${comment.userFullName}<\/a>&nbsp;&nbsp;<span class="text-medium-describe" style="padding-left:5px;">${comment.timeStampStr}<\/span><\/div>{{if comment.userPost != ""}}<div style="padding-top:2px;padding-left:10px;" class="describe-text">${comment.userPost}<\/div>{{/if}}<div id="content_${comment.commentID}" style="padding-top:8px;padding-left:10px;" class="longWordsBreak">{{html comment.commentBody}}<\/div>{{if comment.attachments != null && comment.attachments.length > 0}}<div id="attacments_${comment.commentID}" style="padding-top:10px;padding-left:15px;">{{each(k, attach) comment.attachments}}                                {{if k!=0}}, {{/if}}<a class="linkDescribe" href="${attach.FilePath}">${attach.FileName}<\/a><input name="attacment_name_${comment.commentID}" type="hidden" value="${attach.FileName}" /><input name="attacment_path_${comment.commentID}" type="hidden" value="${attach.FileName}" />{{/each}}<\/div>{{/if}}<\/div><div class="clearFix comments-item-actions">{{if comment.isResponsePermissions == true}}<div class="float-left"><a class="link dotline gray" id="response_${comment.commentID}" href="javascript:void(0);">${ASC.Resources.Master.TemplateResource.AnswerButton}<\/a><\/div>{{/if}}                       {{if comment.isEditPermissions == true}}<div class="float-right"><a class="link dotline gray" id="edit_${comment.commentID}" href="javascript:void(0);">${ASC.Resources.Master.TemplateResource.EditButton}<\/a><span class="text-medium-describe splitter"><\/span><a class="link dotline gray" id="remove_${comment.commentID}" href="javascript:void(0);">${ASC.Resources.Master.TemplateResource.DeleteButton}<\/a><\/div>{{/if}}<\/div><\/td><\/tr><\/table>{{/if}}<\/div>{{if comment.commentList != null && comment.commentList.length > 0}}        {{each(ind, citem) comment.commentList}}            {{tmpl({comment: citem, commentLevel: commentLevel + 1, maxDepthLevel: maxDepthLevel}) \'template-comment\'}}        {{/each}}        {{/if}}<\/div>');jQuery.template("template-comment-inactive",'<div class="comment-inactive">${ASC.Resources.Master.TemplateResource.CommentWasRemoved}<\/div>');
jQuery.template("common_containerTmpl",'<div class="{{if options.IsPopup && options.PopupContainerCssClass}} ${options.PopupContainerCssClass} {{else}} ${options.ContainerCssClass}{{/if}}" style="${options.ContainerStyle}">{{if header || currentPageCaption || options.IsPopup}}<div class="containerHeaderBlock"><table cellspacing="0" cellpadding="0" border="0" style=\'width: 100%; height: 0px;\'><tr valign="top"><td>{{if currentPageCaption}}<div>{{if options.HeaderBreadCrumbCaption}}                            ${options.HeaderBreadCrumbCaption}                            {{else}}                            ${Encoder.htmlEncode(currentPageCaption)}                            {{/if}}<\/div>{{else header}}                        {{tmpl(header.data) header.title}}                        {{/if}}<\/td>{{if options.IsPopup}}<td class="popupCancel"><div class="cancelButton" onclick="${options.OnCancelButtonClick}">&times;<\/div><\/td>{{/if}}<\/tr><\/table><\/div>{{/if}}        {{if options.IsPopup}}<div {{if !options.InfoMessageText}}style="display:none" {{/if}} class="infoPanel {{if options.InfoType === 1}} warn{{else options.InfoType === 2}} alert{{/if}}"><div>${options.InfoMessageText}<\/div><\/div>{{else}}<div class="infoPanel {{if options.InfoType === 1}} warn{{else options.InfoType === 2}} alert{{/if}}"><div {{if !options.InfoMessageText}}style="display:none" {{/if}}>${options.InfoMessageText}<\/div><\/div>{{/if}}        {{if body}}<div class="containerBodyBlock">{{tmpl(body.data) body.title}}<\/div>{{/if}}<\/div>');
window.CustomEvent=function(n){var t,r,i;if(typeof this.supportedEvents=="undefined"&&(this.supportedEvents=[]),typeof this.eventHandlers=="undefined"&&(this.eventHandlers=[],this.handlerIds={}),!n)return undefined;if(typeof n=="object")if(n instanceof Array)for(t=0,r=n.length;t<r;t++)typeof n[t]=="string"&&this.supportedEvents.push(n[t].toLowerCase());else for(i in n)n.hasOwnProperty(i)&&typeof n[i]=="string"&&this.supportedEvents.push(n[i].toLowerCase());else typeof n=="string"&&this.supportedEvents.push(n.toLowerCase())};window.CustomEvent.prototype.isSupported=function(n){if(!(this.supportedEvents instanceof Array)||!(this.eventHandlers instanceof Array))return!1;for(var t=this.supportedEvents.length;t--;)if(this.supportedEvents[t]===n)return!0;return!1};window.CustomEvent.prototype.bind=function(n,t,i){var f,u;if(!(this.supportedEvents instanceof Array)||!(this.eventHandlers instanceof Array))throw"Invalid CustomEvent object";if(typeof n!="string"||typeof t!="function")throw"Incorrect params";if(!this.isSupported(n=n.toLowerCase()))throw"Unsupported event "+n;i=i||{};f=i.hasOwnProperty("once")?i.once:!1;u=0;u|=+f*1;for(var e=0,r=Math.floor(Math.random()*1e6);this.handlerIds.hasOwnProperty(r)&&e++<1e3;)r=Math.floor(Math.random()*1e6);return this.handlerIds[r]={},this.eventHandlers.push({id:r,name:n,handler:t,type:u}),r};window.CustomEvent.prototype.unbind=function(n){if(!(this.supportedEvents instanceof Array)||!(this.eventHandlers instanceof Array))throw"Invalid CustomEvent object";if(typeof n=="undefined")return undefined;if(this.handlerIds.hasOwnProperty(n))for(var i=this.eventHandlers,t=this.eventHandlers.length;t--;)if(i[t].id===n){delete this.handlerIds[t];i.splice(t,1);break}};window.CustomEvent.prototype.call=function(n,t,i){var u,r,f;if(!(this.supportedEvents instanceof Array)||!(this.eventHandlers instanceof Array))throw"Invalid CustomEvent object";if(typeof n!="string")throw"Incorrect params";if(!this.isSupported(n=n.toLowerCase()))throw"Unsupported event "+n;for(t=t||window,i=i||[],u=this.eventHandlers,r=0,f=u.length;r<f;r++)u[r].name===n&&(u[r].handler.apply(t,i),f=u.length,u[r]&&u[r].type&1&&(u.splice(r,1),r--,f--))};window.CustomEvent.prototype.extend=function(n){var t,r,i;if(typeof this.supportedEvents=="undefined"&&(this.supportedEvents=[]),typeof this.eventHandlers=="undefined"&&(this.eventHandlers=[],this.handlerIds={}),!n)return undefined;if(typeof n=="object")if(n instanceof Array)for(t=0,r=n.length;t<r;t++)typeof n[t]=="string"&&this.supportedEvents.push(n[t].toLowerCase());else for(i in n)n.hasOwnProperty(i)&&typeof n[i]=="string"&&this.supportedEvents.push(n[i].toLowerCase());else typeof n=="string"&&this.supportedEvents.push(n.toLowerCase())};
window.ServiceFactory=function(){function n(n,t,i){var r={handler:n,re:t};return typeof i!="undefined"&&(r.method=i),r}function at(n){return n?n.constructor.toString().indexOf("Array")!=-1:!1}function fi(n,t){var i,r,u;if(t===!0){for(i=[["&lt;","<"],["&gt;",">"],["&and;","\\^"],["&sim;","~"],["&amp;","&"]],r=i.length;r--;)n=n.replace(new RegExp(i[r][1],"g"),i[r][0]);return n}return u=document.createElement("textarea"),u.innerHTML=n,u.value}function s(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function ei(n){if(!n||typeof n!="object")return n;var i,t,r=typeof n.pop=="function"?[]:{};for(i in n)n.hasOwnProperty(i)&&(t=n[i],r[i]=t&&typeof t=="object"?ei(t):t);return r}function i(n,t,i){for(var u=[],r=n?n.length:0;r--;)u.unshift(s(t?t(n[r]):{},i(n[r])));return u}function a(n,t){return(n=""+n,!t)?n.length===1?"0"+n:n:n.length===t?n:"000000000".substring(0,t-n.length)+n}function bi(n){var t=null;if(typeof n=="string"){try{t=jQuery.parseJSON(fi(n))}catch(i){t=null}if(!t||typeof t!="object")try{t=jQuery.parseJSON(fi(jQuery.base64.decode(n)))}catch(i){t=null}}if(typeof n=="object")try{t=n.hasOwnProperty("response")?n.response:n}catch(i){t=null}return t}function vt(n){return n?(n.indexOf("://")===-1&&(n.charAt(0)!=="/"&&(n="/"+n),n=[location.protocol,"//",location.hostname,location.port?":"+location.port:"",n].join("")),n):""}function ki(n){for(var i=null,r=0,u=pi,t=0,t=u.length;t--;)for(i=u[t].exts,r=i.length;r--;)if(i[r]==n)return u[t].name;return"unknown"}function di(n){for(var i=ii,t=0,t=i.length;t--;)if(n==i[t])return!0;return!1}function gi(n){for(var t=yi,i=0,i=t.length;i--;)if(t[i].id==n)return t[i].label;return t.length>0?t[0].label:""}function nr(n){for(var t=vi,i=0,i=t.length;i--;)if(t[i].id==n)return t[i].label;return t.length>0?t[0].label:n}function oi(n){var t=lt;for(var i in t)if(t.hasOwnProperty(i)&&t[i].id==n)return t[i].name;return""}function tr(n){var t=null,i=null,r={mailboxes:[],telephones:[],links:[]},u,f;if(!n)return r;for(u=0,f=n.length;u<f;u++){i=n[u];t={type:l.hasOwnProperty(i.type)?l[i.type].type:-1,name:i.type,title:i.value,label:l.hasOwnProperty(i.type)?l[i.type].title:i.type,istop:!1};switch(t.name){case l.twitter.name:t.val=t.title.indexOf("twitter.com")===-1?"http://twitter.com/"+t.title:t.title;t.title=t.title.indexOf("twitter.com")!==-1?t.title.substring(t.title.lastIndexOf("/")):t.title;break;case l.facebook.name:t.val=t.title.indexOf("facebook.com")===-1?"http://facebook.com/"+t.title:t.title;t.title=t.title.indexOf("facebook.com")!==-1?t.title.substring(t.title.lastIndexOf("/")+1):t.title;break;case l.skype.name:t.istop=!0;t.val="skype:"+t.title+"?call";case l.jabber.name:case l.msn.name:case l.aim.name:break;case l.icq.name:t.val="http://www.icq.com/people/"+t.title;break;case l.yahoo.name:case l.gmail.name:case l.gtalk.name:t.istop=!0;t.val="mailto:"+t.title;break;case l.blogger.name:t.val=t.title.indexOf("blogger.com")===-1?"http://"+t.title+".blogger.com/":t.title;break;case l.myspace.name:t.val=t.title.indexOf("myspace.com")===-1?"http://myspace.com/"+t.title:t.title;t.title=t.title.indexOf("myspace.com")!==-1?t.title.substring(t.title.lastIndexOf("/")+1):t.title;break;case l.livejournal.name:t.val=t.title.indexOf("livejournal.com")===-1?"http://"+t.title+".livejournal.com/":t.title;break;default:t.val=t.title}switch(t.type){case 0:r.mailboxes.push(t);break;case 1:r.telephones.push(t);break;case 2:r.links.push(t);break;case-1:r.links.push(t)}}return r}function si(n,t,i,r,u,f){var e;switch(t){case"d":return n.getDate();case"dd":return a(n.getDate());case"ddd":return i[n.getDay()];case"dddd":return r[n.getDay()];case"h":return e=n.getHours(),e>12?e-12:e===0?12:e;case"hh":return e=n.getHours(),a(e>12?e-12:e===0?12:e);case"H":return n.getHours();case"HH":return a(n.getHours());case"m":return n.getMinutes();case"mm":return a(n.getMinutes());case"M":return n.getMonth()+1;case"MM":return a(n.getMonth()+1);case"MMM":return u[n.getMonth()];case"MMMM":return f[n.getMonth()];case"s":return n.getSeconds();case"ss":return a(n.getSeconds());case"t":return n.getHours()<12?"A":"P";case"tt":return n.getHours()<12?"AM":"PM";case"y":return n.getYear()-100;case"yy":return(n.getYear()%100<10?"0":"")+n.getYear()%100;case"yyy":return(n.getYear()%100<10?"0":"")+n.getYear()%100;case"yyyy":return n.getFullYear()}return""}function st(n){if(!n)return null;return{type:"group",id:n.id,name:n.name,manager:n.manager||"",title:n.title||n.name,members:n.hasOwnProperty("members")?hi(n.members):null}}function fr(n){if(!n)return[];for(var t=null,u=[],i=at(n)?n:[n],r=0,r=i?i.length:0;r--;)t=st(i[r]),t?u.unshift(t):null;return u}function h(n){var u;if(!n)return null;n.hasOwnProperty("email")&&n.hasOwnProperty("contacts")&&(u={type:"mail",value:n.email},n.contacts=n.contacts==null?[u]:[u].concat(n.contacts));var t=r(n.created||n.workFrom||n.workFromDate),i=r(n.terminated||n.terminatedDate),h=r(n.birthday),s=n.displayName||n.firstName+" "+n.lastName,f=tr(n.contacts);return{index:s.charAt(0).toLowerCase(),type:"person",id:n.id,timestamp:t?t.getTime():0,crtdate:t,displayCrtdate:e(t),displayDateCrtdate:o(t),displayTimeCrtdate:c(t),trtdate:i,displayTrtdate:e(i),displayDateTrtdate:o(i),displayTimeTrtdate:c(i),birthday:h,userName:n.userName||"",firstName:n.firstName||"",lastName:n.lastName||"",displayName:s||"",email:n.email||"",tel:f.telephones.length>0?f.telephones[0].val:"",contacts:f,avatar:n.avatar||n.avatarSmall||ht,avatarBig:n.avatarBig,avatarSmall:n.avatarSmall||ct,group:st(n.groups&&n.groups.length>0?n.groups[0]||null:null),groups:fr(n.groups||[]),status:n.status||0,activationStatus:n.activationStatus||0,isActivated:ri.activated.id===(n.activationStatus||0),isOnline:typeof n.isOnline!="undefined"?n.isOnline:"",isPending:ri.pending.id===(n.activationStatus||0),isTerminated:wi.terminated.id===(n.status||0),isMe:v?v.id===n.id:!1,isManager:!1,isPortalOwner:typeof n.isOwner!="undefined"?n.isOwner:null,isAdmin:typeof n.isAdmin!="undefined"?n.isAdmin:null,listAdminModules:typeof n.listAdminModules!="undefined"?n.listAdminModules:[],isVisitor:typeof n.isVisitor!="undefined"?n.isVisitor:null,isOutsider:typeof n.isOutsider!="undefined"?n.isOutsider:null,sex:n.sex||"",location:n.location||"",title:n.title||"",notes:n.notes||"",culture:n.cultureName||"",profileUrl:n.profileUrl||"",isLDAP:typeof n.isLDAP!="undefined"?n.isLDAP:typeof n.isldap!="undefined"?n.isldap:!1,isSSO:typeof n.isSSO!="undefined"?n.isSSO:typeof n.issso!="undefined"?n.issso:!1}}function hi(n){if(!n)return[];for(var t=null,u=[],i=at(n)?n:[n],r=0,r=i?i.length:0;r--;)t=h(i[r]),t?u.unshift(t):null;return u}var pt=!1,ai=!1,ht="",wt="",ct="",b=null,p=null,w=null,et={datetime:b,date:p,time:w},k=[],d=[],g=[],nt=[],rt={days:g,shortdays:nt,months:k,shortmonths:d},it=0,bt="",kt="",v={},dt={},gt={},f="post",u="get",y="delete",tt="put",ni=[],ti=[],ii=[],vi=[{id:-1,label:"unknown"},{id:0,label:"project"},{id:1,label:"milestone"},{id:2,label:"task"},{id:3,label:"subtask"},{id:4,label:"team"},{id:5,label:"comment"},{id:6,label:"discussion"},{id:7,label:"file"},{id:8,label:"timespend"},{id:9,label:"activity"}],yi=[{id:0,name:"DEFAULT",label:"folder-default"},{id:1,name:"COMMON",label:"folder-common"},{id:2,name:"BUNCH",label:"folder-bunch"},{id:3,name:"TRASH",label:"folder-trash"},{id:5,name:"USER",label:"folder-user"},{id:6,name:"SHARE",label:"folder-shared"}],l={mail:{name:"mail",type:0,title:"Email"},facebook:{name:"facebook",type:2,title:"FaceBook"},myspace:{name:"myspace",type:2,title:"MySpace"},livejournal:{name:"livejournal",type:2,title:"LiveJournal"},twitter:{name:"twitter",type:2,title:"twitter"},yahoo:{name:"yahoo",type:2,title:"YAHOO"},jabber:{name:"jabber",type:2,title:"Jabber"},blogger:{name:"blogger",type:2,title:"blogger"},skype:{name:"skype",type:2,title:"skype"},msn:{name:"msn",type:2,title:"msn"},aim:{name:"aim",type:2,title:"aim"},icq:{name:"icq",type:2,title:"icq"},gmail:{name:"gmail",type:0,title:"Google Mail"},gbuzz:{name:"gbuzz",type:2,title:"Google Buzz"},gtalk:{name:"gtalk",type:2,title:"Google Talk"},phone:{name:"phone",type:1,title:"Tel"},mobphone:{name:"mobphone",type:1,title:"Mobile"},extmobphone:{name:"extmobphone",type:1,title:"Mobile"},extmail:{name:"extmail",type:0,title:"Email"}},ut={phone:{id:0,title:"Phone",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},mobile:{id:2,title:"Mobile"},fax:{id:3,title:"Fax"},direct:{id:4,title:"Direct"},other:{id:5,title:"Other"}}},email:{id:1,title:"Email",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},website:{id:2,title:"Website",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},skype:{id:3,title:"Skype",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},twitter:{id:4,title:"Twitter",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},linkedin:{id:5,title:"LinkedIn",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},facebook:{id:6,title:"Facebook",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},address:{id:7,title:"Address",categories:{home:{id:0,title:"Home"},postal:{id:1,title:"Postal"},office:{id:2,title:"Office"},billing:{id:3,title:"Billing"},other:{id:4,title:"Other"},work:{id:5,title:"Work"}}},livejournal:{id:8,title:"LiveJournal",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},myspace:{id:9,title:"MySpace",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},gmail:{id:10,title:"GMail",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},blogger:{id:11,title:"Blogger",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},yahoo:{id:12,title:"Yahoo",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},msn:{id:13,title:"MSN",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},icq:{id:14,title:"ICQ",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},jabber:{id:15,title:"Jabber",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}},aim:{id:16,title:"AIM",categories:{home:{id:0,title:"Home"},work:{id:1,title:"Work"},other:{id:2,title:"Other"}}}},pi=[{name:"archive",exts:[".zip",".rar",".ace",".arc",".arj",".cab",".enc",".jar",".lha",".lzh",".pak",".pk3",".tar",".tgz",".uue",".xxe",".zoo",".bh",".gz",".ha"]},{name:"image",exts:[".bmp",".cod",".gif",".ief",".jpe",".jpg",".tif",".cmx",".ico",".pnm",".pbm",".ppm",".psd",".rgb",".xbm",".xpm",".xwd",".png",".ai",".jpeg"]},{name:"sound",exts:[".mp3",".wav",".pcm",".3gp",".fla",".cda",".ogg",".aiff",".flac"]},{name:"ebook",exts:[".fb2",".ibk",".prc",".epub"]},{name:"html",exts:[".htm",".mht",".html"]},{name:"djvu",exts:[".djvu"]},{name:"svg",exts:[".svg"]},{name:"svgt",exts:[".svgt"]},{name:"doc",exts:[".doc",".docx"]},{name:"doct",exts:[".doct"]},{name:"xls",exts:[".xls",".xlsx"]},{name:"xlst",exts:[".xlst"]},{name:"pps",exts:[".pps",".ppsx"]},{name:"ppt",exts:[".ppt",".pptx"]},{name:"pptt",exts:[".pptt"]},{name:"odp",exts:[".odp"]},{name:"ods",exts:[".ods"]},{name:"odt",exts:[".odt"]},{name:"pdf",exts:[".pdf"]},{name:"rtf",exts:[".rtf"]},{name:"txt",exts:[".txt"]},{name:"iaf",exts:[".iaf"]},{name:"csv",exts:[".csv"]},{name:"xml",exts:[".xml"]},{name:"xps",exts:[".xps"]},{name:"avi",exts:[".avi"]},{name:"flv",exts:[".flv",".fla"]},{name:"m2ts",exts:[".m2ts"]},{name:"mkv",exts:[".mkv"]},{name:"mov",exts:[".mov"]},{name:"mp4",exts:[".mp4"]},{name:"mpg",exts:[".mpg"]},{name:"vob",exts:[".vob"]}],wi={active:{id:1,name:"active"},terminated:{id:2,name:"terminated"},leaveofabsence:{id:4,name:"leaveofabsence"}},ri={notactivated:{id:0,name:"notactivated"},activated:{id:1,name:"activated"},pending:{id:2,name:"pending"}},lt={notaccept:{id:0,name:"notaccept"},open:{id:1,name:"open"},closed:{id:2,name:"closed"},disable:{id:3,name:"disable"},unclassified:{id:4,name:"unclassified"},notinmilestone:{id:5,name:"notinmilestone"}},ui={None:"0",ReadWrite:"1",Read:"2",Restrict:"3"},ft=[n("cmt-blog",/blog\.json/,f),n("cmt-blog",/blog\/[\w\d-]+\.json/),n("cmt-topic",/forum\/topic\/[\w\d-]+\.json/),n("cmt-event",/event\/[\w\d-]+\.json/),n("cmt-event",/event\.json/,f),n("cmt-bookmark",/bookmark\/[\w\d-]+\.json/),n("cmt-bookmark",/bookmark\.json/,f),n("cmt-blogs",/blog\.json/,u),n("cmt-blogs",/blog\/@search\/.+\.json/,u),n("cmt-topics",/forum\/topic\/recent\.json/),n("cmt-topics",/forum\/@search\/.+\.json/,u),n("cmt-categories",/forum\.json/),n("cmt-events",/event\.json/,u),n("cmt-events",/event\/@search\/.+\.json/,u),n("cmt-bookmarks",/bookmark\/top\/recent\.json/,u),n("cmt-bookmarks",/bookmark\/@search\/.+\.json/,u),n("prj-task",/project\/[\w\d-]+\/task\.json/,f),n("prj-task",/project\/task\/[\w\d-]+\.json/),n("prj-task",/project\/task\/[\w\d-]+\/status\.json/),n("prj-task",/project\/task\/[\w\d-]+\/copy\.json/),n("prj-task",/project\/task\/[\w\d-]+\/milestone\.json/),n("prj-tasks",/project\/[\w\d-]+\/task\.json/,u),n("prj-tasks",/project\/[\w\d-]+\/task\/@self\.json/),n("prj-tasks",/project\/[\w\d-]+\/task\/filter\.json/),n("prj-tasks",/project\/task\/filter\.json/),n("prj-tasks",/project\/task\.json\?taskid/),n("prj-tasks",/project\/task\/status\.json/),n("prj-tasks",/project\/task\/milestone\.json/),n("prj-tasks",/project\/task\.json/,y),n("prj-simpletasks",/project\/task\/filter\/simple\.json/,u),n("prj-tasks",/project\/task\/@self\.json/),n("prj-subtask",/project\/task\/[\d]+\.json/,f),n("prj-subtask",/project\/task\/[\d]+\/[\d]+\/copy\.json/),n("prj-subtask",/project\/task\/[\d]+\/[\d]+\.json/),n("prj-subtask",/project\/task\/[\d]+\/[\d]+\/status\.json/),n("prj-milestone",/project\/milestone\/[\w\d-]+\.json/),n("prj-milestone",/project\/[\w\d-]+\/milestone\.json/,f),n("prj-milestones",/project\/[\w\d-]+\/milestone\.json/,u),n("prj-milestones",/project\/milestone\/[\w\d-]+\/[\w\d-]+\/[\w\d-]+\.json/),n("prj-milestones",/project\/milestone\/[\w\d-]+\/[\w\d-]+\.json/),n("prj-milestones",/project\/milestone\/late\.json/),n("prj-milestones",/project\/milestone\.json/),n("prj-milestones",/project\/milestone\/filter\.json/),n("prj-milestone",/project\/milestone\/[\w\d-]+\/status\.json/),n("prj-discussion",/project\/message\/[\w\d-]+\.json/),n("prj-discussion",/project\/[\w\d-]+\/message\.json/,f),n("prj-discussions",/project\/message\.json/),n("prj-discussions",/project\/[\w\d-]+\/message\.json/,u),n("prj-discussions",/project\/message\/filter\.json/),n("prj-project",/project\/[\d-]+\.json/,u),n("prj-project",/project\/[\d-]+\/status\.json/,tt),n("prj-project",/project\/[\w\d-]+\/contact\.json/,f),n("prj-project",/project\/[\w\d-]+\/contact\.json/,y),n("prj-projects",/project[\/]*[@self|@follow]*\.json/),n("prj-projects",/project\/filter\.json/),n("prj-projects",/project\/contact\/[\w\d-]+\.json/),n("prj-searchentries",/project\/@search\/.+\.json/),n("prj-projectperson",/project\/[\w\d-]+\/team\.json/,f),n("prj-projectperson",/project\/[\w\d-]+\/team\.json/,y),n("prj-projectpersons",/project\/[\w\d-]+\/team\.json/,u),n("prj-timespend",/project\/time\/[\w\d-]+\.json/),n("prj-timespends",/project\/time\/filter\.json/,u),n("prj-timespends",/project\/task\/[\w\d-]+\/time\.json/,u),n("prj-activities",/project\/activities\/filter\.json/),n("prj-project",/project\.json/,f),n("doc-miss",/files\/fileops.json/),n("doc-folder",/files\/[@\w\d-]+\.json/),n("doc-folder",/files\/[\w\d-]+\/[text|html|file]+\.json/),n("doc-folder",/project\/[\w\d-]+\/files\.json/),n("doc-files",/project\/task\/[\w\d-]+\/files\.json/),n("doc-files",/project\/[\w\d-]+\/entityfiles\.json/),n("doc-files",/crm\/[\w\d-]+\/[\w\d-]+\/files\.json/,u),n("doc-file",/files\/file\/[\w\d-]+\.json/),n("doc-file",/files\/[\w\d-]+\/upload\.xml/),n("doc-file",/files\/[\w\d-]+\/upload\.json/),n("doc-session",/files\/[\w\d-]+\/upload\/create_session\.json/),n("doc-file",/crm\/files\/[\w\d-]+\.json/),n("doc-file",/crm\/[case|contact|opportunity]+\/[\w\d-]+\/files\/upload\.xml/),n("doc-file",/crm\/[case|contact|opportunity]+\/[\w\d-]+\/files\/upload\.json/),n("doc-file",/crm\/[case|contact|opportunity]+\/[\w\d-]+\/files\/text\.json/),n("doc-miss",/files\/fileops.json/),n("doc-check",/files\/docservice.json/),n("crm-addresses",/crm\/contact\/[\w\d-]+\/data\.json/,u),n("crm-address",/crm\/contact\/[\w\d-]+\/data\/[\w\d-]+\.json/),n("crm-address",/crm\/contact\/[\w\d-]+\/data\.json/,f),n("crm-address",/crm\/contact\/[\w\d-]+\/batch\.json/),n("crm-contact",/crm\/contact\/[\w\d-]+\.json/),n("crm-contact",/crm\/contact\/company\/[\w\d-]+\/type\.json/,f),n("crm-contact",/crm\/contact\/company\/[\w\d-]+\/person\.json/,f),n("crm-contact",/crm\/contact\/company\/[\w\d-]+\/person\.json/,y),n("crm-contact",/crm\/[case|opportunity]+\/[\w\d-]+\/contact\.json/,f),n("crm-contact",/crm\/[case|opportunity]+\/[\w\d-]+\/contact\/[\w\d-]+\.json/,f),n("crm-contact",/crm\/[case|opportunity]+\/[\w\d-]+\/contact\/[\w\d-]+\.json/),n("crm-contacts",/crm\/contact\/bycontactinfo\.json/,u),n("crm-contact",/crm\/contact\/merge\.json/),n("crm-socialmediaavatars",/crm\/contact\/socialmediaavatar\.json/),n("crm-tweets",/crm\/contact\/[\w\d-]+\/tweets\.json/),n("crm-twitterprofiles",/crm\/contact\/twitterprofile\.json/),n("crm-facebookprofiles",/crm\/contact\/facebookprofile\.json/),n("crm-progressitem",/crm\/contact\/mailsmtp\/send\.json/),n("crm-progressitem",/crm\/contact\/mailsmtp\/status\.json/),n("crm-progressitem",/crm\/contact\/mailsmtp\/cancel\.json/),n("crm-progressitem",/crm\/[contact|person|company|opportunity|case]+\/import\/status\.json/),n("crm-progressitem",/crm\/contact\/export\/status\.json/),n("crm-progressitem",/crm\/contact\/export\/cancel\.json/),n("crm-progressitem",/crm\/contact\/export\/start\.json/),n("crm-fileuploadresult",/crm\/import\/uploadfake\.json/),n("crm-task",/crm\/task\.json/),n("crm-task",/crm\/task\/[\w\d-]+\.json/),n("crm-task",/crm\/task\/[\w\d-]+\/close\.json/),n("crm-task",/crm\/task\/[\w\d-]+\/reopen\.json/),n("crm-opportunity",/crm\/opportunity\/[\w\d-]+\.json/),n("crm-opportunity",/crm\/opportunity\/[\w\d-]+\/stage\/[\w\d-]+\.json/),n("crm-opportunity",/crm\/contact\/[\w\d-]+\/opportunity\/[\w\d-]+\.json/),n("crm-dealmilestone",/crm\/opportunity\/stage\/[\w\d-]+\.json/),n("crm-dealmilestone",/crm\/opportunity\/stage\/[\w\d-]+\/color\.json/),n("crm-dealmilestone",/crm\/opportunity\/stage\.json/,f),n("crm-dealmilestones",/crm\/opportunity\/stage\/reorder\.json/),n("crm-dealmilestones",/crm\/opportunity\/stage\.json/,u),n("crm-contactstatus",/crm\/contact\/status\/[\w\d-]+\/color\.json/),n("crm-contactstatus",/crm\/contact\/status\/[\w\d-]+\.json/),n("crm-contactstatus",/crm\/contact\/status\.json/,f),n("crm-contactstatuses",/crm\/contact\/status\/reorder\.json/),n("crm-contactstatuses",/crm\/contact\/status\.json/,u),n("crm-contacttypekind",/crm\/contact\/type\/[\w\d-]+\.json/),n("crm-contacttypekind",/crm\/contact\/type\.json/,f),n("crm-contacttypekinds",/crm\/contact\/type\/reorder\.json/),n("crm-contacttypekinds",/crm\/contact\/type\.json/,u),n("crm-customfield",/crm\/[contact|person|company|opportunity|case]+\/customfield\/[\w\d-]+\.json/),n("crm-customfield",/crm\/[contact|person|company|opportunity|case]+\/customfield\.json/),n("crm-customfields",/crm\/[contact|person|company|opportunity|case]+\/customfield\/definitions\.json/),n("crm-customfields",/crm\/[contact|person|company|opportunity|case]+\/customfield\/reorder\.json/),n("crm-tag",/crm\/[case|contact|opportunity]+\/tag\.json/),n("crm-tag",/crm\/[case|contact|opportunity]+\/taglist\.json/),n("crm-tag",/crm\/[case|contact|opportunity]+\/[\w\d-]+\/tag\.json/),n("crm-tags",/crm\/[case|contact|opportunity]+\/tag\/unused\.json/),n("crm-tags",/crm\/[case|contact|opportunity]+\/tag\/[\w\d-]+\.json/),n("crm-fulltags",/crm\/[case|contact|opportunity]+\/tag\.json/,u),n("crm-caseitem",/crm\/case\/[\w\d-]+\/close\.json/),n("crm-caseitem",/crm\/case\/[\w\d-]+\/reopen\.json/),n("crm-cases",/crm\/cases\.json/),n("crm-cases",/crm\/case\/filter\.json/),n("crm-cases",/crm\/case\/byprefix\.json/),n("crm-contacts",/crm\/contact\.json/),n("crm-contacts",/crm\/contact\/project\/[\w\d-]+\.json/),n("crm-basecontacts",/crm\/contact\/byprefix\.json/),n("crm-contacts",/crm\/contact\/filter\.json/),n("crm-simplecontacts",/crm\/contact\/simple\/filter\.json/),n("crm-basecontacts",/crm\/contact\/mail\.json/),n("crm-contacts",/crm\/contact\/company\/[\w\d-]+\/person\.json/,u),n("crm-contacts",/crm\/[case|opportunity]+\/[\w\d-]+\/contact\.json/,u),n("crm-contacts",/crm\/contact\/access\.json/),n("crm-contacts",/crm\/contact\/[\w\d-]+\/access\.json/),n("crm-cases",/crm\/case\/access\.json/),n("crm-cases",/crm\/case\/[\w\d-]+\/access\.json/),n("crm-opportunities",/crm\/opportunity\/access\.json/),n("crm-opportunities",/crm\/opportunity\/[\w\d-]+\/access\.json/),n("crm-tasks",/crm\/task\/filter\.json/),n("crm-opportunities",/crm\/opportunity\/filter\.json/),n("crm-opportunities",/crm\/opportunity\/bycontact\/[\w\d-]+\.json/),n("crm-opportunities",/crm\/opportunity\/byprefix\.json/),n("crm-taskcategory",/crm\/task\/category\/[\w\d-]+\.json/),n("crm-taskcategory",/crm\/task\/category\/[\w\d-]+\/icon\.json/),n("crm-taskcategory",/crm\/task\/category\.json/,f),n("crm-taskcategories",/crm\/task\/category\/reorder\.json/),n("crm-taskcategories",/crm\/task\/category\.json/,u),n("crm-historyevent",/crm\/history\.json/),n("crm-historyevent",/crm\/history\/[\w\d-]+.json/),n("crm-historyevent",/crm\/[contact|opportunity|case]+\/[\w\d-]+\/files\.json/,f),n("crm-historyevents",/crm\/history\/filter\.json/),n("crm-historycategory",/crm\/history\/category\/[\w\d-]+\.json/),n("crm-historycategory",/crm\/history\/category\/[\w\d-]+\/icon\.json/),n("crm-historycategory",/crm\/history\/category\.json/,f),n("crm-historycategories",/crm\/history\/category\/reorder\.json/),n("crm-historycategories",/crm\/history\/category\.json/,u),n("crm-currency",/crm\/settings\/currency\.json/),n("crm-currencies",/crm\/settings\/currency\.json/,u),n("crm-smtpsettings",/crm\/settings\/smtp\.json/),n("crm-rootfolder",/crm\/files\/root\.json/),n("crm-tasktemplatecontainer",/crm\/[contact|person|company|opportunity|case]+\/tasktemplatecontainer\.json/),n("crm-tasktemplatecontainer",/crm\/tasktemplatecontainer\/[\w\d-]+\.json/),n("crm-tasktemplate",/crm\/tasktemplatecontainer\/[\w\d-]+\/tasktemplate\.json/),n("crm-tasktemplate",/crm\/tasktemplatecontainer\/tasktemplate\/[\w\d-]+\.json/),n("crm-invoiceline",/crm\/invoiceline\.json/),n("crm-invoiceline",/crm\/invoice\/[\w\d-]+\.json/),n("crm-invoice",/crm\/invoice\.json/,f),n("crm-invoice",/crm\/invoice\/[\w\d-]+\.json/),n("crm-invoice",/crm\/invoice\/sample\.json/),n("crm-invoice",/crm\/invoice\/sample\.json/),n("crm-invoice",/crm\/invoice\/bynumber\.json/),n("crm-invoiceJsonData",/crm\/invoice\/jsondata\/[\w\d-]+\.json/),n("crm-invoices",/crm\/invoice\.json/,y),n("crm-invoicesAndItems",/crm\/invoice\/status\/[\w\d-]+\.json/),n("crm-invoices",/crm\/invoice\/filter\.json/),n("crm-invoices",/crm\/[contact|person|company|opportunity]+\/invoicelist\/[\w\d-]+\.json/),n("crm-invoiceItem",/crm\/invoiceitem\.json/,f),n("crm-invoiceItems",/crm\/invoiceitem\.json/,y),n("crm-invoiceItems",/crm\/invoiceitem\/filter\.json/),n("crm-invoiceTax",/crm\/invoice\/tax\/[\w\d-]+\.json/),n("crm-invoiceTax",/crm\/invoice\/tax\.json/,f),n("crm-invoiceTaxes",/crm\/invoice\/tax\.json/,u),n("crm-invoiceSettings",/crm\/invoice\/settings\.json/),n("crm-invoiceSettings",/crm\/invoice\/settings\/name\.json/),n("crm-invoiceSettings",/crm\/invoice\/settings\/terms\.json/),n("doc-file",/crm\/invoice\/[\w\d-]+\/pdf\.json/),n("crm-converterData",/crm\/invoice\/converter\/data\.json/),n("crm-currencyRates",/crm\/currency\/rates\.json/,u),n("crm-currencyRate",/crm\/currency\/rates\/[\w\d-]+\.json/),n("crm-currencyRate",/crm\/currency\/rates\/\w{3}\/\w{3}\.json/,u),n("crm-currencyRate",/crm\/currency\/rates\.json/,f),n("crm-voipNumbers",/crm\/voip\/numbers\/available\.json/),n("crm-voipNumbers",/crm\/voip\/numbers\/existing\.json/),n("crm-voipNumber",/crm\/voip\/numbers\.json/,f),n("crm-voipNumber",/crm\/voip\/numbers\/current\.json/),n("crm-voipCall",/crm\/voip\/call\.json/,f),n("crm-voipCalls",/crm\/voip\/call\.json/,u),n("crm-voipCall",/crm\/voip\/call\/[\w\d-]+\.json/,u),n("crm-voipCalls",/crm\/voip\/call\/missed\.json/,u),n("authentication",/authentication\.json/),n("settings",/settings\.json/),n("security",/settings\/security\.json/),n("access",/settings\/security\/access\.json/),n("administrator",/settings\/security\/administrator\.json/),n("quotas",/settings\/quota\.json/),n("profile",/people\/[\w\d-]+\.json/),n("isme",/people\/@self\.json/),n("profiles",/people\/status\/[\w\d-]+\.json/),n("profiles",/people\/status\/[\w\d-]+\/@search\/.+\.json/),n("profiles",/people\/status\/[\w\d-]+\/search\.json/),n("profiles",/people\.json/),n("profiles",/people\/@search\/.+\.json/),n("profiles",/people\/search\.json/),n("profiles",/people\/filter\.json/),n("profiles",/people\/type\/[\w\d-]+\.json/),n("profiles",/people\/invite\.json/),n("text",/people\/password\.json/),n("text",/people\/thirdparty\/linkaccount\.json/),n("text",/people\/thirdparty\/unlinkaccount\.json/),n("group",/group\/[\w\d-]+\.json/),n("groups",/group\.json/),n("crm-tasks",/crm\/contact\/task\/group\.json/),n("crm-tag",/crm\/[company|person]+\/[\w\d-]+\/tag\/group\.json/),n("crm-voipNumber",/crm\/voip\/numbers\/[\w]+\/settings.json/,tt),n("crm-voipSettings",/crm\/voip\/numbers\/settings.json/),n("comment",/comment\.json/,f),n("comments",/comment\.json/,u),n("prj-settings",/project\/settings\.json/),n("text",/project\/comment\/[\w\d-]+\.json/,y),n("text",/community\/wiki\/comment\/[\w\d-]+\.json/,y),n("text",/community\/event\/comment\/[\w\d-]+\.json/,y),n("text",/community\/bookmark\/comment\/[\w\d-]+\.json/,y),n("text",/community\/blog\/comment\/[\w\d-]+\.json/,y),n("text",/project\/comment\/[\w\d-]+\.json/,tt),n("text",/community\/wiki\/comment\/[\w\d-]+\.json/,tt),n("text",/community\/event\/comment\/[\w\d-]+\.json/,tt),n("text",/community\/bookmark\/comment\/[\w\d-]+\.json/,tt),n("text",/community\/blog\/comment\/[\w\d-]+\.json/,tt),n("text",/project\/message\/discussion\/preview\.json/),n("commentinlist",/project\/message\/preview\.json/),n("commentinlist",/community\/wiki\/comment\/preview\.json/),n("commentinlist",/community\/event\/comment\/preview\.json/),n("commentinlist",/community\/bookmark\/comment\/preview\.json/),n("commentinlist",/community\/blog\/comment\/preview\.json/),n("commentinlist",/project\/comment\.json/,f),n("commentinlist",/community\/wiki\/comment\.json/,f),n("commentinlist",/community\/event\/comment\.json/,f),n("commentinlist",/community\/bookmark\/comment\.json/,f),n("commentinlist",/community\/blog\/comment\.json/,f),n("feed-feeds",/feed\/filter\.json/),n("text",/crm\/[contact|opportunity|case|relationshipevent]+\/[\w\d-]+\/files\/hidden\.json/)],ir=function(n){var r,f,t,o,e,i;if(pt===!0)return undefined;if(pt=!0,n=n||{},n.hasOwnProperty("portaldatetime")&&n.portaldatetime&&typeof n.portaldatetime=="object"&&(it=n.portaldatetime.hasOwnProperty("utcoffsettotalminutes")?n.portaldatetime.utcoffsettotalminutes:it,bt=it!=0?(it>0?"+":"-")+a(Math.floor(Math.abs(it)/60))+":"+a(Math.abs(it)%60):bt,kt=n.portaldatetime.hasOwnProperty("displayname")?n.portaldatetime.displayname:kt),n.hasOwnProperty("names")&&n.names&&typeof n.names=="object"&&(k=n.names.hasOwnProperty("months")?typeof n.names.months=="object"?n.names.months:n.names.months.split(","):k,d=n.names.hasOwnProperty("shortmonths")?typeof n.names.shortmonths=="object"?n.names.shortmonths:n.names.shortmonths.split(","):d,g=n.names.hasOwnProperty("days")?typeof n.names.days=="object"?n.names.days:n.names.days.split(","):g,nt=n.names.hasOwnProperty("shortdays")?typeof n.names.shortdays=="object"?n.names.shortdays:n.names.shortdays.split(","):nt,rt.days=g,rt.shortdays=nt,rt.months=k,rt.shortmonths=d),n.hasOwnProperty("avatars")&&n.avatars&&typeof n.avatars=="object"&&(ht=n.avatars.hasOwnProperty("large")?n.avatars.large:ht,wt=n.avatars.hasOwnProperty("medium")?n.avatars.medium:wt,ct=n.avatars.hasOwnProperty("small")?n.avatars.small:ct),n.hasOwnProperty("formats")&&n.formats&&typeof n.formats=="object"&&(b=n.formats.hasOwnProperty("datetime")?n.formats.datetime:b,p=n.formats.hasOwnProperty("date")?n.formats.date:p,w=n.formats.hasOwnProperty("time")?n.formats.time:w,w&&p&&(b=w+" "+p),et.datetime=b,et.date=p,et.time=w),n.hasOwnProperty("supportedfiles")&&n.supportedfiles&&typeof n.supportedfiles=="object"&&(r=n.supportedfiles.hasOwnProperty("imgs")?n.supportedfiles.imgs||[]:[],ni=r&&typeof r=="string"?r.split("|"):[],f=n.supportedfiles.hasOwnProperty("docs")?n.supportedfiles.docs||[]:[],ti=f&&typeof f=="string"?f.split("|"):[],ii=[].concat(ni,ti)),n.hasOwnProperty("responses")&&n.responses&&typeof n.responses=="object"){t=null;o=n.responses;for(i in o)t=o[i],t&&(typeof t=="object"||typeof t=="string")&&(t=bi(t),t&&(t=t.hasOwnProperty("response")?t.response:t,yt(i,u,t)))}if(n.hasOwnProperty("contacttitles")&&n.contacttitles&&typeof n.contacttitles=="object"){e=n.contacttitles;for(i in e)e.hasOwnProperty(i)&&l.hasOwnProperty(i)&&(l[i].title=e[i])}},rr=function(n){var t,i;if(!n||typeof n!="object")return n;t=null;for(i in n)if(n.hasOwnProperty(i)){t=n[i];switch(typeof t){case"string":switch(i.toLowerCase()){case"infotype":ut.hasOwnProperty(t)&&(n.hasOwnProperty("category")&&typeof n.category=="string"&&ut[t].categories.hasOwnProperty(n.category)&&(n.category=ut[t].categories[n.category].id),t=ut[t].id)}}n[i]=t}return n},r=function(){return!1&&new Date(Date.parse("1970-01-01T00:00:00.000Z")).getTime()===new Date(Date.parse("1970-01-01T00:00:00.000Z")).getTime()?function(n,t){if(!n)return null;var i=null,r=n&&typeof n=="object"&&n.hasOwnProperty("utc")&&n.utc||n,u=n&&typeof n=="object"&&n.hasOwnProperty("offset")&&isFinite(+n.offset)&&+n.offset||0;return typeof r!="string"?null:(i=new Date(Date.parse(r)),t!==!0&&i instanceof Date&&i.setMinutes(i.getMinutes()-(new Date).getTimezoneOffset()),i instanceof Date?i:null)}:function(n,t){if(!n)return null;var i=null,r=n&&typeof n=="object"&&n.hasOwnProperty("utc")&&n.utc||n,u=n&&typeof n=="object"&&n.hasOwnProperty("offset")&&isFinite(+n.offset)&&+n.offset||0;return typeof r!="string"?null:(u=0,r.indexOf("Z")===-1&&(u=r.substring(r.length-5).split(":"),u=(+u[0]*60+ +u[1])*(r.charAt(r.length-6,1)==="+"?1:-1)),i=r.split(".")[0].split("T"),i[0]=i[0].split("-"),i[1]=i[1].split(":"),typeof t!="undefined"&&t!==!0?i=new Date(i[0][0],i[0][1]-1,i[0][2],i[1][0],i[1][1],i[1][2],0):(i=new Date(Date.UTC(+i[0][0],+i[0][1]-1,+i[0][2],+i[1][0],+i[1][1],+i[1][2],0)),i.setMinutes(i.getMinutes()+i.getTimezoneOffset())),t!==!0&&i instanceof Date,i instanceof Date?i:null)}}(),ur=function(n,t){var i=n instanceof Date?""+[n.getFullYear(),a(n.getMonth()+1),a(n.getDate())].join("-")+"T"+[a(n.getHours()),a(n.getMinutes()),a(n.getSeconds())].join(":"):"";return t===!0?i.replace(/:/g,"-"):i},ot=function(n,t,i,r,u,f){var e,c;if(!(n instanceof Date)||n.getTime()<0||typeof t!="string"||t.length===0)return"";var s="",o="",h=!1;for(t=t.split(""),e=0,c=t.length;e<c;e++){h=!1;switch(t[e]){case"d":case"h":case"H":case"m":case"M":case"s":case"t":case"y":o+=t[e];break;default:h=!0}h&&(s+=si(n,o,i,r,u,f),s+=t[e],o="")}return o&&(s+=si(n,o,i,r,u,f)),s},c=function(n){return n&&w?ot(n,w,nt,g,d,k):n?n.toLocaleTimeString():""},o=function(n){return n&&p?ot(n,p,nt,g,d,k):n?n.toLocaleDateString():""},e=function(n){return n&&b?ot(n,b,nt,g,d,k):n?n.toLocaleTimeString()+" "+n.toLocaleDateString():""},er=function(n){if(n.length===0)return n;for(var t=ei(n),u=null,i=0,r=0,i=t?t.length:0;i--;)if(u=t[i].parentId,t[i].comments||(t[i].comments=[]),u!==null)for(r=t.length;r--;)if(t[r].id==u){t[r].comments||(t[r].comments=[]);t[r].comments.unshift(t[i]);break}for(i=t?t.length:0;i--;)t[i].parentId!==null&&t.splice(i,1);return t?t:n},ci=function(n){var t=r(n.created),i;return uptdate=r(n.updated),createdBy=h(n.createdBy),i={type:"comment",id:n.id,inactive:n.hasOwnProperty("inactive")?n.inactive:!1,parentId:n.parentId==="00000000-0000-0000-0000-000000000000"?null:n.parentId||null,timestamp:t?t.getTime():0,crtdate:t,displayCrtdate:e(t),displayDateCrtdate:o(t),displayTimeCrtdate:c(t),displayDatetimeCrtdate:e(t),uptdate:uptdate,displayUptdate:e(uptdate),displayDateUptdate:o(uptdate),displayTimeUptdate:c(uptdate),displayDatetimeUptdate:e(uptdate),createdBy:createdBy,updatedBy:h(n.updatedBy||n.createdBy),isMine:v&&createdBy&&v.id==createdBy.id||!1,comments:[],text:n.text||""},n.hasOwnProperty("canEdit")&&(i.canEdit=n.canEdit),i},li=function(n){for(var r=[],t=at(n)?n:[n],i=0,i=t?t.length:0;i--;)r.unshift(ci(t[i]));return er(r)},or=function(n){if(!n)return null;for(var f=0,u=0,t=0,e=[],i=n.votes,r=0,r=i?i.length:0;r--;)t=i[r].votes,u+=t,f<t&&(f=t);for(r=i?i.length:0;r--;)t=i[r].votes,e.unshift({title:i[r].name,count:t,percent:u!==0?Math.round(t*100/u):0,leader:f===t});return{votes:e,voted:n.voted,fullCount:u}},t={storageusage:function(n){return n},text:function(n){return n},authentication:function(n){return{token:n.token}},isme:function(n){var t=h(n);for(var i in t)t.hasOwnProperty(i)&&(v[i]=t[i]);return v.isMe=!0,v},profile:function(n){return h(n)},profiles:function(n){return i(n,h,function(){return{}})},group:function(n){return st(n)},groups:function(n){return i(n,st,function(){return{}})},settings:function(n){return dt={type:"settings",culture:n.culture,timezone:n.timezone,trustedDomains:n.trustedDomains,trustedDomainsType:n.trustedDomainsType,utcHoursOffset:n.utcHoursOffset,utcOffset:n.utcOffset}},quotas:function(n){return gt={type:"quotas",storageSize:n.storageSize,maxFileSize:n.maxFileSize,usedSize:n.usedSize,availableSize:n.availableSize,storageUsage:t.storageusage(n.storageUsage),maxUsersCount:n.maxUsersCount,usersCount:n.usersCount,availableUsersCount:n.availableUsersCount}},comment:function(n){return ci(n)},comments:function(n){return li(n)},commentinlist:function(n){return n},searchentryitems:function(n){return i(n,null,function(n){var i=nr(n.entityType);switch(i){case"file":return t.doc.file(n);case"task":case"subtask":return t.prj.subtask(n);case"discussion":return t.prj.discussion(n);case"milestone":return t.prj.milestone(n);default:return{type:i}}})}},yt;return t.cmt={item:function(n){var t=r(n.created),i=r(n.updated);return{id:n.id,timestamp:t?t.getTime():0,crtdate:t,displayCrtdate:e(t),displayDateCrtdate:o(t),displayTimeCrtdate:c(t),displayDatetimeCrtdate:e(t),uptdate:i,displayUptdate:e(i),displayDateUptdate:o(i),displayTimeUptdate:c(i),displayDatetimeUptdate:e(i),createdBy:h(n.createdBy||n.author),updatedBy:h(n.updatedBy||n.createdBy||n.author),title:n.title||"",text:n.preview||n.text||n.description||""}},tags:function(n){return n||[]},blog:function(n){return s(this.item(n),{type:"blog",tags:t.cmt.tags(n.tags),comments:null})},poll:function(n){return s(this.item(n),{type:"poll"})},topic:function(n){var i=null;return n.posts&&n.posts.length>0&&(i=n.posts[0],n.createdBy=i.createdBy,n.text=i.text,n.posts=n.posts.slice(1)),s(this.item(n),{type:"forum",typeCode:n.type,statusCode:n.status,tags:t.cmt.tags(n.tags),threadTitle:n.threadTitle||n.threadTitile,posts:li(n.posts||[])})},thread:function(n){return s(this.item(n),{type:"thread"})},category:function(n){return s(this.item(n),{type:"category",threads:t.cmt.threads(n.threads)})},event:function(n){var t=this.item(n);return s(t,{type:"event",typeCode:n.type,poll:or(n.poll),comments:null})},bookmark:function(n){return s(this.item(n),{type:"bookmark",url:n.url,thumbnail:n.thumbnail,comments:null})},blogs:function(n){return i(n,this.item,function(n){return t.cmt.blog(n)})},polls:function(n){return i(n,this.item,function(n){return t.cmt.poll(n)})},topics:function(n){return i(n,this.item,function(n){return t.cmt.topic(n)})},threads:function(n){return i(n,this.item,function(n){return t.cmt.thread(n)})},categories:function(n){return n=n.hasOwnProperty("categories")?n.categories:n,i(n,this.item,function(n){return t.cmt.category(n)})},events:function(n){return i(n,this.item,function(n){return t.cmt.event(n)})},bookmarks:function(n){return i(n,this.item,function(n){return t.cmt.bookmark(n)})}},t.prj={item:function(n){var u,t,c,f=[],i,s;return u=typeof n.createdBy=="object"?h(n.createdBy):typeof n.createdById=="string"?UserManager.getPerson(n.createdById,h):h(n.author),typeof n.updatedBy=="object"?c=h(n.updatedBy):typeof n.updatedById=="string"&&(c=UserManager.getPerson(n.updatedById,h)),typeof n.responsible=="object"?t=h(n.responsible):typeof n.responsibleId=="string"&&(t=UserManager.getPerson(n.responsibleId,h)),n.responsibles?f=hi(n.responsibles||n.responsible):n.responsibleIds&&(f=n.responsibleIds.map(function(n){return UserManager.getPerson(n,h)})),i=r(n.created),s=r(n.updated),{id:n.id,timestamp:i?i.getTime():0,crtdate:i,displayDateCrtdate:o(i),uptdate:s,displayUptdate:e(s),displayDateUptdate:o(s),createdBy:u,updatedBy:c,responsible:t||f[0],responsibles:f,canEdit:n.canEdit||!1,isPrivate:n.isPrivate||!1,isShared:n.isShared||!1,isMy:u&&v?u.id===v.id:!1,forMe:t&&v?t.id===v.id:!1,title:n.title||"",lowTitle:(n.title||"").toLowerCase(),description:n.description||"",status:n.status}},task:function(n){var i=r(n.deadline,!1),f=r(n.startDate,!1),u=new Date,l=u.getFullYear(),a=u.getMonth(),v=u.getDate(),y,h;return u=new Date(l,a,v,0,0,0,0),y=new Date(l,a,v+1,0,0,0,0),h=n.hasOwnProperty("projectOwner"),s(this.item(n),{type:"task",projectId:h?n.projectOwner.id:-1,projectTitle:h?n.projectOwner.title:"",projectOwner:n.projectOwner,canCreateSubtask:n.canCreateSubtask,canCreateTimeSpend:n.canCreateTimeSpend,canReadFiles:n.canReadFiles,canEditFiles:n.canEditFiles,canDelete:n.canDelete,deadline:i,displayDeadline:e(i),displayDateDeadline:o(i),displayTimeDeadline:c(i),startDate:f,displayStartDate:e(f),displayDateStart:o(f),displayTimeStart:c(f),status:n.status>2?1:n.status,statusname:oi(n.status>2?1:n.status),priority:n.priority,subtasks:t.prj.subtasks(n.subtasks),progress:n.hasOwnProperty("progress")?n.progress:0,milestoneId:n.milestoneId,milestoneTitle:n.hasOwnProperty("milestone")&&n.milestone?n.milestone.title:"",milestone:n.hasOwnProperty("milestone")?t.prj.milestone(n.milestone):null,deadlineToday:i?i.getTime()>=u.getTime()&&i.getTime()<y.getTime():!1,isOpened:n.status==lt.open.id,isExpired:n.isExpired||!1,links:n.hasOwnProperty("links")?t.prj.links(n.links):[],files:n.files,commentsCount:n.commentsCount,isSubscribed:n.isSubscribed,project:n.project,timeSpend:n.timeSpend,comments:n.comments?n.comments:[],canCreateComment:n.canCreateComment})},simpletask:function(n){var i=r(n.deadline,!1),f=r(n.startDate,!1),u=new Date,h=u.getFullYear(),c=u.getMonth(),l=u.getDate(),a;return u=new Date(h,c,l,0,0,0,0),a=new Date(h,c,l+1,0,0,0,0),s(this.item(n),{type:"task",projectOwner:n.projectOwner,canCreateSubtask:n.canCreateSubtask,canCreateTimeSpend:n.canCreateTimeSpend,canDelete:n.canDelete,createdBy:n.createdBy,updatedBy:n.updatedBy,deadline:i,displayDeadline:e(i),displayDateDeadline:o(i),startDate:f,displayStartDate:e(f),displayDateStart:o(f),responsibles:n.responsibles,status:n.status>2?1:n.status,statusname:oi(n.status>2?1:n.status),priority:n.priority,subtasksCount:n.subtasksCount,progress:n.hasOwnProperty("progress")?n.progress:0,milestoneId:n.milestoneId,deadlineToday:i?i.getTime()>=u.getTime()&&i.getTime()<a.getTime():!1,isOpened:n.status==lt.open.id,isExpired:n.isExpired||!1,links:n.hasOwnProperty("links")?t.prj.links(n.links):null})},milestone:function(n){var t=r(n.deadline,!1),i=new Date,u=i.getFullYear(),f=i.getMonth(),h=i.getDate(),l;return i=new Date(u,f,h,0,0,0,0),l=new Date(u,f,h+1,0,0,0,0),s(this.item(n),{type:"milestone",projectId:n.hasOwnProperty("projectOwner")?n.projectOwner.id:-1,projectTitle:n.hasOwnProperty("projectOwner")?n.projectOwner.title:"",deadline:t,displayDeadline:e(t),displayDateDeadline:o(t),displayTimeDeadline:c(t),status:n.status,deadlineToday:t?t.getTime()>=i.getTime()&&t.getTime()<l.getTime():!1,isKey:n.isKey,isNotify:n.isNotify,isExpired:n.isExpired||!1,activeTaskCount:n.activeTaskCount,closedTaskCount:n.closedTaskCount,canDelete:n.canDelete})},discussion:function(n){var t=r(n.created);return s(this.item(n),{type:"discussion",projectId:n.hasOwnProperty("projectOwner")?n.projectOwner.id:-1,projectTitle:n.hasOwnProperty("projectOwner")?n.projectOwner.title:"",projectOwner:n.projectOwner,parentId:null,comments:n.comments?n.comments:[],text:n.text||"",status:n.status,displayTimeCrtdate:c(t),displayDateTimeCrtdate:e(t),canReadFiles:n.canReadFiles,canEditFiles:n.canEditFiles,canCreateComment:n.canCreateComment,commentsCount:n.commentsCount,subscribers:n.subscribers,files:n.files,project:n.project})},project:function(n){var i,t;return typeof n.createdBy=="object"?i=h(n.createdBy):typeof n.createdById=="string"&&(i=UserManager.getPerson(n.createdById,h)),typeof n.responsible=="object"?t=h(n.responsible):typeof n.responsibleId=="string"&&(t=UserManager.getPerson(n.responsibleId,h)),{id:n.id,title:n.title||"",description:n.description||"",status:n.status,canCreateMessage:n.hasOwnProperty("security")?n.security.canCreateMessage:"",canCreateMilestone:n.hasOwnProperty("security")?n.security.canCreateMilestone:"",canCreateTask:n.hasOwnProperty("security")?n.security.canCreateTask:"",canCreateTimeSpend:n.hasOwnProperty("security")?n.security.canCreateTimeSpend:"",canEditTeam:n.hasOwnProperty("security")?n.security.canEditTeam:"",security:n.security,isPrivate:n.isPrivate||!1,isInTeam:n.hasOwnProperty("security")?n.security.isInTeam:"",canLinkContact:n.hasOwnProperty("security")?n.security.canLinkContact:null,displayDateCrtdate:o(r(n.created)),taskCount:n.taskCount,taskCountTotal:n.taskCountTotal,milestoneCount:n.milestoneCount,participantCount:n.participantCount,discussionCount:n.discussionCount,documentsCount:n.documentsCount,responsibleId:t!=null&&t.id?t.id:t,canEdit:n.canEdit||!1,canDelete:n.canDelete,createdBy:i,responsible:t,timeTrackingTotal:n.timeTrackingTotal,isFollow:n.isFollow,tags:n.hasOwnProperty("tags")?n.tags:[]}},link:function(n){return{type:"link",parentTaskId:n.parentTaskId,dependenceTaskId:n.dependenceTaskId,linkType:n.linkType}},projectrequest:function(n){return s(this.item(n),{type:"request"})},activity:function(n){var t=new Date(n.date);return s(this.item(n),{type:"activity",projectId:n.projectId,projectTitle:n.projectTitle,title:n.title,url:n.url,actionText:n.actionText,displayDatetime:e(t),displayDate:o(t),displayTime:c(t),user:n.user,entityType:n.entityType,entityTitle:n.entityTitle})},subtask:function(n){return s(this.item(n),{type:"subtask",status:n.status,taskid:n.taskId})},subtasks:function(n){return i(n,this.item,function(n){return t.prj.subtask(n)})},tasks:function(n){return i(n,this.item,function(n){return t.prj.task(n)})},simpletasks:function(n){return i(n,this.item,function(n){return t.prj.simpletask(n)})},milestones:function(n){return i(n,this.item,function(n){return t.prj.milestone(n)})},discussions:function(n){return i(n,this.item,function(n){return t.prj.discussion(n)})},projects:function(n){var i=function(n){return t.prj.project(n)};return n.map(i)},links:function(n){return i(n,null,function(n){return t.prj.link(n)})},projectperson:function(n){var t=h(n);return t.canReadFiles=n.canReadFiles,t.canReadMessages=n.canReadMessages,t.canReadMilestones=n.canReadMilestones,t.canReadTasks=n.canReadTasks,t.canReadContacts=n.canReadContacts,t.isAdministrator=n.isAdministrator,t.isManager=n.isManager,t.department=n.department||"",t},projectpersons:function(n){for(var r=[],i=0;i<n.length;i++)r.push(t.prj.projectperson(n[i]));return r},searchentries:function(n){return i(n,this.item,function(n){var i=n.projectOwner;return{id:i?i.id:n.id||-1,type:"project",title:i?i.title:n.title||"",status:i?i.status:n.status||"",items:n.items?t.searchentryitems(n.items):[]}})},timespend:function(n){var i=r(n.date),u=r(n.statusChanged);return s(this.item(n),{type:"timespend",date:i,displayCreationDate:e(i),displayDateCreation:o(i),displayTimeCreation:c(i),hours:n.hours,note:n.note,paymentStatus:n.paymentStatus,statusChanged:o(u),canEditPaymentStatus:n.canEditPaymentStatus,relatedProject:n.relatedProject,relatedTask:n.relatedTask,relatedTaskTitle:n.relatedTaskTitle,task:t.prj.task(n.task),person:n.hasOwnProperty("person")?h(n.person):""})},timespends:function(n){return i(n,this.item,function(n){return t.prj.timespend(n)})},activities:function(n){return i(n,this.item,function(n){return t.prj.activity(n)})},settings:function(n){return n}},t.feed={item:function(n){function f(n){var i,t;if(!n)return null;for(i=[],t=0;t<n.length;t++)i.push(s(n[t]));return i}function s(n){var u=n.Date.slice(0,-1)+".0+"+ASC.Resources.Master.CurrentTenantUtcOffset,t=r(u),i=parseInt(ASC.Resources.Master.CurrentTenantUtcHoursOffset),f=parseInt(ASC.Resources.Master.CurrentTenantUtcMinutesOffset);return isNaN(i)||(t.setHours(t.getHours()+i),t.setMinutes(t.getMinutes()+f)),{id:n.Id,description:n.Description,authorId:n.AuthorId,date:t,formattedDate:e(t)}}var t=r(n.CreatedDate),i=r(n.ModifiedDate),u=r(n.AggregatedDate);return{item:n.Item,itemId:n.ItemId,itemUrl:n.ItemUrl,id:n.Id,authorId:n.AuthorId,createdDate:t,displayCreatedDatetime:e(t),displayCreatedDate:o(t),displayCreatedTime:c(t),modifiedDate:i,displayModifiedDatetime:e(i),displayModifiedDate:o(i),displayModifiedTime:c(i),aggregatedDate:u,product:n.Product,module:n.Module,action:n.Action,title:n.Title,isToday:n.IsToday,isYesterday:n.IsYesterday,description:n.Description,extraLocation:n.ExtraLocation,extraLocationUrl:n.ExtraLocationUrl,additionalInfo:n.AdditionalInfo,additionalInfo2:n.AdditionalInfo2,additionalInfo3:n.AdditionalInfo3,additionalInfo4:n.AdditionalInfo4,hasPreview:n.HasPreview,canComment:n.CanComment,commentApiUrl:n.CommentApiUrl,groupedFeeds:n.GroupedFeeds,comments:f(n.Comments)}},feeds:function(n){function c(n){var t=jq.parseJSON(n.feed);return t.IsToday=n.isToday,t.IsYesterday=n.isYesterday,t.LastModifiedBy=n.lastModifiedBy,t.CreatedDate=n.createdDate,t.ModifiedDate=n.modifiedDate,t.AggregatedDate=n.aggregatedDate,t}for(var u,f,e,h,o=[],s=0;s<n.feeds.length;s++){for(u=n.feeds[s],f=c(u),f.GroupedFeeds=[],e=0;e<u.groupedFeeds.length;e++)f.GroupedFeeds.push(c(u.groupedFeeds[e]));o=o.concat(f)}return h=i(o,this.item,function(n){return t.feed.item(n)}),{feeds:h,readedDate:r(n.readedDate)}}},t.doc={miss:function(n){return n},item:function(n){var t=r(n.created),i=r(n.updated);return{id:n.id,parentId:n.parentId||n.folderId||-1,folderId:n.folderId||n.parentId||-1,access:n.access,sharedByMe:n.sharedByMe,rootFolderType:n.rootFolderType,rootType:gi(n.rootFolderType),timestamp:t?t.getTime():0,crtdate:t,displayCrtdate:e(t),displayDateCrtdate:o(t),displayTimeCrtdate:c(t),uptdate:i,displayUptdate:e(i),displayDateUptdate:o(i),displayTimeUptdate:c(i),createdBy:h(n.createdBy||n.author),updatedBy:h(n.updatedBy),canEdit:n.canEdit||!1,title:n.title||"",description:n.description||""}},rootFolder:function(n){if(!n||n.length<=1)return null;var t=n[0]||{};return{type:"folder",id:t.key,title:t.path}},parentFolder:function(n){if(!n||n.length<=1)return null;var t=n[n.length-2]||null;return t?{type:"folder",id:t.key,title:t.path,path:t.path}:null},files:function(n){return i(n,this.item,function(n){return t.doc.file(n)})},folders:function(n){return i(n,this.item,function(n){return t.doc.folder(n)})},file:function(n){var t=n.title?n.title:"",i=t.substring(0,t.lastIndexOf(".")),r;return i=i?i:n.title,r=(t.substring(t.lastIndexOf("."))||"").toLowerCase(),s(this.item(n),{type:"file",extension:r,filename:i,filetype:ki(r),version:n.version,versionGroup:n.versionGroup,fileStatus:n.fileStatus,contentLength:n.contentLength,pureContentLength:n.pureContentLength,webUrl:vt(n.webUrl||""),viewUrl:vt(n.viewUrl||""),fileUrl:vt(n.fileUrl||""),isSupported:di(r),isUploaded:!1})},folder:function(n){var u=n.hasOwnProperty("__filenames")?n.__filenames:null,h=t.doc.folders(n.folders),i=t.doc.files(n.files),f=n.pathParts,n=n.current||n;if(u)for(var r=0,e="",o=u.length;o--;)for(e=u[o],r=i.length;r--;)i[r].title===e&&(i[r].isUploaded=!0);return s(this.item(n),{type:"folder",folders:h,files:i,pathParts:f,filesCount:n.filesCount,foldersCount:n.foldersCount,isShareable:n.isShareable||!1,canAddItems:n.access==ui.None||n.access==ui.ReadWrite,rootFolder:t.doc.rootFolder(f),parentFolder:t.doc.parentFolder(f)})},session:function(n){return n}},t.crm={item:function(n){var t=r(n.created),i=r(n.updated),u=r(n.expected||n.expectedCloseDate);return{id:n.id,timestamp:t?t.getTime():0,crtdate:t,displayCrtdate:e(t),displayDateCrtdate:o(t),displayTimeCrtdate:c(t),uptdate:i,displayUptdate:e(i),displayDateUptdate:o(i),displayTimeUptdate:c(i),expdate:u,displayExpdate:e(u),displayDateExpdate:o(u),displayTimeExpdate:c(u),createdBy:h(n.createdBy||n.createBy||n.author),updatedBy:h(n.updatedBy),responsible:h(n.responsible),title:n.title||"",description:n.description||""}},bidCurrency:function(n){return n},customfield:function(n){return n},dealmilestone:function(n){return n},category:function(n){return n},contactstatus:function(n){return n},contacttypekind:function(n){return n},historycategory:function(n){return n},entity:function(n){return n},company:function(n){return n},address:function(n){var r=["Home","Postal","Office","Billing","Other","Work"],u=["Phone","Email","Website","Skype","Twitter","LinkedIn","Facebook","Address","LiveJournal","MySpace","GMail","Blogger","Yahoo","MSN","ICQ","Jabber","AIM"],t=n.category,i=n.infoType;return{id:n.id,infoType:i,infoTypeName:isFinite(+i)&&+i>=0&&+i<u.length?u[+i]:i,category:t,categoryName:isFinite(+t)&&+t>=0&&+t<r.length?r[+t]:t,data:n.data,isPrimary:n.isPrimary}},addresses:function(n){return i(n,this.address,function(n){return t.crm.address(n)})},contactbase:function(n){return s(this.item(n),{type:"contactbase",displayName:n.displayName,isCompany:n.isCompany,isPrivate:n.isPrivate,isShared:n.isShared,shareType:n.shareType,smallFotoUrl:n.smallFotoUrl,mediumFotoUrl:n.mediumFotoUrl,company:n.company?t.crm.company(n.company):null,email:n.email?n.email:null,currency:n.currency?t.crm.currency(n.currency):null,canEdit:n.canEdit,canDelete:n.canDelete})},contact:function(n){return s(this.item(n),{type:"contact",contactclass:n.firstName?"person":"company",displayName:n.displayName,firstName:n.firstName,lastName:n.lastName,isCompany:n.isCompany,isPrivate:n.isPrivate,isShared:n.isShared,shareType:n.shareType,smallFotoUrl:n.smallFotoUrl,mediumFotoUrl:n.mediumFotoUrl,company:n.company?t.crm.company(n.company):null,personsCount:n.personsCount,customFields:t.crm.customfields(n.customFields),about:n.about,industry:n.industry,currency:n.currency?t.crm.currency(n.currency):null,accessList:n.accessList,addresses:n.addresses,commonData:n.commonData,haveLateTasks:n.haveLateTasks||!1,taskCount:n.taskCount,contactStatus:n.contactStatus,canEdit:n.canEdit,canDelete:n.canDelete,tags:n.tags})},simplecontact:function(n){return s(this.item(n),{type:"contact",contactclass:n.firstName?"person":"company",displayName:n.displayName,firstName:n.firstName,lastName:n.lastName,isCompany:n.isCompany,isPrivate:n.isPrivate,isShared:n.isShared,shareType:n.shareType,smallFotoUrl:n.smallFotoUrl,mediumFotoUrl:n.mediumFotoUrl,company:n.company?t.crm.company(n.company):null,personsCount:n.personsCount,customFields:t.crm.customfields(n.customFields),about:n.about,industry:n.industry,accessList:n.accessList,addresses:n.addresses,commonData:n.commonData,haveLateTasks:n.haveLateTasks||!1,taskCount:n.taskCount,contactStatus:n.contactStatus,currency:n.currency?t.crm.currency(n.currency):null,canEdit:n.canEdit,canDelete:n.canDelete,tags:n.tags,nearTask:n.nearTask||null})},basecontact:function(n){return s(this.item(n),{type:"contact",contactclass:n.isCompany?"company":"person",displayName:n.displayName,email:n.email,phone:n.phone,isCompany:n.isCompany,currency:n.currency?t.crm.currency(n.currency):null,isPrivate:n.isPrivate,isShared:n.isShared,shareType:n.shareType,accessList:n.accessList,smallFotoUrl:n.smallFotoUrl,mediumFotoUrl:n.mediumFotoUrl,canEdit:n.canEdit,canDelete:n.canDelete})},socialmediaavatar:function(n){return{type:"socialmediaavatar",socialNetwork:n.socialNetwork,imageUrl:n.imageUrl,identity:n.identity}},socialmediaavatars:function(n){return i(n,null,function(n){return t.crm.socialmediaavatar(n)})},tweet:function(n){var t=r(n.postedOn);return{type:"tweet",userImageUrl:n.userImageUrl,userName:n.userName,text:n.text,postedOn:t,postedOnDisplay:e(t),source:n.source}},tweets:function(n){return i(n,null,function(n){return t.crm.tweet(n)})},twitterprofile:function(n){var t=r(n.postedOn);return{type:"twitterprofile",userID:n.userID,screenName:n.screenName,userName:n.userName,smallImageUrl:n.smallImageUrl,description:n.description}},twitterprofiles:function(n){return i(n,null,function(n){return t.crm.twitterprofile(n)})},facebookprofile:function(n){var t=r(n.postedOn);return{type:"facebookprofile",userID:n.userID,userName:n.userName,smallImageUrl:n.smallImageUrl}},facebookprofiles:function(n){return i(n,null,function(n){return t.crm.facebookprofile(n)})},progressitem:function(n){return n},fileuploadresult:function(n){return n},file:function(n){return s(this.item(n),{type:"file",title:n.title,folderId:n.folderId,version:n.version,fileStatus:n.fileStatus,contentLength:n.contentLength,pureContentLength:n.pureContentLength,viewUrl:n.viewUrl,webUrl:n.webUrl,access:n.access,sharedByMe:n.sharedByMe,rootFolderType:n.rootFolderType,createdDate:r(n.created)})},files:function(n){return i(n,this.item,function(n){return t.crm.file(n)})},tag:function(n){return n},task:function(n){var i=r(n.deadLine),u=i&&i.getHours()==0&&i.getMinutes()==0&&i.getSeconds()==0?o(i):e(i);return s(this.item(n),{type:"task",category:t.crm.category(n.category),canEdit:n.canEdit,canWork:n.canWork,contact:n.contact?t.crm.contactbase(n.contact):null,deadLine:i,deadLineString:u,entity:n.entity?t.crm.entity(n.entity):null,isClosed:n.isClosed,alertValue:typeof n.alertValue!="undefined"?n.alertValue:0})},opportunity:function(n){var i=r(n.expectedCloseDate),u=r(n.actualCloseDate);return s(this.item(n),{type:"opportunity",accessList:n.accessList,actualCloseDate:u,actualCloseDateString:o(u),bidCurrency:t.crm.bidCurrency(n.bidCurrency),bidType:n.bidType,bidValue:n.bidValue,contact:n.contact?t.crm.contact(n.contact):null,customFields:t.crm.customfields(n.customFields),stage:t.crm.dealmilestone(n.stage),successProbability:n.successProbability,expectedCloseDate:i,expectedCloseDateString:o(i),isPrivate:n.isPrivate,canEdit:n.canEdit,perPeriodValue:n.perPeriodValue})},taskcategory:function(n){return s(this.item(n),{type:"taskcategory",imagePath:n.imagePath,relativeItemsCount:n.relativeItemsCount,sortOrder:n.sortOrder})},caseitem:function(n){return s(this.item(n),{type:"case",accessList:n.accessList,isClosed:n.isClosed,isPrivate:n.isPrivate,canEdit:n.canEdit})},cases:function(n){return i(n,this.item,function(n){return t.crm.caseitem(n)})},tags:function(n){return n},fulltag:function(n){return{type:"fulltag",title:n.title,relativeItemsCount:n.relativeItemsCount||0}},fulltags:function(n){for(var r=[],i=0,u=n.length;i<u;i++)r.push(t.crm.fulltag(n[i]));return r},contacts:function(n){return i(n,this.item,function(n){return t.crm.contact(n)})},simplecontacts:function(n){for(var r,u=[],i=0;i<n.length;i++)r=t.crm.simplecontact(n[i].contact),n[i].hasOwnProperty("task")&&(r.nearTask=t.crm.task(n[i].task)),u.push(r);return u},basecontacts:function(n){return i(n,this.item,function(n){return t.crm.basecontact(n)})},customfields:function(n){return i(n,this.item,function(n){return t.crm.customfield(n)})},dealmilestones:function(n){return i(n,this.item,function(n){return t.crm.dealmilestone(n)})},contactstatuses:function(n){return i(n,this.item,function(n){return t.crm.contactstatus(n)})},contacttypekinds:function(n){return i(n,this.item,function(n){return t.crm.contacttypekind(n)})},historycategories:function(n){return i(n,this.item,function(n){return t.crm.historycategory(n)})},tasks:function(n){return i(n,this.item,function(n){return t.crm.task(n)})},opportunities:function(n){return i(n,this.item,function(n){return t.crm.opportunity(n)})},taskcategories:function(n){return i(n,this.item,function(n){return t.crm.taskcategory(n)})},historyevent:function(n){return s(this.item(n),{type:"event",createdDate:o(r(n.created)),canEdit:n.canEdit,category:t.crm.category(n.category),contact:n.contact?t.crm.contact(n.contact):null,content:n.content,entity:n.entity?t.crm.entity(n.entity):null,files:n.files&&n.files.length!=0?t.crm.files(n.files):null})},historyevents:function(n){return i(n,this.item,function(n){return t.crm.historyevent(n)})},currency:function(n){return{type:"currency",abbreviation:n.abbreviation,cultureName:n.cultureName,symbol:n.symbol,title:n.title,isConvertable:n.isConvertable,isBasic:n.isBasic}},currencies:function(n){return i(n,null,function(n){return t.crm.currency(n)})},smtpsettings:function(n){return{type:"smtpsettings",enableSSL:n.enableSSL,host:n.host,hostLogin:n.hostLogin,hostPassword:n.hostPassword,port:n.port,requiredHostAuthentication:n.requiredHostAuthentication,senderDisplayName:n.senderDisplayName,senderEmailAddress:n.senderEmailAddress}},rootfolder:function(n){return{id:n}},invoice:function(n){var f=r(n.issueDate),h=o(f),i=r(n.dueDate),l=i&&i.getHours()==0&&i.getMinutes()==0&&i.getSeconds()==0?o(i):e(i),u=n.createOn?r(n.createOn):null,a=n.status.id==2&&i<new Date;return s(this.item(n),{type:"invoice",number:n.number,status:n.status,debtor:a,issueDate:f,issueDateString:h,dueDate:i,dueDateString:l,templateType:n.templateType,contact:n.contact?t.crm.basecontact(n.contact):null,consignee:n.consignee?t.crm.basecontact(n.consignee):null,entity:n.entity?t.crm.entity(n.entity):null,language:n.language,currency:n.currency?t.crm.currency(n.currency):null,cost:n.cost,purchaseOrderNumber:n.purchaseOrderNumber,terms:n.terms,description:n.description,fileId:n.fileID,crtdate:u,displayCrtdate:e(u),displayDateCrtdate:o(u),displayTimeCrtdate:c(u),invoiceLines:n.invoiceLines&&n.invoiceLines.length!=0?t.crm.invoiceLines(n.invoiceLines):null,canEdit:n.canEdit,canDelete:n.canDelete})},invoices:function(n){return i(n,this.item,function(n){return t.crm.invoice(n)})},invoiceJsonData:function(n){return jq.parseJSON(n||null)},invoiceLines:function(n){return i(n,this.item,function(n){return t.crm.invoiceLine(n)})},invoiceLine:function(n){return{type:"invoiceLine",id:n.id,invoiceID:n.invoiceID,invoiceItemID:n.invoiceItemID,invoiceTax1ID:n.invoiceTax1ID,invoiceTax2ID:n.invoiceTax2ID,sortOrder:n.sortOrder,description:n.description,quantity:n.quantity,price:n.price,discount:n.discount,canEdit:n.canEdit}},invoiceItems:function(n){return i(n,this.item,function(n){return t.crm.invoiceItem(n)})},invoiceItem:function(n){return{type:"invoiceItem",id:n.id,title:n.title,stockKeepingUnit:n.stockKeepingUnit,description:n.description,price:n.price,currency:n.currency,quantity:n.quantity,stockQuantity:n.stockQuantity,trackInvenory:n.trackInvenory,invoiceTax1:n.invoiceTax1?t.crm.invoiceTax(n.invoiceTax1):null,invoiceTax2:n.invoiceTax2?t.crm.invoiceTax(n.invoiceTax2):null,sortOrder:n.sortOrder,canEdit:n.canEdit,canDelete:n.canDelete}},invoicesAndItems:function(n){return{invoices:n.key&&n.key.length!=0?t.crm.invoices(n.key):null,invoiceItems:n.value&&n.value.length!=0?t.crm.invoiceItems(n.value):null}},invoiceTaxes:function(n){return i(n,this.item,function(n){return t.crm.invoiceTax(n)})},invoiceTax:function(n){return{type:"invoiceTax",id:n.id,name:n.name,description:n.description,rate:n.rate,canEdit:n.canEdit,canDelete:n.canDelete}},invoiceSettings:function(n){return{type:"invoiceSettings",autogenerated:n.autogenerated,prefix:n.prefix,number:n.number,terms:n.terms}},currencyRates:function(n){return i(n,this.item,function(n){return t.crm.currencyRate(n)})},currencyRate:function(n){return{type:"currencyRate",id:n.id,fromCurrency:n.fromCurrency,toCurrency:n.toCurrency,rate:n.rate}},voipNumbers:function(n){return i(n,null,function(n){return t.crm.voipNumber(n)})},voipNumber:function(n){return{id:n.id,number:n.number,alias:n.alias,settings:n.settings}},voipSettings:function(n){return n},voipCalls:function(n){return i(n,null,function(n){return t.crm.voipCall(n)})},voipCall:function(n){var i=r(n.dialDate);return{id:n.id,from:n.from,to:n.to,status:n.status,answeredBy:h(n.answeredBy),dateObj:i,datetime:e(i),time:c(i),dialDuration:n.dialDuration,cost:n.cost,recordUrl:n.recordUrl,recordDuration:n.recordDuration,contact:n.hasOwnProperty("contact")&&n.contact?t.crm.contact(n.contact):null,history:n.history}},converterData:function(n){return{type:"converterData",storageUrl:n.storageUrl,revisionId:n.revisionId,urlToFile:n.urlToFile,invoiceId:n.invoiceId,fileId:n.fileId}}},yt=function(n,i,r,u){var e,o,f;if(typeof r=="undefined")return null;for(u=u||[r],i=typeof i=="string"?i.toLowerCase():"",e=ft.length;e--;)if(ft[e].re.test(n)){if(!ft[e].hasOwnProperty("method"))break;if(ft[e].method===i)break}return(o=e!==-1?ft[e].handler:n,f=o.split("-"),f.length>1&&t.hasOwnProperty(f[0])&&typeof t[f[0]][f[1]]=="function")?t[f[0]][f[1]].apply(t[f[0]],[r,u]):typeof t[o]=="function"?t[o].apply(t,[r,u]):ai===!0?null:r},{profile:v,dateFormats:et,contactTypes:ut,nameCollections:rt,init:ir,create:yt,fixData:rr,formattingDate:ot,serializeDate:r,serializeTimestamp:ur,getDisplayTime:c,getDisplayDate:o,getDisplayDatetime:e}}();
window.ServiceHelper=function(n){function h(n){var f,u,o=n.attributes,s=n.childNodes,i=n.nodeType,t={},r=null,e=-1;if(i==1&&o.length){for(t[i="@attributes"]={};f=o.item(++e);)t[i][f.nodeName]=f.nodeValue;e=-1}else i==3&&(t=n.nodeValue);while(u=s.item(++e))i=u.nodeName,t.hasOwnProperty(i)?(t.toString.call(t[i])!="[object Array]"&&(t[i]=[t[i]]),t[i].push(h(u))):i==="#text"?(r=h(u),t=isFinite(+r)?+r:r,(r==="true"||r==="false")&&(t=r==="true")):t[i]=h(u);return t}function i(n){return n?n.constructor.toString().indexOf("Array")!=-1:!1}function ti(n){return n?n.constructor.toString().indexOf("File")!=-1:!1}function ii(n){return ti(n)?!1:!0}function ct(n){return""+(n?n+"-":"")+Math.floor(Math.random()*1e6)}function lt(n,t){for(var r=0,i=ct(t);n.hasOwnProperty(i)&&r++<1e3;)i=ct(t);return i}function at(n,t,r){var u=null,o=null,f,s,e,h;for(f in t)if(t.hasOwnProperty(f)){if(s=!1,u=t[f],r?r[f]=u:null,typeof u=="string"&&u.length>0&&(u=encodeURIComponent(u)),u&&i(u)){for(o=[],e=0,h=u.length;e<h;e++)o.push(f+"[]="+encodeURIComponent(u[e]));n.push(o.join("&"));s=!0}s===!1?n.push(f+"="+u):null}return n}function ri(n,t,i,r,u){var f=[],e;switch(n){case"get":case"delete":r&&typeof r=="object"&&(f=at(f,r,null),r=null)}return!u||typeof u!="object"?t:(i.__filter={},e=u.hasOwnProperty("filter")?u.filter||{}:{},f=at(f,e,i.__filter),t+(f.length>0?"?"+f.join("&"):""))}function g(n,t){var i=null,r;if(!n)return!1;if(n.__once===!0)for(r=t.length;r--;)if(i=t[r],i.__eventname===n.__eventname&&i.type===n.type&&i.url===n.url)return!1;return!0}function nt(){for(var n="",i=[],t=0,r=arguments.length;t<r;t++)i.push(arguments[t]);return n=i.join(ot),u+(n.charAt(0)===ot?n.substring(1):n)}function vt(n){for(var t in n)delete n[t],n[t]=null}function tt(n){for(var i=0,r=t.length;i<r;i++)if(t[i].__id==n)return t[i];return null}function o(n){for(var i=t.length;i--;)t[i].__id==n&&(vt(t[i]),delete t[i],t[i]=null,t.splice(i,1));delete req}function it(n){if(!n||typeof n!="object"||!n.__id)return null;for(var i=0,r=t.length;i<r;i++)if(t[i].__id==n.__id)return t[i];return null}function rt(n,t){var i;if(typeof n.__errorcallback=="function")try{n.__errorcallback(n.__params,n.__errors)}catch(i){console.log(i)}if(t!==!0)try{r("extention",this,[n.__eventname,n.__params,n.__errors])}catch(i){console.log(i)}}function yt(n){var r,f,u,i;if(!n)return!1;if(n.__attcount!=0&&n.type!="get"||n.__attcount>=n.__max_request_attempts){if(n.hasOwnProperty("__jointrequests")&&n.__jointrequests)for(r=0,f=n.__jointrequests.length;r<f;r++)u=n.__jointrequests[r],typeof u.__aftercallback=="function"&&u.__aftercallback(u.__params);for(typeof n.__aftercallback=="function"&&n.__aftercallback(n.__params),rt(n),i=t.length;i--;)t[i]===n&&(vt(t[i]),delete t[i],t[i]=null,t.splice(i,1));return delete n,!1}return!0}function ut(n,t,u){var h,p,c,a,l,w,b,v;if(!n)return!1;var s=null,e=!1,y=!1,f=null;switch(u){case"error":e=!0;break;case"timeout":n.__totcount++;e=!0;s="timeout expected"}switch(t.status){case 401:e=!0;y=!0;n.__attcount+=n.__max_request_attempts;s="unauthorized request"}if(!e){try{f=t.responseObject||jQuery.parseJSON(t.responseText)}catch(k){f=null;e=!0;s="response parse error"}e||f||(e=!0,s="response parse error");e||f.response!=null||(f.hasOwnProperty("error")?(e=!0,n.__attcount+=n.__max_request_attempts,s=f.error.message||"throw error"):(e=!0,s="empty response"))}if(e||f&&f.status!=0&&(e=!0,s="invalid status"),e){if(s)n.__errors.push(s);else{try{f=t.responseObject||jQuery.parseJSON(t.responseText)}catch(k){f=null}f&&f.error&&(n.__errors.push(f.error.message),n.__errors.push(f.error))}if(y&&r("unauthenticated",this,[n.__params]),n.hasOwnProperty("__jointrequests")&&n.__jointrequests)for(h=0,p=n.__jointrequests.length;h<p;h++)c=n.__jointrequests[h],typeof c.__errorcallback=="function"&&c.__errorcallback(c.__params);for(a=n.__batchrequests&&i(n.__batchrequests)?n.__batchrequests:[],l=0,w=a.length;l<w;l++)b=a[l].Name,v=tt(b),v&&o(v.__id);return n.__processing=!1,delete n,!1}return!0}function ui(n,t){if(!n)return!1;var f=null,u=!1,e=!1,i=null;if(u=!1,e=!1,!u)try{jQuery.isXMLDoc(t.responseText)&&(i=h(t.responseText),i=i.result||null);typeof t.responseText=="string"&&(i=t.responseText.replace(/^<pre>/,"").replace(/<\/pre>$/,""),i=jQuery.parseJSON(t.responseText))}catch(o){i=null;u=!0;f="response parse error"}return(u||i||(u=!0,f="response parse error"),u||i.response||(i.hasOwnProperty("error")?(u=!0,n.__attcount+=n.__max_request_attempts,f=i.error.message||"throw error"):(u=!0,f="empty response")),u||i&&i.status!=0&&(u=!0,f="invalid status"),u)?(f&&(n.__errors.push(f),rt(n)),e&&r("unauthenticated",this,[]),n.__processing=!1,delete n,!1):!0}function y(t,i,u,f,e){var s=f&&t.__singleresponse===!0?n.create(t.url,t.type,f[0],f):null,l,v,w,b,a,h,c,d;if(typeof s!="undefined"&&s!=null){l=e[0];for(h in l)l.hasOwnProperty(h)&&(u["__"+h]=l[h]);if(t.__isme===!0&&wi(t.__params,s),t.__isauth===!0&&ki(t.__params,s),t.__issettings===!0&&bi(t.__params,s),v=!0,typeof t.__successcallback=="function")try{t.__successcallback(t.__params,s)===!1&&(v=!1)}catch(k){console.log(k)}if(v===!0)try{r(null,this,[t.__params,s]);t.__eventname&&r(t.__eventname,this,[t.__params,s])}catch(k){console.log(k)}}if(s===null&&f&&t.__singleresponse===!1){var y=[],p=[];for(w in e)if(e.hasOwnProperty(w)){b={};a=e[w];for(h in a)a.hasOwnProperty(h)&&(b["__"+h]=a[h]);p.push(b)}for(p.push(u),y.push(p),c=0,d=f.length;c<d;c++)s=n.create(t.__urls[c],t.__methods[c],f[c],f),y.push(s);!0&&fi.call(this,t,y)}o(t.__id)}function fi(n,t){var i=!0;if(typeof n.__successcallback=="function")try{n.__successcallback.apply(this,t)===!1&&(i=!1)}catch(u){console.log(u)}if(i===!0)try{r(null,this,t);n.__eventname&&r(n.__eventname,this,t)}catch(u){console.log(u)}}function ei(n,t){var r=null,i=it(this),f,u,e;if(!ut(i,n,t)||(r=jQuery.parseJSON(n.responseText),i=i.__processing===!0?i:null,!i))return undefined;if(typeof i.__aftercallback=="function"&&i.__aftercallback(i.__params),i.__urls.push(i.url),i.__methods.push(i.type),i.__responses.push(r.response),i.__paramses.push({count:r.count,startIndex:r.startIndex,nextIndex:r.nextIndex||undefined,total:r.total||undefined}),i.batch.length>0)return delete i.__errors,i.__errors=[],i.__errcount=0,i.__totcount=0,i.__attcount=0,i.__processing=!1,i.url=i.batch[0],i.batch=i.batch.slice(1),undefined;for(f=[i,i.__eventname,i.__params,i.__responses,i.__paramses],u=0,e=arguments.length;u<e;u++)f.push(arguments[u]);y.apply(this,f);o(i.__id)}function oi(n,t){var h=null,e=0,d=[],g=[],nt=[],ft=[],f=it(this),et=null,c=null,u=null,w=null,b=null,r=null,a,s,l,p,ot,st;if(!ut(f,n,t)||(c=n.responseObject||jQuery.parseJSON(n.responseText),f=f.__processing===!0?f:null,!f))return undefined;if(f.hasOwnProperty("__jointrequests")&&f.__jointrequests)for(s=0,l=f.__jointrequests.length;s<l;s++)a=f.__jointrequests[s],typeof a.__aftercallback=="function"&&a.__aftercallback(a.__params);typeof f.__aftercallback=="function"&&f.__aftercallback(f.__params);h=f.__batchrequests&&i(f.__batchrequests)?f.__batchrequests:[];var v=null,k=[],et=i(c.response)?c.response:[c.response];for(s=0,l=arguments.length;s<l;s++)k.push(arguments[s]);for(p=0,ot=et.length;p<ot;p++){for(u=et[p],w=u.name,r=tt(w),e=h.length;e--;)h[e].Name===w&&(b=h[e].RelativeUrl,method=h[e].RelativeMethod);try{u=jQuery.parseJSON(u.data)}catch(ht){u=null}ut(f,{status:u.statusCode||200,responseObject:u},t)||(u={response:null});u&&b&&(g.push(b),nt.push(method),d.push(u.response),ft.push({count:u.count,startIndex:u.startIndex,nextIndex:u.nextIndex||undefined,total:u.total||undefined}));r&&u&&r.url&&u.response&&(r.__urls.push(r.url),r.__methods.push(r.type),r.__responses.push(u.response),r.__paramses.push({count:u.count,startIndex:u.startIndex,nextIndex:u.nextIndex||undefined,total:u.total||undefined}),v=[r,r.__eventname,r.__params,r.__responses,r.__paramses].concat(k),y.apply(this,v),o(r.__id))}for(e=0,st=h.length;e<st;e++)r=tt(h[e].Name),r&&r.__id&&o(r.__id);r=it(this);r&&(r.__urls=[].concat(g),r.__methods=[].concat(nt),r.__responses=[].concat(d),r.__paramses=[].concat(ft),r.__errors.length>0&&(r.__params.__errors=r.__errors,rt(r,!0)),v=[r,r.__eventname,r.__params,r.__responses,r.__paramses].concat(k),y.apply(this,v),o(r.__id))}function si(n,t,i){var r=e.hasOwnProperty(n)?e[n]:null;r&&typeof r.__beforecallback=="function"&&r.__beforecallback(r.__params,t,i)}function hi(n,t,i){var r=e.hasOwnProperty(n)?e[n]:null,u;if(r&&typeof r.__aftercallback=="function"&&r.__aftercallback(r.__params),!ui(r,{status:0,responseText:i},"success"))return undefined;if(jQuery.isXMLDoc(i)&&(i=h(i),i=i&&typeof i=="object"?i:null,i=i&&i.hasOwnProperty("result")?i.result:i),typeof i=="string"){i=i.replace(/^<pre>/,"").replace(/<\/pre>$/,"");try{i=jQuery.parseJSON(i)}catch(f){i=null}}r&&i&&(t&&(i.response.__filenames=typeof t=="string"?[t]:[]),r.__urls.push(r.url),r.__methods.push(r.type),r.__responses.push(i.response),r.__paramses.push({count:i.count,startIndex:i.startIndex,nextIndex:i.nextIndex||undefined,total:i.total||undefined}),u=[r,r.__eventname,r.__params,r.__responses,r.__paramses,null,"success"],y.apply(this,u),o(r.__id),e.hasOwnProperty(n)&&delete e[n])}function pt(){var r,n,u,i,f;if(t.length>0&&(t[0].__processing===!1||t[0].__isasync===!0)){if(r=[],gt===!0&&t.length>1&&t[0].__issimple===!0)for(n=0,u=t.length;n<u;n++)t[n].__issimple===!0&&t[n].__processing===!1&&r.push(t[n]);if(r.length>1)ci(r);else for(i=0,f=t.length;i<f;i++)if(t[i].__processing===!1){li(t[i]);break}}ht=new Date}function c(t,r,u,f,e,o){var h,s,c,k;if(r=r||{},u=typeof u=="string"?u.toLowerCase():"get",e&&typeof e=="object")for(s in e)e.hasOwnProperty(s)&&e[s]instanceof Date&&(e[s]=n.serializeTimestamp(e[s]));if(o&&typeof o=="object"&&o.hasOwnProperty("filter")){h=o.filter;for(s in h)h.hasOwnProperty(s)&&h[s]instanceof Date&&(h[s]=n.serializeTimestamp(h[s],!0))}f=ri(u,f,r,e,o);var d=lt({}),l=null,a=null,v=null,p=b,y=typeof o=="function"?o:null,w=!1;if(o&&typeof o=="object"&&(l=o.hasOwnProperty("before")&&typeof o.before=="function"?o.before:l,a=o.hasOwnProperty("after")&&typeof o.after=="function"?o.after:a,v=o.hasOwnProperty("error")&&typeof o.error=="function"?o.error:v,y=o.hasOwnProperty("success")&&typeof o.success=="function"?o.success:y,o.hasOwnProperty("max_request_attempts")&&(p=o.max_request_attempts),o.hasOwnProperty("is_single")&&(w=o.is_single)),f=typeof f=="string"?nt(f):f,i(f))for(c=0,k=f.length;c<k;c++)f[c]=nt(f[c]);return{__id:d,__errors:[],__errcount:0,__totcount:0,__attcount:0,__eventname:t||"",__processing:!1,__params:r,__once:r.hasOwnProperty("__once")?r.__once===!0:!1,__beforecallback:l,__aftercallback:a,__errorcallback:v,__successcallback:y,__isauth:t==="authentication",__issettings:t==="settings",__isme:t==="me",__issimple:t!=="authentication"&&t!=="settings"&&t!=="me"&&u==="get"&&typeof f=="string"&&w===!1,__urls:[],__methods:[],__paramses:[],__responses:[],__singleresponse:typeof f=="string",__uploader:null,__max_request_attempts:p,__isasync:o&&o.hasOwnProperty("async")&&typeof o.async=="boolean"?o.async:!1,jsonp:!1,async:!0,dataType:"json",processData:ii(e),cache:!0,converters:{"* text":!1,"text script":!1,"text html":!1,"text json":!1,"text xml":!1},url:typeof f=="string"?f:i(f)?f[0]:null,batch:typeof f=="object"&&i(f)&&f.length>1?f.slice(1):[],type:u,data:e,timeout:st,complete:ei}}function ft(n,t,r,u,f,e,o,s){t=t||{};var y=lt({}),h=null,c=null,l=null,v=b,a=typeof e=="function"?e:null;return e&&typeof e=="object"&&(h=e.hasOwnProperty("before")&&typeof e.before=="function"?e.before:h,c=e.hasOwnProperty("after")&&typeof e.after=="function"?e.after:c,l=e.hasOwnProperty("error")&&typeof e.error=="function"?e.error:l,a=e.hasOwnProperty("success")&&typeof e.success=="function"?e.success:a,e.hasOwnProperty("max_request_attempts")&&(v=e.max_request_attempts)),u=typeof u=="string"?nt(u):u,{__id:y,__errors:[],__errcount:0,__totcount:0,__attcount:0,__eventname:n||"",__processing:!1,__params:t,__beforecallback:h,__aftercallback:c,__errorcallback:l,__successcallback:a,__isbatch:!0,__urls:[],__methods:[],__paramses:[],__responses:[],__singleresponse:!1,__uploader:null,__batchrequests:o&&i(o)?o:null,__jointrequests:s&&typeof s=="object"&&i(s)?s:null,__max_request_attempts:v,jsonp:!1,async:!0,dataType:"json",cache:!0,converters:{"* text":!1,"text script":!1,"text html":!1,"text json":!1,"text xml":!1},url:u,type:r,data:f,timeout:st,complete:oi}}function wt(n){n.__processing=!0;n.url+=(n.url.indexOf("?")===-1?"?":"&")+v+"="+n.__id;jQuery.ajax(n)}function ci(n){for(var e=n.length,u,h,r,f;e--;)if(!yt(n[e]))break;if(e===-1){var i=null,o=[],c=[],s=b;for(r=0,f=n.length;r<f;r++)i=n[r],i.__attcount++,i.__processing=!0,i.url+=(i.url.indexOf("?")===-1?"?":"&")+v+"="+i.__id,o.push({Name:i.__id,RelativeUrl:i.url,RelativeMethod:i.type}),c.push(i),i.__max_request_attempts<s&&(s=i.__max_request_attempts);for(u=ft(null,null,"post","batch.json",{batch:jQuery.toJSON(o)},{max_request_attempts:s},o,c),h=!1,r=0,f=t.length;r<f;r++)if(t[r].issimple===!0){t.splice(r,0,u);h=!0;break}h===!1&&t.push(u);u.__attcount++;wt(u)}}function li(n){yt(n)&&(n.__attcount++,wt(n))}function ai(){l=(new Date).getTime();delete s;s=[]}function vi(n,i){var r=null;l=0;r=ft("",n,"post","batch.json",{batch:jQuery.toJSON(s)},i,s);g(r,t)&&(typeof r.__beforecallback=="function"&&r.__beforecallback(r.__params),t.push(r))}function yi(r,u,f,e,o,h){var a=null,tt=new Date,b,nt,y,k,d;if(tt-ht>3*w&&(clearInterval(p),p=setInterval(pt,w)),o=n.fixData(o),l>0&&(new Date).getTime()-l<ni)return a=c(r,u,f,e,o,h),a.url+=(a.url.indexOf("?")===-1?"?":"&")+v+"="+a.__id,s.push({Name:a.__id,method:a.type,RelativeUrl:a.url,RelativeMethod:a.type}),s;if(i(e)){for(b=[],nt=[],y=0,k=e.length;y<k;y++)a=c(r,u,f,e[y],o,h),a.url+=(a.url.indexOf("?")===-1?"?":"&")+v+"="+a.__id,b.push({Name:a.__id,method:a.type,RelativeUrl:a.url,RelativeMethod:a.type}),nt.push(a);a=ft(r,u,"post","batch.json",{batch:jQuery.toJSON(b)},h,b,nt)}else a=c(r,u,f,e,o,h);if(g(a,t)){if(a.hasOwnProperty("__jointrequests")&&a.__jointrequests)for(y=0,k=a.__jointrequests.length;y<k;y++)d=a.__jointrequests[y],typeof d.__beforecallback=="function"&&d.__beforecallback(d.__params);typeof a.__beforecallback=="function"&&a.__beforecallback(a.__params);t.push(a)}}function bt(n,i,r,u,f,e){var o=c(n,i,r,u,f,e);g(o,t)&&(typeof o.__beforecallback=="function"&&o.__beforecallback(o.__params),t.unshift(o))}function wi(n,t){a|=1;k=t;a===3&&r("completeinit",this,[k,d])}function bi(n,t){a|=2;d=t;a===3&&r("completeinit",this,[k,d])}function ki(){dt({__once:!0})}function di(){}var et=!1,gt=!0,l=0,ni=500,s=[],a=0,u=null,v="__",ot="/",p=0,w=50,b=3,st=6e4,k=null,d=null,f={},e={},t=[],ht=new Date,pi=function(n,t,i,r,u,f){var o=c(n,t,i,r,u,f);return u=u||{},u.action=o.url,u.onSubmit=function(n){return function(t,i){si(n,t,i)}}(o.__id),u.onComplete=function(n){return function(t,i){hi(n,t,i)}}(o.__id),e[o.__id]=o,o.__uploader=new AjaxUpload(u.buttonId,u)},gi=function(n,t){if(et===!0)return undefined;et=!0;u=typeof n=="string"&&n.length>0?n:u;u&&(u=u.charAt(u.length-1)==="/"?u:u+"/");p=setInterval(pt,w);kt("unauthenticated",di);t&&dt({__once:!0})},kt=function(n,t){f.hasOwnProperty(n)||(f[n]=[]);typeof t=="function"&&f[n].push(t)},r=function(n,t,i){var u,r,e;if(f.hasOwnProperty(n)){for(u=f[n],t=t||window,i=i||[],r=0,e=u.length;r<e;r++)u[r].apply(t,i);return undefined}if(f.hasOwnProperty("event"))for(u=f.event,t=t||window,r=0,e=u.length;r<e;r++)u[r].apply(t,[n,t,i])},dt=function(n,t){n=n||{};bt("me",n,"get","people/@self.json",null,t)},tr=function(n,t){n=n||{};bt("settings",n,"get","settings.json",null,t)},nr=function(){};return{test:nr,init:gi,bind:kt,exec:r,joint:ai,start:vi,request:yi,uploader:pi}}(ServiceFactory);
window.Teamlab=function(){function o(n){return n?n.constructor.toString().indexOf("Array")!=-1:!1}function s(n){return n&&typeof n=="object"&&n.hasOwnProperty("query")?n.query:null}function nt(){for(var n in r)l[n]=!0,l[r[n]]=!0}function tt(n,t,i,r){n=n.replace(/-/g,"_");t&&typeof t=="object"&&typeof t[n]=="function"&&t[n].apply(i,r)}function h(n){return n&&o(n)?window.Teamlab:n}function ft(n,t,i){l.hasOwnProperty(n)&&y(n,t,i)}function et(n,t,i){c.call(r.getException,this,[t,i])}function ot(n){var i,t,r;if(n.hasOwnProperty("___handler")&&n.hasOwnProperty("___container")){for(i=[n],t=1,r=arguments.length;t<r;t++)i.push(arguments[t]);tt(n.___handler,n.___container,this,i)}}function n(n,t,i,r,u,f){return h(e.request(n,t,i,r,u,f))}var u="post",i="put",f="delete",t="get",e=ServiceHelper,v=!1,r={getException:"ongetexception",getAuthentication:"ongetauthentication",addPrjComment:"onaddprjcomment",updatePrjTime:"onupdateprjtime",removePrjTime:"onremoveprjtime",getMailFilteredMessages:"ongetmailmessages",getMailFolders:"ongetmailfolders",getAccounts:"ongetmailaccounts",getMailTags:"ongetmailtags",getMailConversation:"ongetmailconversation",getNextMailConversationId:"ongetnextmailconversationid",getPrevMailConversationId:"ongetprevmailconversationid",getMailMessage:"ongetmailmessage",getNextMailMessageId:"ongetnextmailmessageid",getPrevMailMessageId:"ongetprevmailmessageid",removeMailFolderMessages:"onremovemailfoldermessages",restoreMailMessages:"onrestoremailmessages",moveMailMessages:"onmovemailmessages",removeMailMessages:"onremovemailmessages",markMailMessages:"onmarkmailmessages",createMailTag:"oncreatemailtag",updateMailTag:"onupdatemailtag",removeMailTag:"onremovemailtag",addMailDocument:"onaddmaildocument",setMailTag:"onsetmailtag",setMailConversationsTag:"onsetmailconversationstag",unsetMailTag:"unsetmailtag",unsetMailConversationsTag:"unsetmailconversationstag",removeMailMailbox:"onremovemailmailbox",getMailDefaultMailboxSettings:"ongetmaildefaultmailboxsettings",getMailMailbox:"ongetmailmailbox",setDefaultAccount:"onsetdefaultaccount",createMailMailboxSimple:"oncreatemailmailboxsimple",createMailMailboxOAuth:"oncreateMailMailboxOAuth",updateMailMailboxOAuth:"updateMailMailboxOAuth",createMailMailbox:"oncreatemailmailbox",updateMailMailbox:"onupdatemailmailbox",setMailMailboxState:"onsetmailmailboxstate",removeMailMessageAttachment:"onremovemailmessageattachment",sendMailMessage:"onsendmailmessage",saveMailMessage:"onsavemailmessage",searchEmails:"ongetSearchEmails",getMailContacts:"ongetMailContacts",getMailContactsByInfo:"ongetMailContactsByInfo",createMailContact:"oncreateMailContact",deleteMailContacts:"ondeleteMailContacts",updateMailContact:"onupdateMailContact",getMailAlerts:"ongetmailalerts",deleteMailAlert:"ondeletemailalert",moveMailConversations:"onmovemailconversations",restoreMailConversations:"onrestoremailconversations",removeMailConversations:"onremovemailconversations",markMailConversations:"onmarkmailconversations",getMailFilteredConversations:"ongetmailfilteredconversations",getMailDisplayImagesAddresses:"ongetmaildisplayimagesaddresses",createDisplayImagesAddress:"oncreatedisplayimagesaddress",removeDisplayImagesAddress:"onremovedisplayimagesaddress",getLinkedCrmEntitiesInfo:"ongetlinkedcrmentitiesinfo",linkChainToCrm:"onlinkchaintocrm",markChainAsCrmLinked:"onmarkchainascrmlinked",unmarkChainAsCrmLinked:"onunmarkchainascrmlinked",isConversationLinkedWithCrm:"ongetcrmlinked",exportMessageToCrm:"onexportmessagetocrm",getMailboxSignature:"ongetmailboxsignature",updateMailboxSignature:"onupdatemailboxsignature",updateMailboxAutoreply:"onupdatemailboxautoreply",exportAllAttachmentsToMyDocuments:"exportallattachmentstomydocuments",exportAllAttachmentsToDocuments:"exportallattachmentstodocuments",exportAttachmentToMyDocuments:"exportattachmenttomydocuments",exportAttachmentToDocuments:"exportAttachmentToDocuments",setEMailInFolder:"onsetemailinfolder",getMailServer:"getmailserver",getMailServerFullInfo:"getmailserverfullinfo",getMailServerFreeDns:"getmailserverfreedns",getMailDomains:"getmaildomains",addMailDomain:"addmaildomain",removeMailDomain:"removemaildomain",addMailbox:"addmailbox",getMailboxes:"getmailboxes",removeMailbox:"removeMailbox",addMailBoxAlias:"addmailboxalias",updateMailbox:"updateMailbox",removeMailBoxAlias:"removemailboxalias",addMailGroup:"addmailgroup",addMailGroupAddress:"addmailgroupaddress",getMailGroups:"getmailgroups",removeMailGroup:"removemailgroup",removeMailGroupAddress:"removemailgroupaddress",isDomainExists:"isdomainexists",checkDomainOwnership:"checkdomainownership",getDomainDnsSettings:"getdomaindnssettings",createNotificationAddress:"createnotificationaddress",removeNotificationAddress:"removenotificationaddress",addCalendarBody:"addcalendarbody",setMailConversationEnabledFlag:"setmailconversationenabledflag",setMailAlwaysDisplayImagesFlag:"setmailalwaysdisplayimagesflag",setMailCacheUnreadMessagesFlag:"setmailcacheunreadmessagesflag",setMailEnableGoNextAfterMove:"setmailenablegonextaftermove",getMailOperationStatus:"getmailoperationstatus",getTalkUnreadMessages:"gettalkunreadmessages",addSubtask:"addsubtask",removeSubtask:"removesubtask",updateSubtask:"updateSubtask",removePrjTask:"removePrjTask",removePrjTasks:"removePrjTasks",updatePrjTask:"updatePrjTask",updatePrjTaskStatus:"updatePrjTaskStatus",updatePrjTasksStatus:"updatePrjTasksStatus",addPrjTask:"addPrjTask",copyPrjTask:"copyPrjTask",addPrjMilestone:"addPrjMilestone",updatePrjMilestone:"updatePrjMilestone",updatePrjMilestoneStatus:"updatePrjMilestoneStatus",removePrjMilestone:"removePrjMilestone",updatePrjTeam:"updatePrjTeam",removePrjTeam:"removePrjTeam",getPrjProject:"getPrjProject",updatePrjProjectStatus:"updatePrjProjectStatus",getCrmContactsForProject:"getCrmContactsForProject",addCrmContactForProject:"addCrmContactForProject",removeCrmContactFromProject:"removeCrmContactFromProject",getDocFolder:"getDocFolder"},l={},c=new CustomEvent(r),p,w;nt();var it=function(){if(v===!0)return undefined;v=!0;e.bind(null,ot);e.bind("event",ft);e.bind("extention",et)},rt=function(n,t,i){return c.bind(n,t,i)},ut=function(n){return c.unbind(n)},y=function(n,t,i){c.call(n,t,i)};p=function(){return e.joint(),window.Teamlab};w=function(n,t){return e.start(n,t)};var st=function(i,u){return n(r.getQuotas,i,t,"settings/quota.json",null,u)},ht=function(i,r){return n(null,i,t,"settings/recalculatequota.json",null,r)},ct=function(i,r){return n(null,i,t,"settings/checkrecalculatequota.json",null,r)},lt=function(t,i,r){return n(null,t,u,"people/password.json",{email:i},r)},at=function(t,r,u){return n(null,t,i,"people/thirdparty/linkaccount.json",r,u)},vt=function(t,i,u){return n(r.thirdPartyUnLinkAccount,t,f,"people/thirdparty/unlinkaccount.json",i,u)},yt=function(t,i,r){return n(null,t,u,"people.json",i,r),!0},pt=function(i,r,u){return n(null,i,t,"people/"+r+".json",null,u)},wt=function(i,r){var u=null,f,e;return r&&typeof r=="object"&&r.hasOwnProperty("filter")&&(u=r.filter.hasOwnProperty("status")?r.filter.status:u),f=s(r),e="people"+(u!==null?"/status/"+u:"")+".json",f&&(r.filter?r.filter.query=f:r.filter={query:f},e="people"+(u!==null?"/status/"+u:"")+"/search.json"),n(null,i,t,e,null,r)},bt=function(i,r){return n(null,i,t,"people/filter.json",null,r)},kt=function(t,i,r){return n(null,t,u,"group.json",i,r),!0},dt=function(i,r,u){return n(null,i,t,"group/"+r+".json",null,u)},gt=function(i,r){return n(null,i,t,"group.json",null,r)},ni=function(t,r,u,f){return n(null,t,i,"group/"+r+".json",u,f)},ti=function(t,i,r){return n(null,t,f,"group/"+i+".json",null,r)},ii=function(t,r,u,f){n(null,t,i,"people/"+r+".json",u,f)},ri=function(t,r,u,f){return n(null,t,i,"people/type/"+r+".json",u,f)},ui=function(t,r,u,f){return n(null,t,i,"people/status/"+r+".json",u,f)},fi=function(t,r,u,f){return n(null,t,i,"people/"+r+"/photo.json",u,f)},ei=function(t,i,r,u){return n(null,t,f,"people/"+i+"/photo.json",r,u)},oi=function(t,r,u){return n(null,t,i,"people/invite.json",r,u)},si=function(t,i,r){return n(null,t,f,"people/"+i+".json",null,r)},hi=function(t,r,u){return n(null,t,i,"people/delete.json",r,u)},ci=function(i,r){return n(null,null,t,"group/user/"+i+".json",null,r)},li=function(t,r){return n(null,t,i,"people/self/delete.json",null,r)},ai=function(t,r){return n(null,t,i,"people/self/joinaffiliate.json",null,r)},vi=function(t,i,r){return n(null,t,u,"community/blog.json",i,r),!0},yi=function(i,r,u){return n(null,i,t,"community/blog/"+r+".json",null,u)},pi=function(i,r){var u=s(r);return n(null,i,t,"community/blog"+(u?"/@search/"+u:"")+".json",null,r)},wi=function(t,i,r,f){return n(null,t,u,"community/forum/"+i+".json",r,f),!0},bi=function(i,r,u){return n(null,i,t,"community/forum/topic/"+r+".json",null,u)},ki=function(i,r){var u=s(r);return n(null,i,t,"community/forum"+(u?"/@search/"+u:"/topic/recent")+".json",null,r)},di=function(i,r){return n(null,i,t,"community/forum.json",null,r)},gi=function(t,i,r){return n(null,t,u,"community/forum.json",i,r)},nr=function(t,i,r){return n(null,t,u,"community/event.json",i,r),!0},tr=function(i,r,u){return n(null,i,t,"community/event/"+r+".json",null,u)},ir=function(i,r){var u=s(r);return n(null,i,t,"community/event"+(u?"/@search/"+u:"")+".json",null,r)},rr=function(t,i,r){return n(null,t,u,"community/bookmark.json",i,r),!0},ur=function(i,r,u){return n(null,i,t,"community/bookmark/"+r+".json",null,u)},fr=function(i,r){var u=s(r);return n(null,i,t,"community/bookmark"+(u?"/@search/"+u:"/top/recent")+".json",null,r)},er=function(t,i,r,f){return n(null,t,u,"community/forum/topic/"+i+".json",r,f),!0},or=function(t,i,r,f){return n(null,t,u,"community/blog/"+i+"/comment.json",r,f),!0},sr=function(i,r,u){return n(null,i,t,"community/blog/"+r+"/comment.json",null,u)},hr=function(t,i,r,f){return n(null,t,u,"community/event/"+i+"/comment.json",r,f),!0},cr=function(i,r,u){return n(null,i,t,"community/event/"+r+"/comment.json",null,u)},lr=function(t,i,r,f){return n(null,t,u,"community/event/"+i+"/subscribe.json",r,f),!0},ar=function(t,i,r,f){return n(null,t,u,"community/bookmark/"+i+"/comment.json",r,f),!0},vr=function(i,r,u){return n(null,i,t,"community/bookmark/"+r+"/comment.json",null,u)},yr=function(t,i,r){return n(null,t,u,"community/birthday.json",i,r),!0},pr=function(t,i,r){return n(null,t,u,"community/preview.json",i,r)},wr=function(t,r,u){return n(null,t,i,"project/"+r+"/follow.json",r,u),!0},br=function(i,r){return n(null,i,t,"feed/filter.json",null,r)},kr=function(i,r){return n(null,i,t,"feed/newfeedscount.json",null,r)},dr=function(t,r){return n(null,t,i,"feed/read.json",null,r)},gr=function(t,r){return n(null,{},i,"project/settings.json",t,r)},nu=function(i){return n(null,{},t,"project/settings.json",null,i)},tu=function(t,i){return n(null,t,"get","project/tag.json",null,i)},iu=function(t,i){return n(null,t,"get","project/securityinfo.json",null,i)},ru=function(t,i,r,u){return n(null,t,"get","project/tag/search.json",r,u)},uu=function(n,t,i,r){var u=null;switch(t.toLowerCase()){case"discussion":u=b}return typeof u=="function"?h(u(n,i,r)):!1},fu=function(t,i,f,e){return n(r.addSubtask,t,u,"project/task/"+i+".json",f,e),!0},eu=function(t,i,f,e){return n(r.addSubtask,t,u,"project/task/"+i+"/"+f+"/copy.json",null,e),!0},ou=function(t,u,f,e,o){var s=!1;for(var h in e)if(e.hasOwnProperty(h))switch(h){case"status":s=!0}return n(r.updateSubtask,t,i,"project/task/"+u+"/"+f+(s?"/status":"")+".json",e,o),!0},su=function(t,i,u,e){return n(r.removeSubtask,t,f,"project/task/"+i+"/"+u+".json",u,e),!0},hu=function(t,i,f,e){return n(r.addPrjTask,t,u,"project/"+i+"/task.json",f,e),!0},cu=function(t,i,f,e){return n(r.copyPrjTask,t,u,"project/task/"+f.copyFrom+"/copy.json",f,e),!0},lu=function(t,i,r,f){n(null,t,u,"project/"+i+"/task/"+r+".json",null,f)},au=function(t,u,f,e){var o=!1,s=!1,h=r.updatePrjTask;for(var c in f)if(f.hasOwnProperty(c))switch(c){case"status":o=!0;h=r.updatePrjTaskStatus;break;case"newMilestoneID":s=!0;f.milestoneid=f.newMilestoneID}return n(h,t,i,"project/task/"+u+(o?"/status":"")+(s?"/milestone":"")+".json",f,e),!0},vu=function(t,r){return n(null,null,i,"project/task/milestone.json",t,r),!0},yu=function(t,u){return n(r.updatePrjTasksStatus,null,i,"project/task/status.json",t,u),!0},pu=function(t,i,u){return n(r.removePrjTask,t,f,"project/task/"+i+".json",i,u),!0},wu=function(t,i){return n(r.removePrjTasks,null,f,"project/task.json",t,i),!0},bu=function(i,r,u){return n(null,i,t,"project/task/"+r+".json",null,u)},ku=function(i,r,u){return n(null,i,t,"project/task.json",r,u)},du=function(i,r){if(r&&typeof r=="object"&&r.hasOwnProperty("filter")){var u=r.filter;u.simple=!0}return n(null,i,t,"project/task/filter.json",null,r)},gu=function(i,r){return n(null,i,t,"project/task/filter/simple.json",null,r)},nf=function(i,r,u){return n(null,i,t,"project/task/"+r+"/files.json",null,u)},tf=function(t,r,u){return n(null,t,i,"project/task/"+r+"/subscribe.json",r,u)},rf=function(i,r,u){return n(null,i,t,"project/task/"+r+"/notify.json",null,u)},uf=function(t,i,r,f){return n(null,t,u,"project/task/"+i+"/link.json",r,f),!0},ff=function(t,i,r,u){return n(null,t,f,"project/task/"+i+"/link.json",r,u),!0},ef=function(i,r,f){var e=r&&(typeof r=="number"||typeof r=="string");return n(null,i,e?t:u,"project"+(e?"/"+r:"")+"/team.json",e?null:{ids:r},f)},of=function(t,u,f,e){return n(r.updatePrjTeam,t,i,"project/"+u+"/team.json",f,e)},sf=function(t,r,u,f){return n(null,t,i,"project/"+r+"/team/security.json",u,f)},hf=function(i,r,u){return n(null,i,t,"project/"+r+"/files.json",null,u)},cf=function(t,i,r,f,e){return e=e||{},typeof e=="function"&&(e={success:e}),e.hasOwnProperty("filter")||(e.filter={}),e.filter.hasOwnProperty("entityType")||(e.filter.entityType=r),n(null,t,u,"project/"+i+"/entityfiles.json",o(f)?{files:f}:f,e),!0},lf=function(t,i,r,u,e){return e=e||{},typeof e=="function"&&(e={success:e}),e.hasOwnProperty("filter")||(e.filter={}),e.filter.hasOwnProperty("entityType")||(e.filter.entityType=r),u&&typeof u=="object"&&!u.hasOwnProperty("entityType")&&(u.entityType=r),n(null,t,f,"project/"+i+"/entityfiles.json",typeof u=="number"||typeof u=="string"?{entityType:r,fileid:u}:u,e),!0},af=function(i,r,u,f){return f=f||{},typeof f=="function"&&(f={success:f}),f.hasOwnProperty("filter")||(f.filter={}),f.filter.hasOwnProperty("entityType")||(f.filter.entityType=u),n(null,i,t,"project/"+r+"/entityfiles.json",null,f)},vf=function(t,i,f,e){return n(r.addPrjMilestone,t,u,"project/"+i+"/milestone.json",f,e),!0},yf=function(t,u,f,e){var s=0,o=null,h=r.updatePrjMilestone;for(var c in f)if(f.hasOwnProperty(c)){s++;switch(c){case"status":h=r.updatePrjMilestoneStatus;o="status"}}return s>1&&(o=null),n(h,t,i,"project/milestone/"+u+(o?"/"+o:"")+".json",f,e),!0},pf=function(t,i){return n(r.removePrjMilestone,null,f,"project/milestone/"+t+".json",t,i),!0},wf=function(t,i){return n(null,null,f,"project/milestone.json",t,i),!0},bf=function(i,r,u){return n(null,i,t,"project/milestone/"+r+".json",null,u)},kf=function(i,r,u){var s,h;arguments.length<3&&(u=arguments[1],r=null);var f=null,e=r,o=f;switch(r){case"late":o=r;e=null}if(r instanceof Date&&(o=r.getFullYear()+"/"+(r.getMonth()+1),e=null),r=e,f=o,u&&typeof u=="object"&&u.hasOwnProperty("filter")){s=u.filter;s.simple=!0;for(h in s)switch(h){case"participant":case"tag":case"projectId":case"status":case"deadlineStart":case"deadlineStop":case"sortBy":case"sortOrder":f=f||"filter"}}return n(null,i,t,"project"+(r?"/"+r:"")+"/milestone"+(f?"/"+f:"")+".json",null,u)},df=function(t,i,r,f){return n(null,t,u,"project/"+i+"/message.json",r,f),!0},gf=function(t,r,u,f){return n(null,t,i,"project/message/"+r+".json",u,f),!0},ne=function(t,r,u,f){return n(null,t,i,"project/message/"+r+"/status.json",u,f),!0},te=function(t,i,r){return n(null,t,f,"project/message/"+i+".json",i,r),!0},ie=function(i,r,u){return n(null,i,t,"project/message/"+r+".json",null,u)},re=function(i,r){var u=null,f,e;if(r&&typeof r=="object"&&r.hasOwnProperty("filter")){f=r.filter;f.simple=!0;for(e in f)switch(e){case"participant":case"tag":case"projectId":case"sortBy":case"sortOrder":u=u||"filter"}}return n(null,i,t,"project/message"+(u?"/"+u:"")+".json",null,r)},ue=function(t,r,u){return n(null,t,i,"project/message/"+r+"/subscribe.json",r,u)},fe=function(i,r,u){return n(null,i,t,"project/message/"+r+"/subscribes.json",r,u)},ee=function(t,i,r){return n(null,t,u,"project/withSecurity.json",i,r),!0},oe=function(t,r,u,f){var o=0,e=null;for(var s in u)if(u.hasOwnProperty(s)){o++;switch(s){case"tags":e="tag";break;case"status":e="status"}}return o>1&&(e="withSecurityInfo"),n(null,t,i,"project/"+r+(e?"/"+e:"")+".json",u,f),!0},se=function(t,u,f,e){return n(r.updatePrjProjectStatus,t,i,"project/"+u+"/status.json",f,e),!0},he=function(t,i,r){return n(null,t,f,"project/"+i+".json",i,r),!0},ce=function(t,r,u,f){return n(null,t,i,"project/"+r+"/follow.json",u,f)},le=function(i,u,f){return n(r.getPrjProject,i,t,"project/"+u+".json",null,f)},a=function(i,r,u){var f,o,e;if(arguments.length<4&&(u=r,r=null),f=null,u&&typeof u=="object"&&u.hasOwnProperty("filter")){f=u.filter;f.simple=!0;for(o in f)switch(o){case"tag":case"follow":case"status":case"participant":case"sortBy":case"sortOrder":r=r||"filter"}}return e=s(u),n(null,i,t,"project"+(r?"/"+r:"")+(e?"/@search/"+e:"")+".json",null,u)},ae=function(n,t){return a(n,"@self",t)},ve=function(n,t){return a(n,"@follow",t)},ye=function(i,r,u){return n(null,i,t,"project/contact/"+r+".json",null,u)},pe=function(t,i,r,f){return n(null,t,u,"project/"+i+"/contact.json",r,f)},we=function(t,i,r,u){return n(null,t,f,"project/"+i+"/contact.json",r,u)},be=function(t,i,r,f){return r.parentid||(r.parentid="00000000-0000-0000-0000-000000000000"),n(null,t,u,"project/task/"+i+"/comment.json",r,f),!0},ke=function(i,r,u){return n(null,i,t,"project/task/"+r+"/comment.json",null,u)},de=function(t,i,r,f){return r.parentid||(r.parentid="00000000-0000-0000-0000-000000000000"),n(null,t,u,"project/message/"+i+"/comment.json",r,f),!0},b=function(i,r,u){return n(null,i,t,"project/message/"+r+"/comment.json",null,u)},ge=function(t,i,r){return n(null,t,u,"project/message/discussion/preview.json",{htmltext:i},r)},no=function(t,i,r,f){return n(null,t,u,"project/comment/preview.json",{commentid:i,htmltext:r},f)},to=function(t,i,r,f){return n(null,t,u,"community/wiki/comment/preview.json",{commentid:i,htmltext:r},f)},io=function(t,i,r,f){return n(null,t,u,"community/blog/comment/preview.json",{commentid:i,htmltext:r},f)},ro=function(t,i,r,f){return n(null,t,u,"community/event/comment/preview.json",{commentid:i,htmltext:r},f)},uo=function(t,i,r,f){return n(null,t,u,"community/bookmark/comment/preview.json",{commentid:i,htmltext:r},f)},fo=function(t,i,r){return n(null,t,f,"project/comment/"+i+".json",null,r),!0},eo=function(t,i,r){return n(null,t,f,"community/wiki/comment/"+i+".json",null,r),!0},oo=function(t,i,r){return n(null,t,f,"community/blog/comment/"+i+".json",null,r),!0},so=function(t,i,r){return n(null,t,f,"community/event/comment/"+i+".json",null,r),!0},ho=function(t,i,r){return n(null,t,f,"community/bookmark/comment/"+i+".json",null,r),!0},co=function(t,i,f){return n(r.addPrjComment,t,u,"project/comment.json",i,f),!0},lo=function(t,i,r){return n(null,t,u,"community/wiki/comment.json",i,r),!0},ao=function(t,i,r){return n(null,t,u,"community/blog/comment.json",i,r),!0},vo=function(t,i,r){return n(null,t,u,"community/event/comment.json",i,r),!0},yo=function(t,i,r){return n(null,t,u,"community/bookmark/comment.json",i,r),!0},po=function(t,r,u,f){return n(null,t,i,"project/comment/"+r+".json",u,f),!0},wo=function(t,r,u,f){return n(null,t,i,"community/wiki/comment/"+r+".json",u,f),!0},bo=function(t,r,u,f){return n(null,t,i,"community/blog/comment/"+r+".json",u,f),!0},ko=function(t,r,u,f){return n(null,t,i,"community/event/comment/"+r+".json",u,f),!0},go=function(t,r,u,f){return n(null,t,i,"community/bookmark/comment/"+r+".json",u,f),!0},ns=function(t,r,u){return n(null,t,i,"portal/fcke/comment/removecomplete.json",r,u),!0},ts=function(t,r,u){return n(null,t,i,"portal/fcke/comment/cancelcomplete.json",r,u),!0},is=function(t,r,u){return n(null,t,i,"portal/fcke/comment/editcomplete.json",r,u),!0},rs=function(t,r,u){return n(null,t,i,"portal/getshortenlink.json",{link:r},u)},us=function(t,r,u){return n(null,t,i,"portal/portalrename.json",{alias:r},u),!0},fs=function(t,i,r,f){return n(null,t,u,"project/"+i+"/team.json",r,f),!0},es=function(t,i,u,e){return n(r.removePrjTeam,t,f,"project/"+i+"/team.json",u,e),!0},os=function(i,r,u){return n(null,i,t,"project/"+r+"/team.json",null,u)},ss=function(i,r,u){return n(null,i,t,"project/"+r+"/entityfiles.json",null,u)},hs=function(i,r,u){return n(null,i,t,"project/"+r+"/order.json",null,u)},cs=function(t,r,u,f){return n(null,t,i,"project/"+r+"/order.json",u,f),!0},ls=function(t,i,r,f){return n(null,t,u,"project/task/"+i+"/time.json",r,f),!0},as=function(n,t){return k(n,null,t)},vs=function(i,r,u){return n(null,i,t,"project/"+r+"/time/total.json",null,u)},k=function(i,r,u){var f,h;if(!r||!u){var s=null,e=null,o=null;for(f=2,h=arguments.length;f<h;f++)o=o||(typeof arguments[f]=="function"||typeof arguments[f]=="object"?arguments[f]:o),e=e||(isFinite(+arguments[f])?+arguments[f]:e);u=o;r=e}return u&&typeof u=="object"&&u.hasOwnProperty("filter")&&(s=u.filter),n(null,i,t,"project"+(r?"/task/"+r:"")+"/time"+(s?"/filter":"")+".json",null,u)},ys=function(i,r){var u=null;return r&&typeof r=="object"&&r.hasOwnProperty("filter")&&(u=r.filter),n(null,i,t,"project/time/filter/total.json",null,r)},ps=function(t,u,f,e){return n(r.updatePrjTime,t,i,"project/time/"+u+".json",f,e),!0},ws=function(t,r,u){return n(null,t,i,"project/time/times/status.json",r,u),!0},bs=function(t,i,u){return n(r.removePrjTime,t,f,"project/time/times/remove.json",i,u),!0},ks=function(i,r){return n(null,i,t,"project/template.json",null,r),!0},ds=function(i,r,u){return n(null,i,t,"project/template/"+r+".json",null,u),!0},gs=function(t,r,u,f){return n(null,t,i,"project/template/"+r+".json",u,f),!0},nh=function(t,i,r){return n(null,t,u,"project/template.json",i,r),!0},th=function(t,i,r){return n(null,t,f,"project/template/"+i+".json",null,r),!0},ih=function(i,r){return n(null,i,t,"project/activities/filter.json",null,r)},rh=function(t,i,r){return n(null,t,u,"project/import/quota.json",i,r)},uh=function(t,i,r){return n(null,t,u,"project/import.json",i,r)},fh=function(i,r){return n(null,i,t,"project/import.json",null,r)},eh=function(t,i,r){return n(null,t,u,"project/import/projects.json",i,r)},oh=function(i,r,u){return n(null,i,t,"project/report/"+r+".json",null,u)},sh=function(t,i,r){return n(null,t,u,"project/report.json",i,r)},hh=function(t,r,u,f){return n(null,t,i,"project/report/"+r+".json",u,f)},ch=function(t,i,r){return n(null,t,f,"project/report/"+i+".json",null,r)},lh=function(n,t,i,r){return e.uploader(null,n,"file","project/"+t+"/entityfiles/upload.tml",i,r)},ah=function(n,t,i,r){return e.uploader(null,n,"file","files/"+t+"/upload.tml",i,r)},vh=function(t,i,r,f,e){return n(null,t,u,"files/"+i+(r?"/"+r:"")+".json",f,e),!0},yh=function(i,r,u){return n(null,i,t,"files/file/"+r+".json",null,u)},ph=function(t,i,r,f){return n(null,t,u,"files/"+i+".json",r,f),!0},wh=function(i,u,f){return n(r.getDocFolder,i,t,"files/"+u+".json",null,f)},bh=function(t,i,r){return n(null,t,f,"files/file/"+i+".json",null,r)},kh=function(t,i,r,f){return n(null,t,u,"files/"+i+"/upload/create_session.json",r,f)},dh=function(i,r){return n(null,null,t,"files/folder/"+i+"/path.json",null,r)},gh=function(i,r){return n(null,null,t,"files/file/"+i+"/share.json",null,r)},nc=function(t,r,u){return n(null,null,i,"files/"+t+"/sharedlink.json",r,u)},tc=function(t,r){return n(null,null,i,"files/fileops/copy.json",t,r)},ic=function(i){return n(null,null,t,"files/fileops.json",null,i)},rc=function(i,r){return n(null,null,t,"files/file/"+i+"/presigned.json",null,r)},uc=function(t,r,u,f){return n(null,null,i,"files/docservice.json",{docServiceUrl:t,docServiceUrlInternal:r,docServiceUrlPortal:u},f)},fc=function(n,t,i,r,u){return e.uploader(null,n,"file","crm/"+t+"/"+i+"/files/upload.tml",r,u)},ec=function(i,r,u){return n(null,i,t,"crm/contact/"+r+"/data.json",null,u),!0},oc=function(t,i,r,f){return n(null,t,u,"crm/contact/"+i+"/data.json",r,f),!0},sc=function(t,r,u,f){return n(null,t,i,"crm/contact/"+r+"/data/"+u.id+".json",u,f),!0},hc=function(t,i,r,u){return n(null,t,f,"crm/contact/"+i+"/data/"+r+".json",null,u),!0},cc=function(t,i,r,f){return n(null,t,u,"crm/contact/"+i+"/batch.json",o(r)?{data:r}:r,f),!0},lc=function(t,r,u,f){return n(null,t,i,"crm/contact/"+r+"/batch.json",o(u)?{data:u}:u,f),!0},ac=function(t,i,r,f){return n(null,t,u,"crm/contact/"+i+"/data.json",r,f),!0},vc=function(t,i,r,f,e){return n(null,t,u,"crm/"+i+"/"+r+"/files/text.json",f,e),!0},yc=function(n,t,i,r){return t===!0?d(n,i,r):g(n,i,r)},d=function(t,i,r){return n(null,t,u,"crm/contact/company"+(o(i)?"/quick":"")+".json",o(i)?{data:i}:i,r),!0},pc=function(t,r,u,f){return n(null,t,i,"crm/contact/company/"+r+".json",u,f),!0},wc=function(t,r,u,f){return n(null,t,i,"crm/contact/company/"+r+"/status.json",u,f),!0},bc=function(t,r,u,f){return n(null,t,i,"crm/contact/person/"+r+"/status.json",u,f),!0},kc=function(t,r,u,f){return n(null,t,i,"crm/contact/"+r+"/status.json",u,f),!0},g=function(t,i,r){return n(null,t,u,"crm/contact/person"+(o(i)?"/quick":"")+".json",o(i)?{data:i}:i,r),!0},dc=function(t,r,u,f){return n(null,t,i,"crm/contact/person/"+r+".json",u,f),!0},gc=function(t,r,u){var e=r&&(typeof r=="number"||typeof r=="string"),o=r&&typeof r=="object";return n(null,t,e?f:i,"crm/contact"+(e?"/"+r:"")+".json",o?{contactids:r}:null,u),!0},nl=function(t,r,u){return n(null,t,i,"crm/contact/merge.json",r,u),!0},tl=function(i,u,f){return n(r.getCrmContactsForProject,i,t,"crm/contact/project/"+u+".json",null,f)},il=function(t,i,r,f,e){return n(null,t,u,"crm/"+i+(typeof r=="object"?"/taglist":"/"+r+"/tag")+".json",{entityid:r,tagName:f},e),!0},rl=function(t,i,r,f,e){return n(null,t,u,"crm/"+i+"/"+r+"/tag/group.json",{entityid:r,entityType:i,tagName:f},e),!0},ul=function(t,i,r,u,e){return n(null,t,f,"crm/"+i+"/"+r+"/tag/group.json",{entityid:r,entityType:i,tagName:u},e),!0},fl=function(t,i,r,u,e){return n(null,t,f,"crm/"+i+"/"+r+"/tag.json",{tagName:u},e),!0},el=function(i,r,u,f){return n(null,i,t,"crm/"+r+"/"+u+"/tag.json",null,f)},ol=function(i,r,u){return n(null,i,t,"crm/"+r+"/tag.json",null,u),!0},sl=function(t,i,r,f){return n(null,t,u,"crm/"+i+"/tag.json",{entityType:i,tagName:r},f),!0},hl=function(t,i,r,u){return n(null,t,f,"crm/"+i+"/tag.json",{tagName:r},u),!0},cl=function(t,i,r){return n(null,t,f,"crm/"+i+"/tag/unused.json",null,r),!0},ll=function(i,r,u){return n(null,i,t,"crm/"+r+"/customfield/definitions.json",null,u),!0},al=function(t,i,r,f){return n(null,t,u,"crm/"+i+"/customfield.json",r,f),!0},vl=function(t,r,u,f,e){return n(null,t,i,"crm/"+r+"/customfield/"+u+".json",f,e),!0},yl=function(t,i,r,u){return n(null,t,f,"crm/"+i+"/customfield/"+r+".json",null,u),!0},pl=function(t,r,u,f){return n(null,t,i,"crm/"+r+"/customfield/reorder.json",{fieldids:u,entityType:r},f),!0},wl=function(i,r){return n(null,i,t,"crm/opportunity/stage.json",null,r),!0},bl=function(t,i,r){return n(null,t,u,"crm/opportunity/stage.json",i,r),!0},kl=function(t,r,u,f){return n(null,t,i,"crm/opportunity/stage/"+r+".json",u,f),!0},dl=function(t,r,u,f){return n(null,t,i,"crm/opportunity/stage/"+r+"/color.json",u,f),!0},gl=function(t,i,r){return n(null,t,f,"crm/opportunity/stage/"+i+".json",null,r),!0},na=function(t,r,u){return n(null,t,i,"crm/opportunity/stage/reorder.json",{ids:r},u),!0},ta=function(t,i,r){return n(null,t,u,"crm/contact/status.json",i,r),!0},ia=function(t,r,u,f){return n(null,t,i,"crm/contact/status/"+r+".json",u,f),!0},ra=function(t,r,u,f){return n(null,t,i,"crm/contact/status/"+r+"/color.json",u,f),!0},ua=function(t,i,r){return n(null,t,f,"crm/contact/status/"+i+".json",null,r),!0},fa=function(t,i,r){return n(null,t,u,"crm/contact/type.json",i,r),!0},ea=function(t,r,u,f){return n(null,t,i,"crm/contact/type/"+r+".json",u,f),!0},oa=function(t,i,r){return n(null,t,f,"crm/contact/type/"+i+".json",null,r),!0},sa=function(i,r,u){var f="";switch(r){case 1:f="crm/contact/status.json";break;case 2:f="crm/task/category.json";break;case 3:f="crm/history/category.json";break;case 4:f="crm/contact/type.json";break;default:return!1}return n(null,i,t,f,null,u),!0},ha=function(t,i,r,f){var e="";switch(i){case 1:e="crm/contact/status.json";break;case 2:e="crm/task/category.json";break;case 3:e="crm/history/category.json";break;case 4:e="crm/contact/type.json";break;default:return!1}return n(null,t,u,e,r,f),!0},ca=function(t,r,u,f,e){var o="";switch(r){case 1:o="crm/contact/status/"+u+".json";break;case 2:o="crm/task/category/"+u+".json";break;case 3:o="crm/history/category/"+u+".json";break;case 4:o="crm/contact/type/"+u+".json";break;default:return!1}return n(null,t,i,o,f,e),!0},la=function(t,r,u,f,e){var o="";switch(r){case 2:o="crm/task/category/"+u+"/icon.json";break;case 3:o="crm/history/category/"+u+"/icon.json";break;default:return!1}return n(null,t,i,o,f,e),!0},aa=function(t,i,r,u,e){var o="",s={newcategoryid:u};switch(i){case 1:o="crm/contact/status/"+r+".json";break;case 2:o="crm/task/category/"+r+".json";break;case 3:o="crm/history/category/"+r+".json";break;case 4:o="crm/contact/type/"+r+".json";break;default:return!1}return n(null,t,f,o,s,e),!0},va=function(t,r,u,f){var e="";switch(r){case 1:e="crm/contact/status/reorder.json";break;case 2:e="crm/task/category/reorder.json";break;case 3:e="crm/history/category/reorder.json";break;case 4:e="crm/contact/type/reorder.json";break;default:return!1}return n(null,t,i,e,{titles:u},f),!0},ya=function(t,i,r){return n(null,t,u,"crm/task.json",i,r),!0},pa=function(t,i,r){return n(null,t,u,"crm/contact/task/group.json",i,r),!0},wa=function(i,r,u){return n(null,i,t,"crm/task/"+r+".json",null,u)},ba=function(t,r,u,f){var e=u.hasOwnProperty("isClosed");return e?n(null,t,i,!u.isClosed?"crm/task/"+r+"/reopen.json":"crm/task/"+r+"/close.json",u,f):n(null,t,i,"crm/task/"+r+".json",u,f),!0},ka=function(t,i,r){return n(null,t,f,"crm/task/"+i+".json",null,r),!0},da=function(t,i,f,e,o,s){n(r.addCrmContactForProject,t,u,"crm/contact/"+e+"/project/"+f+".json",o,s)},ga=function(t,i,r,f){n(null,t,u,"crm/contact/project/"+i+".json",r,f)},nv=function(t,i,u,e,o){n(r.removeCrmContactFromProject,t,f,"crm/contact/"+e+"/project/"+u+".json",null,o)},tv=function(t,i,r,f){n(null,t,u,"crm/contact/"+i+"/opportunity/"+r+".json",{contactid:i,opportunityid:r},f)},iv=function(t,i,r,u){n(null,t,f,"crm/contact/"+i+"/opportunity/"+r+".json",{contactid:i,opportunityid:r},u)},rv=function(t,i,r,f,e,o){n(null,t,u,"crm/"+i+"/"+r+"/contact"+(i==="opportunity"?"/"+f:"")+".json",e,o)},uv=function(t,i,r,u,e){n(null,t,f,"crm/"+i+"/"+r+"/contact/"+u+".json",null,e)},fv=function(i,r,u,f){return n(null,i,t,"crm/"+r+"/"+u+"/contact.json",null,f)},ev=function(t,i,r,f,e,o){n(null,t,u,"crm/contact/"+i+"/"+r+"/person.json",e,o)},ov=function(t,i,r,u,e){n(null,t,f,"crm/contact/"+i+"/"+r+"/person.json",{personid:u},e)},sv=function(i,r,u,f){return n(null,i,t,"crm/contact/"+r+"/"+u+"/person.json",null,f)},hv=function(n,t,i,r){var u=null;switch(t){case"company":u=sv;break;default:u=fv}return u?h(u(n,t,i,r)):!1},cv=function(n,t,i,r,u,f){var e=null;switch(t){case"company":e=ev;break;case"project":e=da;break;default:e=rv}return e?h(e(n,t,i,r,u,f)):!1},lv=function(n,t,i,r,u){var f=null;switch(t){case"company":f=ov;break;case"project":f=nv;break;default:f=uv}return f?h(f(n,t,i,r,u)):!1},av=function(i,r){return n(null,i,t,"crm/case/filter.json",null,r)},vv=function(i,r){return n(null,i,t,"crm/case/byprefix.json",null,r)},yv=function(t,r,u){var e=r&&(typeof r=="number"||typeof r=="string"),o=r&&typeof r=="object";return n(null,t,e?f:i,"crm/case"+(e?"/"+r:"")+".json",o?{casesids:r}:null,u),!0},pv=function(t,r,u,f){var e=u.hasOwnProperty("isClosed");return e?n(null,t,i,!u.isClosed?"crm/case/"+r+"/reopen.json":"crm/case/"+r+"/close.json",u,f):n(null,t,i,"crm/case/"+r+".json",u,f),!0},wv=function(i,r){return n(null,i,t,"crm/contact/filter.json",null,r)},bv=function(i,r){return n(null,i,t,"crm/contact/simple/filter.json",null,r)},kv=function(i,r,u){return n(null,i,t,"crm/contact/mail.json",typeof r=="number"||typeof r=="string"?{contactids:[r]}:r,u)},dv=function(i,r){return n(null,i,t,"crm/contact/byprefix.json",null,r)},gv=function(i,r,u){return n(null,i,t,"crm/contact/"+r+".json",null,u)},ny=function(i,r){return n(null,i,t,"crm/task/filter.json",null,r)},ty=function(i,r,u){return n(null,i,t,"crm/opportunity/"+r+".json",null,u)},iy=function(i,r,u){return n(null,i,t,"crm/case/"+r+".json",null,u)},ry=function(i,r,u){return n(null,i,t,"crm/contact/bycontactinfo.json",r,u)},uy=function(i,r){return n(null,i,t,"crm/opportunity/filter.json",null,r)},fy=function(i,r,u){return n(null,i,t,"crm/opportunity/bycontact/"+r+".json",null,u)},ey=function(i,r){return n(null,i,t,"crm/opportunity/byprefix.json",null,r)},oy=function(t,r,u){var e=r&&(typeof r=="number"||typeof r=="string"),o=r&&typeof r=="object";return n(null,t,e?f:i,"crm/opportunity"+(e?"/"+r:"")+".json",o?{opportunityids:r}:null,u),!0},sy=function(t,r,u,f){n(null,t,i,"crm/opportunity/"+r+"/stage/"+u+".json",{opportunityid:r,stageid:u},f)},hy=function(i,r,u){n(null,i,t,"crm/settings/currency/convert.json",r,u)},cy=function(i,r,u){n(null,i,t,"crm/settings/currency/summarytable.json",{currency:r},u)},ly=function(t,r,u){n(null,t,i,"crm/settings/currency.json",{currency:r},u)},ay=function(t,i,r,f){n(null,t,u,"crm/currency/setrates.json",{currency:i,rates:r},f)},vy=function(t,i,r){n(null,t,u,"crm/currency/addrates.json",{rates:i},r)},yy=function(t,r,u){n(null,t,i,"crm/contact/status/settings.json",{changeContactStatusGroupAuto:r},u)},py=function(t,r,u){n(null,t,i,"crm/contact/tag/settings.json",{addTagToContactGroupAuto:r},u)},wy=function(t,r,u){n(null,t,i,"crm/contact/mailtohistory/settings.json",{writeMailToHistoryAuto:r},u)},by=function(t,r,u){n(null,t,i,"crm/settings/organisation/base.json",{companyName:r},u)},ky=function(t,r,u){n(null,t,i,"crm/settings/organisation/address.json",{companyAddress:r},u)},dy=function(t,r,u){n(null,t,i,"crm/settings/organisation/logo.json",r,u)},gy=function(i,r,u){n(null,i,t,"crm/settings/organisation/logo.json",{id:r},u)},np=function(t,r){return n(null,t,i,"crm/settings/webformkey/change.json",null,r)},tp=function(t,r,u){n(null,t,i,"crm/settings/smtp.json",r,u)},ip=function(t,i,r){n(null,t,u,"crm/settings/testmail.json",i,r)},rp=function(t,i,r){n(null,t,u,"crm/contact/mailsmtp/send.json",i,r)},up=function(t,i,r){n(null,t,u,"crm/contact/mailsmtp/preview.json",i,r)},fp=function(i,r){n(null,i,t,"crm/contact/mailsmtp/status.json",null,r)},ep=function(t,r){n(null,t,i,"crm/contact/mailsmtp/cancel.json",null,r)},op=function(t,i,r){n(null,t,u,"crm/history.json",i,r)},sp=function(t,i,r){n(null,t,f,"crm/history/"+i+".json",null,r)},hp=function(i,r){return n(null,i,t,"crm/history/filter.json",null,r)},cp=function(t,i,r){return n(null,t,f,"crm/files/"+i+".json",null,r),!0},lp=function(i,r,u){return n(null,i,t,"crm/files/"+r+".json",null,u)},ap=function(t,r,u,f){return u&&f||(f=u,u=r,r=null),n(null,t,i,"crm/contact"+(r?"/"+r:"")+"/access.json",u,f),!0},vp=function(t,r,u,f){return u&&f||(f=u,u=r,r=null),n(null,t,i,"crm/case"+(r?"/"+r:"")+"/access.json",u,f),!0},yp=function(t,r,u,f){return u&&f||(f=u,u=r,r=null),n(null,t,i,"crm/opportunity"+(r?"/"+r:"")+"/access.json",u,f),!0},pp=function(t,i,r,f,e){return f&&typeof f=="object"&&!f.hasOwnProperty("entityType")&&(f.entityType=r),n(null,t,u,"crm"+(r?"/"+r:"")+"/"+i+"/files.json",o(f)?{entityType:r,entityid:i,fileids:f}:f,e),!0},wp=function(t,i,r){return n(null,t,f,"crm/files/"+i+".json",null,r),!0},bp=function(i,r,u,f){return n(null,i,t,"crm"+(u?"/"+u:"")+"/"+r+"/files.json",null,f)},kp=function(i,r){return n(null,i,t,"crm/task/category.json",null,r)},dp=function(t,i,r){return n(null,t,u,"crm/"+i.entityType+"/tasktemplatecontainer.json",i,r),!0},gp=function(t,r,u,f){return n(null,t,i,"crm/tasktemplatecontainer/"+r+".json",u,f),!0},nw=function(t,i,r){return n(null,t,f,"crm/tasktemplatecontainer/"+i+".json",null,r),!0},tw=function(i,r,u){return n(null,i,t,"crm/tasktemplatecontainer/"+r+".json",null,u)},iw=function(i,r,u){return n(null,i,t,"crm/"+r+"/tasktemplatecontainer.json",null,u)},rw=function(t,i,r){return n(null,t,u,"crm/tasktemplatecontainer/"+i.containerid+"/tasktemplate.json",i,r),!0},uw=function(t,r,u){return n(null,t,i,"crm/tasktemplatecontainer/"+r.containerid+"/tasktemplate.json",r,u),!0},fw=function(t,i,r){return n(null,t,f,"crm/tasktemplatecontainer/tasktemplate/"+i+".json",null,r),!0},ew=function(i,r,u){return n(null,i,t,"crm/tasktemplatecontainer/tasktemplate/"+r+".json",null,u)},ow=function(i,r,u){return n(null,i,t,"crm/tasktemplatecontainer/"+r+"/tasktemplate.json",null,u)},sw=function(i,r){return n(null,i,t,"crm/invoice/filter.json",null,r)},hw=function(i,r,u,f){return n(null,i,t,"crm/"+r+"/invoicelist/"+u+".json",null,f)},cw=function(t,r,u,f){return n(null,t,i,"crm/invoice/status/"+r+".json",{invoiceids:u},f)},lw=function(i,r,u){return n(null,i,t,"crm/invoice/bynumber.json",{number:r},u)},aw=function(i,r,u){return n(null,i,t,"crm/invoice/bynumber/exist.json",{number:r},u)},vw=function(i,r){return n(null,i,t,"crm/invoiceitem/filter.json",null,r)},yw=function(t,i,r){return n(null,t,u,"crm/invoiceitem.json",i,r),!0},pw=function(t,r,u,f){return n(null,t,i,"crm/invoiceitem/"+r+".json",u,f),!0},ww=function(t,i,r){return n(null,t,f,"crm/invoiceitem"+(i&&(typeof i=="number"||typeof i=="string")?"/"+i:"")+".json",i&&typeof i=="object"?{ids:i}:null,r),!0},bw=function(i,r){return n(null,i,t,"crm/invoice/tax.json",null,r)},kw=function(t,i,r){return n(null,t,u,"crm/invoice/tax.json",i,r),!0},dw=function(t,r,u,f){return n(null,t,i,"crm/invoice/tax/"+r+".json",u,f),!0},gw=function(t,i,r){return n(null,t,f,"crm/invoice/tax/"+i+".json",null,r),!0},nb=function(i,r,u){return n(null,i,t,"crm/invoice/"+r+".json",null,u)},tb=function(i,r){return n(null,i,t,"crm/invoice/sample.json",null,r)},ib=function(i,r,u){return n(null,i,t,"crm/invoice/jsondata/"+r+".json",null,u)},rb=function(t,i,r){return n(null,t,u,"crm/invoice.json",i,r),!0},ub=function(t,r,u,f){return n(null,t,i,"crm/invoice/"+r+".json",u,f),!0},fb=function(t,i,r){return n(null,t,f,"crm/invoice"+(i&&(typeof i=="number"||typeof i=="string")?"/"+i:"")+".json",i&&typeof i=="object"?{invoiceids:i}:null,r),!0},eb=function(i,r,u){return n(null,i,t,"crm/invoice/"+r+"/pdf.json",null,u),!0},ob=function(t,i,r){return n(null,t,u,"crm/invoice/converter/data.json",i,r),!0},sb=function(t,i,r){return n(null,t,u,"crm/invoiceline.json",i,r),!0},hb=function(t,r,u,f){return n(null,t,i,"crm/invoiceline/"+r+".json",u,f),!0},cb=function(t,i,r){return n(null,t,f,"crm/invoiceline/"+i+".json",null,r),!0},lb=function(i,r){return n(null,i,t,"crm/invoice/settings.json",null,r)},ab=function(t,r,u){return n(null,t,i,"crm/invoice/settings/name.json",r,u),!0},vb=function(t,r,u){return n(null,t,i,"crm/invoice/settings/terms.json",r,u),!0},yb=function(i,r){return n(null,i,t,"crm/currency/rates.json",null,r)},pb=function(i,r,u){return n(null,i,t,"crm/currency/rates/"+r+".json",null,u),!0},wb=function(i,r,u,f){return n(null,i,t,"crm/currency/rates/"+r+"/"+u+".json",null,f),!0},bb=function(t,i,r){return n(null,t,u,"crm/currency/rates.json",i,r),!0},kb=function(t,r,u,f){return n(null,t,i,"crm/currency/rates/"+r+".json",u,f),!0},db=function(t,i,r){return n(null,t,f,"crm/currency/rates/"+i+".json",null,r),!0},gb=function(i,r,u,f){return n(null,i,t,"crm/contact/"+r+"/tweets.json",{contactid:r,count:u},f)},nk=function(i,r,u){return n(null,i,t,"crm/contact/twitterprofile.json",{searchText:r},u)},tk=function(i,r,u,f){return n(null,i,t,"crm/contact/facebookprofile.json",{searchText:r,isUser:u},f)},ik=function(t,i,r,u){return n(null,t,f,"crm/contact/"+i+"/avatar.json",r,u)},rk=function(t,r,u,f){return n(null,t,i,"crm/contact/"+r+"/avatar.json",u,f)},uk=function(t,i,r){return n(null,t,u,"crm/contact/socialmediaavatar.json",{socialNetworks:i},r)},fk=function(t,i,r){return n(null,t,u,"crm/"+i.entityType+"/import/start.json",i,r),!0},ek=function(i,r,u){return n(null,i,t,"crm/"+r.entityType+"/import/status.json",r,u),!0},ok=function(i,r,u){return n(null,i,t,"crm/import/samplerow.json",r,u),!0},sk=function(t,i,r){return n(null,t,u,"crm/import/uploadfake.json",i,r),!0},hk=function(i,r){n(null,i,t,"crm/export/status.json",null,r)},ck=function(t,r){n(null,t,i,"crm/export/cancel.json",null,r)},lk=function(t,i){return n(null,t,u,"crm/export/start.json",null,i),!0},ak=function(i,r){return n(null,i,t,"crm/voip/numbers/available.json",null,r),!0},vk=function(i,r){return n(null,i,t,"crm/voip/numbers/existing.json",null,r),!0},yk=function(i,r){return n(null,i,t,"crm/voip/numbers/unlinked.json",null,r),!0},pk=function(i,r){return n(null,i,t,"crm/voip/numbers/current.json",null,r),!0},wk=function(t,i,r){return n(null,t,u,"crm/voip/numbers.json",i,r),!0},bk=function(t,i,r){return n(null,t,u,"crm/voip/numbers/link.json",i,r),!0},kk=function(t,i,r){return n(null,t,f,"crm/voip/numbers/"+i+".json",null,r),!0},dk=function(t,r,u,f){return n(null,t,i,"crm/voip/numbers/"+r+"/settings.json",u,f),!0},gk=function(t,r,u){return n(null,t,i,"crm/voip/numbers/settings.json",r,u),!0},nd=function(i,r){return n(null,i,t,"crm/voip/numbers/settings.json",null,r),!0},td=function(i,r,u){return n(null,i,t,"crm/voip/numbers/"+r+"/oper.json",null,u),!0},id=function(t,r,u,f){return n(null,t,i,"crm/voip/numbers/"+r+"/oper.json",u,f),!0},rd=function(t,r,u,f){return n(null,t,i,"crm/voip/opers/"+r+".json",u,f),!0},ud=function(t,i,r,u){return n(null,t,f,"crm/voip/numbers/"+i+"/oper.json",r,u),!0},fd=function(t,i,r){return n(null,t,u,"crm/voip/call.json",i,r),!0},ed=function(t,i,r){return n(null,t,u,"crm/voip/call/"+i+"/answer.json",i,r),!0},od=function(t,i,r){return n(null,t,u,"crm/voip/call/"+i+"/reject.json",i,r),!0},sd=function(t,i,r,f){return n(null,t,u,"crm/voip/call/"+i+"/redirect.json",r,f),!0},hd=function(t,i,r,f){return n(null,t,u,"crm/voip/call/"+i+".json",r,f),!0},cd=function(t,i,r){return n(null,t,u,"crm/voip/price/"+i+".json",null,r),!0},ld=function(i,r){n(null,i,t,"crm/voip/call/missed.json",null,r)},ad=function(i,r,u){n(null,i,t,"crm/voip/call.json",r,u)},vd=function(i,r,u){n(null,i,t,"crm/voip/call/"+r+".json",null,u)},yd=function(i,r){return n(null,i,t,"crm/voip/token.json",null,r),!0},pd=function(i,r){return n(null,i,t,"crm/voip/uploads.json",null,r),!0},wd=function(t,i,r){return n(null,t,f,"crm/voip/uploads.json",i,r),!0},bd=function(i,r){return n(null,i,t,"crm/report/files.json",null,r)},kd=function(t,i,r){return n(null,t,f,"crm/report/file/"+i+".json",null,r),!0},dd=function(i,r){n(null,i,t,"crm/report/status.json",null,r)},gd=function(i,r){n(null,i,t,"crm/report/terminate.json",null,r)},ng=function(t,i,r){n(null,t,u,"crm/report/check.json",i,r)},tg=function(t,i,r){n(null,t,u,"crm/report/generate.json",i,r)},ig=function(i,u,f){return n(r.getMailFilteredMessages,i,t,"mail/messages.json",u,f)},rg=function(i,u){return n(r.getMailFolders,i,t,"mail/folders.json",null,u)},ug=function(i,u){return n(r.getAccounts,i,t,"mail/accounts.json",null,u)},fg=function(i,u){return n(r.getMailTags,i,t,"mail/tags.json",null,u)},eg=function(i,u,f,e){return n(r.getMailMessage,i,t,"mail/messages/"+u+".json",f,e)},og=function(i,u,f,e){return n(r.getMailboxSignature,i,t,"mail/signature/"+u+".json",f,e)},sg=function(t,i,f,e){return n(r.updateMailboxSignature,t,u,"mail/signature/update/"+i+".json",f,e)},hg=function(t,i,f,e){return n(r.updateMailboxAutoreply,t,u,"mail/autoreply/update/"+i+".json",f,e)},cg=function(i,u,f){return n(r.getLinkedCrmEntitiesInfo,i,t,"mail/crm/linked/entities.json",u,f)},lg=function(i,u,f,e){return n(r.getNextMailMessageId,i,t,"mail/messages/"+u+"/next.json"+(f?"?"+jq.param(f):""),null,e)},ag=function(i,u,f,e){return n(r.getPrevMailMessageId,i,t,"mail/messages/"+u+"/prev.json"+(f?"?"+jq.param(f):""),f,e)},vg=function(i,u,f,e){return n(r.getMailConversation,i,t,"mail/conversation/"+u+".json",f,e)},yg=function(i,u,f,e){return n(r.getNextMailConversationId,i,t,"mail/conversation/"+u+"/next.json"+(f?"?"+jq.param(f):""),f,e)},pg=function(i,u,f,e){return n(r.getPrevMailConversationId,i,t,"mail/conversation/"+u+"/prev.json"+(f?"?"+jq.param(f):""),f,e)},wg=function(t,i,u){return n(r.removeMailFolderMessages,t,f,"mail/folders/"+i+"/messages.json",null,u)},bg=function(t,u,f){return n(r.restoreMailMessages,t,i,"mail/messages/restore.json",u,f)},kg=function(t,u,f,e){return n(r.moveMailMessages,t,i,"mail/messages/move.json",{ids:u,folder:f},e)},dg=function(t,u,f){return n(r.removeMailMessages,t,i,"mail/messages/remove.json",{ids:u},f)},gg=function(t,u,f,e){return n(r.markMailMessages,t,i,"mail/messages/mark.json",{ids:u,status:f},e)},nn=function(t,i,f,e,o){return n(r.createMailTag,t,u,"mail/tags.json",{name:i,style:f,addresses:e},o)},tn=function(t,u,f,e,o,s){return n(r.updateMailTag,t,i,"mail/tags/"+u+".json",{name:f,style:e,addresses:o},s)},rn=function(t,i,u){return n(r.removeMailTag,t,f,"mail/tags/"+i+".json",null,u)},un=function(t,u,f,e){return n(r.setMailTag,t,i,"mail/tags/"+f+"/set.json",{messages:u},e)},fn=function(t,u,f,e){return n(r.setMailConversationsTag,t,i,"mail/conversations/tag/"+f+"/set.json",{messages:u},e)},en=function(t,u,f,e){return n(r.unsetMailTag,t,i,"mail/tags/"+f+"/unset.json",{messages:u},e)},on=function(t,u,f,e){return n(r.unsetMailConversationsTag,t,i,"mail/conversations/tag/"+f+"/unset.json",{messages:u},e)},sn=function(t,i,f,e){return n(r.addMailDocument,t,u,"mail/messages/"+i+"/document.json",f,e)},hn=function(t,i,u){return n(r.removeMailMailbox,t,f,"mail/accounts.json",{email:i},u)},cn=function(i,u,f){return n(r.getMailDefaultMailboxSettings,i,t,"mail/accounts/setups.json",{email:u,action:i.action},f)},ln=function(i,u,f){return n(r.getMailMailbox,i,t,"mail/accounts/single.json",{email:u},f)},an=function(t,u,f,e){return n(r.setDefaultAccount,t,i,"mail/accounts/default.json",{email:f,isDefault:u},e)},vn=function(t,i,f,e){return n(r.createMailMailboxSimple,t,u,"mail/accounts/simple.json",{email:i,password:f},e)},yn=function(t,i,f,e){return n(r.createMailMailboxOAuth,t,u,"mail/accounts/oauth.json",{code:i,type:f},e)},pn=function(t,u,f,e,o){return n(r.updateMailMailboxOAuth,t,i,"mail/accounts/oauth.json",{code:u,type:f,mailboxId:e},o)},wn=function(t,i,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var tt={name:i,email:f,account:e,password:o,port:s,server:h,smtp_account:c,smtp_password:l,smtp_port:a,smtp_server:v,smtp_auth:y,imap:p,restrict:w,incoming_encryption_type:b,outcoming_encryption_type:k,auth_type_in:d,auth_type_smtp:g};return n(r.createMailMailbox,t,u,"mail/accounts.json",tt,nt)},bn=function(t,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){var nt={name:u,email:f,account:e,password:o,port:s,server:h,smtp_account:c,smtp_password:l,smtp_port:a,smtp_server:v,smtp_auth:y,restrict:p,incoming_encryption_type:w,outcoming_encryption_type:b,auth_type_in:k,auth_type_smtp:d};return n(r.updateMailMailbox,t,i,"mail/accounts.json",nt,g)},kn=function(t,u,f,e){return n(r.setMailMailboxState,t,i,"mail/accounts/state.json",{email:u,state:f},e)},dn=function(t,i,u,e){return n(r.removeMailMessageAttachment,t,f,"mail/messages/"+i+"/attachments/"+u+".json",null,e)},gn=function(t,u,f){return(u instanceof ASC.Mail.Message)?n(r.sendMailMessage,t,i,"mail/messages/send.json",u.ToData(),f):(console.error("Unsupported message format"),null)},ntt=function(t,u,f){return(u instanceof ASC.Mail.Message)?n(r.saveMailMessage,t,i,"mail/messages/save.json",u.ToData(),f):(console.error("Unsupported message format"),null)},ttt=function(i,u,f){return n(r.searchEmails,i,t,"mail/emails/search.json",u,f)},itt=function(i,u,f){return n(r.getMailContacts,i,t,"mail/contacts.json",u,f)},rtt=function(i,u,f){return n(r.getMailContactsByInfo,i,t,"mail/contacts/bycontactinfo.json",u,f)},utt=function(t,i,f,e,o,s){return n(r.createMailContact,t,u,"mail/contact/add.json",{name:i,description:f,emails:e,phoneNumbers:o},s)},ftt=function(t,u,f){return n(r.deleteMailContacts,t,i,"mail/contacts/remove.json",{ids:u},f)},ett=function(t,u,f,e,o,s,h){return n(r.updateMailContact,t,i,"mail/contact/update.json",{id:u,name:f,description:e,emails:o,phoneNumbers:s},h)},ott=function(i,u){return n(r.getMailAlerts,i,t,"mail/alert.json",null,u)},stt=function(t,i,u){return n(r.deleteMailAlert,t,f,"mail/alert/"+i+".json",null,u)},htt=function(i,u,f){return n(r.getMailFilteredConversations,i,t,"mail/conversations.json",u,f)},ctt=function(t,u,f,e){return n(r.moveMailConversations,t,i,"mail/conversations/move.json",{ids:u,folder:f},e)},ltt=function(t,u,f){return n(r.restoreMailConversations,t,i,"mail/conversations/restore.json",u,f)},att=function(t,u,f){return n(r.removeMailConversations,t,i,"mail/conversations/remove.json",{ids:u},f)},vtt=function(t,u,f,e){return n(r.markMailConversations,t,i,"mail/conversations/mark.json",{ids:u,status:f},e)},ytt=function(i,u){return n(r.getMailDisplayImagesAddresses,i,t,"mail/display_images/addresses.json",null,u)},ptt=function(t,i,f){return n(r.createDisplayImagesAddress,t,u,"mail/display_images/address.json",{address:i},f)},wtt=function(t,i,u){return n(r.removeDisplayImagesAddress,t,f,"mail/display_images/address.json",{address:i},u)},btt=function(t,u,f,e){return n(r.linkChainToCrm,t,i,"mail/conversations/crm/link.json",{id_message:u,crm_contact_ids:f},e)},ktt=function(t,u,f,e){return n(r.markChainAsCrmLinked,t,i,"mail/conversations/crm/mark.json",{id_message:u,crm_contact_ids:f},e)},dtt=function(t,u,f,e){return n(r.unmarkChainAsCrmLinked,t,i,"mail/conversations/crm/unmark.json",{id_message:u,crm_contact_ids:f},e)},gtt=function(t,u,f,e){return n(r.exportMessageToCrm,t,i,"mail/messages/crm/export.json",{id_message:u,crm_contact_ids:f},e)},nit=function(i,u,f){return n(r.isConversationLinkedWithCrm,i,t,"mail/conversations/link/crm/status.json",{message_id:u},f)},tit=function(i,u){return n(r.getMailHelpCenterHtml,i,t,"mail/helpcenter.json",null,u)},iit=function(t,u,f){return n(r.exportAllAttachmentsToMyDocuments,t,i,"mail/messages/attachments/export.json",{id_message:u},f)},rit=function(t,u,f,e){return n(r.exportAllAttachmentsToDocuments,t,i,"mail/messages/attachments/export.json",{id_message:u,id_folder:f},e)},uit=function(t,u,f){return n(r.exportAttachmentToMyDocuments,t,i,"mail/messages/attachment/export.json",{id_attachment:u},f)},fit=function(t,u,f,e){return n(r.exportAttachmentToDocuments,t,i,"mail/messages/attachment/export.json",{id_attachment:u,id_folder:f},e)},eit=function(t,u,f,e){return n(r.setEMailInFolder,t,i,"mail/accounts/emailinfolder.json",{mailbox_id:u,email_in_folder:f},e)},oit=function(i,u){return n(r.getMailServer,i,t,"mailserver/server.json",null,u)},sit=function(i,u){return n(r.getMailServerFullInfo,i,t,"mailserver/serverinfo/get.json",null,u)},hit=function(i,u){return n(r.getMailServerFreeDns,i,t,"mailserver/freedns/get.json",null,u)},cit=function(i,u){return n(r.getMailDomains,i,t,"mailserver/domains/get.json",null,u)},lit=function(i,u){return n(r.getCommonMailDomain,i,t,"mailserver/domains/common.json",null,u)},ait=function(t,i,f,e){return n(r.addMailDomain,t,u,"mailserver/domains/add.json",{name:i,id_dns:f},e)},vit=function(t,i,u){return n(r.removeMailDomain,t,f,"mailserver/domains/remove/"+i+".json",null,u)},yit=function(t,i,f,e,o,s){return n(r.addMailbox,t,u,"mailserver/mailboxes/add.json",{name:i,local_part:f,domain_id:e,user_id:o},s)},pit=function(t,i,f){return n(r.addMyMailbox,t,u,"mailserver/mailboxes/addmy.json",{name:i},f)},wit=function(i,u){return n(r.getMailboxes,i,t,"mailserver/mailboxes/get.json",null,u)},bit=function(t,i,u){return n(r.removeMailbox,t,f,"mailserver/mailboxes/remove/"+i+".json",null,u)},kit=function(t,u,f,e){return n(r.updateMailbox,t,i,"mailserver/mailboxes/update.json",{mailbox_id:u,name:f},e)},dit=function(t,u,f,e){return n(r.addMailBoxAlias,t,i,"mailserver/mailboxes/alias/add.json",{mailbox_id:u,alias_name:f},e)},git=function(t,u,f,e){return n(r.removeMailBoxAlias,t,i,"mailserver/mailboxes/alias/remove.json",{mailbox_id:u,address_id:f},e)},nrt=function(t,i,f,e,o){return n(r.addMailGroup,t,u,"mailserver/groupaddress/add.json",{name:i,domain_id:f,address_ids:e},o)},trt=function(t,u,f,e){return n(r.addMailGroupAddress,t,i,"mailserver/groupaddress/address/add.json",{mailgroup_id:u,address_id:f},e)},irt=function(t,i,u,e){return n(r.removeMailGroupAddress,t,f,"mailserver/groupaddress/addresses/remove.json",{mailgroup_id:i,address_id:u},e)},rrt=function(i,u){return n(r.getMailGroups,i,t,"mailserver/groupaddress/get.json",null,u)},urt=function(t,i,u){return n(r.removeMailGroup,t,f,"mailserver/groupaddress/remove/"+i+".json",null,u)},frt=function(i,u,f){return n(r.isDomainExists,i,t,"mailserver/domains/exists.json",{name:u},f)},ert=function(i,u,f){return n(r.checkDomainOwnership,i,t,"mailserver/domains/ownership/check.json",{name:u},f)},ort=function(i,u,f){return n(r.getDomainDnsSettings,i,t,"mailserver/domains/dns/get.json",{id:u},f)},srt=function(t,i,f,e,o){return n(r.createNotificationAddress,t,u,"mailserver/notification/address/add.json",{name:i,password:f,domain_id:e},o)},hrt=function(t,i,u){return n(r.removeNotificationAddress,t,f,"mailserver/notification/address/remove.json",{address:i},u)},crt=function(t,i,f,e){return n(r.addCalendarBody,t,u,"mail/messages/calendarbody/add",{id_message:i,ical_body:f},e)},lrt=function(t,u,f){return n(r.setMailConversationEnabledFlag,t,i,"mail/settings/conversationsEnabled",{enabled:u},f)},art=function(t,u,f){return n(r.setMailAlwaysDisplayImagesFlag,t,i,"mail/settings/alwaysDisplayImages",{enabled:u},f)},vrt=function(t,u,f){return n(r.setMailCacheUnreadMessagesFlag,t,i,"mail/settings/cacheMessagesEnabled",{enabled:u},f)},yrt=function(t,u,f){return n(r.setMailEnableGoNextAfterMove,t,i,"mail/settings/goNextAfterMoveEnabled",{enabled:u},f)},prt=function(i,r){return n(null,i,t,"mail/mailservice/get.json",null,r)},wrt=function(t,i,r,f,e,o){return n(null,t,u,"mail/mailservice/connect.json",{ip:i,sqlip:r,user:f,password:e},o)},brt=function(t,i,r,f,e,o,s,h){return n(null,t,u,"mail/mailservice/save.json",{ip:i,sqlip:r,user:f,password:e,token:o,host:s},h)},krt=function(i,u,f){return n(r.getMailOperationStatus,null,t,"mail/operations/"+u+".json",null,f)},drt=function(i,r,u){return n(null,i,t,"settings/security.json",typeof r=="number"||typeof r=="string"?{ids:[r]}:r,u)},grt=function(t,r,u){return n(null,t,i,"settings/security.json",r,u)},nut=function(t,r,u){return n(null,t,i,"settings/security/access.json",r,u)},tut=function(t,r,u){return n(null,t,i,"settings/security/administrator.json",r,u)},iut=function(i,r,u){return n(null,i,t,"settings/security/administrator.json",r,u)},rut=function(i,r){return n(null,i,t,"settings.json",null,r)},uut=function(i,r){return n(null,i,t,"settings/logo.json",null,r)},fut=function(i){return n(null,null,t,"settings/iprestrictions.json",null,i)},eut=function(t,r){return n(null,null,i,"settings/iprestrictions.json",t,r)},out=function(t,r){return n(null,null,i,"settings/iprestrictions/settings.json",t,r)},sut=function(t,r){return n(null,null,i,"settings/tips.json",t,r)},hut=function(t,r){return n(null,null,i,"settings/sms.json",{enable:t},r)},cut=function(){return n(null,null,i,"settings/welcome/close.json",null,null)},lut=function(t,r,u){return n(null,t,i,"settings/colortheme.json",{theme:r},u)},aut=function(t,r,u){return n(null,null,i,"settings/timeandlanguage.json",{lng:t,timeZoneID:r},u)},vut=function(t,r,u){return n(null,t,i,"settings/defaultpage.json",{defaultProductID:r},u)},yut=function(t,i,r){return n(null,t,u,"settings/ldap.json",{settings:i},r),!0},put=function(i,r){return n(null,i,t,"settings/ldap.json",null,r),!0},wut=function(i,r){return n(null,i,t,"settings/ldap/default.json",null,r),!0},but=function(i,r){return n(null,i,t,"settings/ldap/status.json",null,r),!0},kut=function(i,r){return n(null,i,t,"settings/ldap/sync.json",null,r),!0},dut=function(i){return n(null,null,t,"security/audit/login/last.json",null,i)},gut=function(i,r,u){return n(null,i,t,"security/audit/events/last.json",null,u)},nft=function(t,i){return n(null,t,u,"security/audit/login/report.json",null,i)},tft=function(t,i){return n(null,t,u,"security/audit/events/report.json",null,i)},ift=function(i,u){return n(r.getTalkUnreadMessages,i,t,"portal/talk/unreadmessages.json",null,u),!0},rft=function(t,i){return n(null,null,u,"authentication/register.json",t,i),!0},uft=function(t,i,r){return n(null,t,u,"settings/whitelabel/save.json",i,r),!0},fft=function(t,r){return n(null,t,i,"settings/whitelabel/restore.json",null,r),!0},eft=function(i,r){return n(null,i,t,"settings/customnavigation/getall.json",null,r),!0},oft=function(i,r){return n(null,i,t,"settings/customnavigation/getsample.json",null,r),!0},sft=function(i,r,u){return n(null,i,t,"settings/customnavigation/get/"+r+".json",null,u),!0},hft=function(t,i,r){return n(null,t,u,"settings/customnavigation/create.json",i,r),!0},cft=function(t,i,r){return n(null,t,f,"settings/customnavigation/delete/"+i+".json",null,r),!0},lft=function(i,r,u,f){var e=r instanceof Date?Teamlab.serializeTimestamp(r,!0):r,o=u instanceof Date?Teamlab.serializeTimestamp(u,!0):u;return n(null,i,t,"calendar/calendars/"+e+"/"+o+".json",null,f),!0},aft=function(i,r,u){return n(null,i,t,"calendar/events/{0}/historybyuid.json".format(r),null,u),!0},vft=function(i,r,u){return n(null,i,t,"calendar/events/{0}/historybyid.json".format(r),null,u),!0},yft=function(t,i,r,f){return n(null,t,u,"calendar/importIcs.json",{iCalString:r,calendarId:i},f),!0},pft=function(i,r){return n(null,i,t,"portal/bar/promotions.json",{domain:window.location.hostname,page:window.location.pathname+window.location.search},r)},wft=function(t,i,r){return n(null,t,u,"portal/bar/promotions/mark/{0}.json".format(i),{id:i},r)},bft=function(i,r){return n(null,i,t,"portal/bar/tips.json",{page:window.location.pathname+window.location.search+window.location.hash,productAdmin:ASC.Resources.Master.IsProductAdmin},r)},kft=function(t,i,r){return n(null,t,u,"portal/bar/tips/mark/{0}.json".format(i),{id:i},r)},dft=function(t,i){return n(r.removeNotificationAddress,t,f,"portal/bar/tips.json",null,i)},gft=function(i,r,u){return n(null,i,t,"people/reassign/progress.json",{userId:r},u),!0},net=function(t,r,u){return n(null,t,i,"people/reassign/terminate.json",{userId:r},u),!0},tet=function(t,i,r,f){return n(null,t,u,"people/reassign/start.json",{fromUserId:i,toUserId:r},f),!0},iet=function(i,r,u){return n(null,i,t,"people/remove/progress.json",{userId:r},u),!0},ret=function(t,r,u){return n(null,t,i,"people/remove/terminate.json",{userId:r},u),!0},uet=function(t,i,r){return n(null,t,u,"people/remove/start.json",{userId:i},r),!0};return{events:r,profile:ServiceFactory.profile,constants:{dateFormats:ServiceFactory.dateFormats,contactTypes:ServiceFactory.contactTypes,nameCollections:ServiceFactory.nameCollections},create:ServiceFactory.create,formattingDate:ServiceFactory.formattingDate,serializeDate:ServiceFactory.serializeDate,serializeTimestamp:ServiceFactory.serializeTimestamp,getDisplayTime:ServiceFactory.getDisplayTime,getDisplayDate:ServiceFactory.getDisplayDate,getDisplayDatetime:ServiceFactory.getDisplayDatetime,sortCommentsByTree:ServiceFactory.sortCommentsByTree,joint:p,start:w,init:it,bind:rt,unbind:ut,call:y,getQuotas:st,recalculateQuota:ht,checkRecalculateQuota:ct,remindPwd:lt,thirdPartyLinkAccount:at,thirdPartyUnLinkAccount:vt,addProfile:yt,getProfile:pt,getProfiles:wt,getProfilesByFilter:bt,addGroup:kt,updateGroup:ni,getGroup:dt,getGroups:gt,deleteGroup:ti,updateProfile:ii,updateUserType:ri,updateUserStatus:ui,updateUserPhoto:fi,removeUserPhoto:ei,sendInvite:oi,removeUser:si,removeUsers:hi,getUserGroups:ci,removeSelf:li,joinAffiliate:ai,addCmtBlog:vi,getCmtBlog:yi,getCmtBlogs:pi,addCmtForumTopic:wi,getCmtForumTopic:bi,getCmtForumTopics:ki,getCmtForumCategories:di,addCmtForumToCategory:gi,addCmtEvent:nr,getCmtEvent:tr,getCmtEvents:ir,addCmtBookmark:rr,getCmtBookmark:ur,getCmtBookmarks:fr,addCmtForumTopicPost:er,addCmtBlogComment:or,getCmtBlogComments:sr,addCmtEventComment:hr,getCmtEventComments:cr,subscribeCmtEventComment:lr,addCmtBookmarkComment:ar,getCmtBookmarkComments:vr,subscribeCmtBirthday:yr,getCmtPreview:pr,subscribeProject:wr,getFeeds:br,getNewFeedsCount:kr,readFeeds:dr,getPrjTags:tu,getPrjTagsByName:ru,getPrjComments:uu,addPrjTaskComment:be,getPrjTaskComments:ke,addPrjDiscussionComment:de,getPrjDiscussionComments:b,getPrjDiscussionPreview:ge,getPrjCommentPreview:no,getWikiCommentPreview:to,getBlogCommentPreview:io,getNewsCommentPreview:ro,getBookmarksCommentPreview:uo,removePrjComment:fo,removeWikiComment:eo,removeBlogComment:oo,removeNewsComment:so,removeBookmarksComment:ho,addPrjComment:co,addWikiComment:lo,addBlogComment:ao,addNewsComment:vo,addBookmarksComment:yo,updatePrjComment:po,updateWikiComment:wo,updateBlogComment:bo,updateNewsComment:ko,updateBookmarksComment:go,fckeRemoveCommentComplete:ns,fckeCancelCommentComplete:ts,fckeEditCommentComplete:is,getShortenLink:rs,updatePortalName:us,updatePrjSettings:gr,getPrjSettings:nu,getPrjSecurityinfo:iu,addPrjEntityFiles:cf,uploadFilesToPrjEntity:lh,removePrjEntityFiles:lf,getPrjEntityFiles:af,addPrjSubtask:fu,copyPrjSubtask:eu,updatePrjSubtask:ou,updatePrjTask:au,updatePrjTasksStatus:yu,updatePrjTasksMilestone:vu,removePrjSubtask:su,addPrjTask:hu,copyPrjTask:cu,getPrjTask:bu,addPrjTaskByMessage:lu,getPrjTasks:du,getPrjTasksSimpleFilter:gu,getPrjTasksById:ku,addPrjMilestone:vf,updatePrjMilestone:yf,removePrjMilestone:pf,removePrjMilestones:wf,getPrjMilestone:bf,getPrjMilestones:kf,addPrjDiscussion:df,updatePrjDiscussion:gf,updatePrjDiscussionStatus:ne,removePrjDiscussion:te,getPrjDiscussion:ie,getPrjDiscussions:re,subscribeToPrjDiscussion:ue,getSubscribesToPrjDiscussion:fe,addPrjProject:ee,updatePrjProject:oe,updatePrjProjectStatus:se,removePrjProject:he,followingPrjProject:ce,getPrjProject:le,getPrjProjects:a,getPrjTaskFiles:nf,subscribeToPrjTask:tf,notifyPrjTaskResponsible:rf,addPrjTaskLink:uf,removePrjTaskLink:ff,getPrjGanttIndex:hs,setPrjGanttIndex:cs,getPrjProjectFolder:hf,getPrjSelfProjects:ae,getPrjFollowProjects:ve,getProjectsForCrmContact:ye,addProjectForCrmContact:pe,removeProjectFromCrmContact:we,getPrjTeam:ef,updatePrjTeam:of,addPrjProjectTeamPerson:fs,removePrjProjectTeamPerson:es,getPrjProjectTeamPersons:os,setTeamSecurity:sf,getPrjProjectFiles:ss,addPrjTime:ls,getPrjTime:as,getPrjTaskTime:k,getPrjTimeById:vs,getTotalTimeByFilter:ys,updatePrjTime:ps,removePrjTime:bs,changePaymentStatus:ws,getPrjTemplates:ks,getPrjTemplate:ds,updatePrjTemplate:gs,createPrjTemplate:nh,removePrjTemplate:th,getPrjActivities:ih,addPrjImport:uh,getPrjImport:fh,getPrjImportProjects:eh,checkPrjImportQuota:rh,getPrjReportTemplate:oh,addPrjReportTemplate:sh,updatePrjReportTemplate:hh,deletePrjReportTemplate:ch,createDocUploadFile:ah,addDocFile:vh,removeDocFile:bh,getDocFile:yh,addDocFolder:ph,getDocFolder:wh,createDocUploadSession:kh,getFolderPath:dh,getFileSecurityInfo:gh,generateSharedLink:nc,copyBatchItems:tc,getOperationStatuses:ic,getPresignedUri:rc,saveDocServiceUrl:uc,createCrmUploadFile:fc,getCrmContactInfo:ec,addCrmContactInfo:oc,updateCrmContactInfo:sc,deleteCrmContactInfo:hc,addCrmContactData:cc,updateCrmContactData:lc,addCrmContactTwitter:ac,addCrmEntityNote:vc,addCrmContact:yc,addCrmCompany:d,updateCrmCompany:pc,updateCrmContactContactStatus:kc,updateCrmCompanyContactStatus:wc,updateCrmPersonContactStatus:bc,addCrmPerson:g,updateCrmPerson:dc,removeCrmContact:gc,mergeCrmContacts:nl,addCrmTag:il,addCrmContactTagToGroup:rl,deleteCrmContactTagFromGroup:ul,addCrmEntityTag:sl,removeCrmTag:fl,removeCrmEntityTag:hl,removeCrmUnusedTag:cl,getCrmCustomFields:ll,addCrmCustomField:al,updateCrmCustomField:vl,removeCrmCustomField:yl,reorderCrmCustomFields:pl,getCrmDealMilestones:wl,addCrmDealMilestone:bl,updateCrmDealMilestone:kl,updateCrmDealMilestoneColor:dl,removeCrmDealMilestone:gl,reorderCrmDealMilestones:na,addCrmContactStatus:ta,updateCrmContactStatus:ia,updateCrmContactStatusColor:ra,removeCrmContactStatus:ua,addCrmContactType:fa,updateCrmContactType:ea,removeCrmContactType:oa,getCrmListItem:sa,addCrmListItem:ha,updateCrmListItem:ca,updateCrmListItemIcon:la,removeCrmListItem:aa,reorderCrmListItems:va,removePrjTask:pu,removePrjTasks:wu,addCrmTask:ya,addCrmTaskGroup:pa,getCrmTask:wa,addCrmEntityMember:cv,addCrmContactsForProject:ga,removeCrmEntityMember:lv,addCrmDealForContact:tv,removeCrmDealFromContact:iv,updateCrmTask:ba,removeCrmTask:ka,getCrmCases:av,getCrmCasesByPrefix:vv,removeCrmCase:yv,updateCrmCase:pv,getCrmContacts:wv,getCrmSimpleContacts:bv,getCrmContactsForMail:kv,getCrmContactsByPrefix:dv,getCrmContact:gv,getCrmTags:el,getCrmEntityTags:ol,getCrmEntityMembers:hv,getCrmTasks:ny,getCrmOpportunity:ty,getCrmOpportunities:uy,getCrmOpportunitiesByContact:fy,getCrmOpportunitiesByPrefix:ey,removeCrmOpportunity:oy,updateCrmOpportunityMilestone:sy,getCrmCurrencyConvertion:hy,getCrmCurrencySummaryTable:cy,updateCrmCurrency:ly,setCrmCurrencyRates:ay,addCrmCurrencyRates:vy,updateCRMContactStatusSettings:yy,updateCRMContactTagSettings:py,updateCRMContactMailToHistorySettings:wy,updateOrganisationSettingsCompanyName:by,updateOrganisationSettingsAddresses:ky,updateOrganisationSettingsLogo:dy,getOrganisationSettingsLogo:gy,updateWebToLeadFormKey:np,updateCRMSMTPSettings:tp,sendSMTPTestMail:ip,sendSMTPMailToContacts:rp,getPreviewSMTPMailToContacts:up,getStatusSMTPMailToContacts:fp,cancelSMTPMailToContacts:ep,addCrmHistoryEvent:op,removeCrmHistoryEvent:sp,getCrmHistoryEvents:hp,removeCrmFile:cp,getCrmFolder:lp,updateCrmContactRights:ap,updateCrmCaseRights:vp,updateCrmOpportunityRights:yp,addCrmEntityFiles:pp,removeCrmEntityFiles:wp,getCrmEntityFiles:bp,getCrmTaskCategories:kp,getCrmCase:iy,getContactsByContactInfo:ry,getCrmInvoices:sw,getCrmEntityInvoices:hw,updateCrmInvoicesStatusBatch:cw,getCrmInvoiceByNumber:lw,getCrmInvoiceByNumberExistence:aw,getCrmInvoiceItems:vw,addCrmInvoiceItem:yw,updateCrmInvoiceItem:pw,removeCrmInvoiceItem:ww,getCrmInvoiceTaxes:bw,addCrmInvoiceTax:kw,updateCrmInvoiceTax:dw,removeCrmInvoiceTax:gw,getCrmInvoice:nb,getCrmInvoiceSample:tb,getCrmInvoiceJsonData:ib,addCrmInvoice:rb,updateCrmInvoice:ub,removeCrmInvoice:fb,getInvoicePdfExistingOrCreate:eb,getInvoiceConverterData:ob,addCrmInvoiceLine:sb,updateCrmInvoiceLine:hb,removeCrmInvoiceLine:cb,getCrmInvoiceSettings:lb,updateCrmInvoiceSettingsName:ab,updateCrmInvoiceSettingsTerms:vb,getCrmCurrencyRates:yb,getCrmCurrencyRateById:pb,getCrmCurrencyRateByCurrencies:wb,addCrmCurrencyRate:bb,updateCrmCurrencyRate:kb,removeCrmCurrencyRate:db,getCrmContactTweets:gb,getCrmContactTwitterProfiles:nk,getCrmContactFacebookProfiles:tk,removeCrmContactAvatar:ik,updateCrmContactAvatar:rk,getCrmContactSocialMediaAvatar:uk,startCrmImportFromCSV:fk,getStatusCrmImportFromCSV:ek,getCrmImportFromCSVSampleRow:ok,uploadFakeCrmImportFromCSV:sk,getStatusExportToCSV:hk,cancelExportToCSV:ck,startCrmExportToCSV:lk,addCrmEntityTaskTemplateContainer:dp,updateCrmEntityTaskTemplateContainer:gp,removeCrmEntityTaskTemplateContainer:nw,getCrmEntityTaskTemplateContainer:tw,getCrmEntityTaskTemplateContainers:iw,addCrmEntityTaskTemplate:rw,updateCrmEntityTaskTemplate:uw,removeCrmEntityTaskTemplate:fw,getCrmEntityTaskTemplate:ew,getCrmEntityTaskTemplates:ow,getCrmContactsForProject:tl,getCrmVoipAvailableNumbers:ak,getCrmVoipExistingNumbers:vk,getCrmVoipUnlinkedNumbers:yk,getCrmCurrentVoipNumber:pk,createCrmVoipNumber:wk,linkCrmVoipNumber:bk,removeCrmVoipNumber:kk,updateCrmVoipNumberSettings:dk,updateCrmVoipSettings:gk,getCrmVoipSettings:nd,addCrmVoipNumberOperators:id,updateCrmVoipOperator:rd,removeCrmVoipNumberOperators:ud,getCrmVoipNumberOperators:td,callVoipNumber:fd,answerVoipCall:ed,rejectVoipCall:od,redirectVoipCall:sd,saveVoipCall:hd,saveVoipCallPrice:cd,getVoipCalls:ad,getVoipMissedCalls:ld,getVoipCall:vd,getVoipToken:yd,getVoipUploads:pd,deleteVoipUploads:wd,getCrmReportFiles:bd,removeCrmReportFile:kd,getCrmReportStatus:dd,terminateCrmReport:gd,checkCrmReport:ng,generateCrmReport:tg,getMailFilteredMessages:ig,getMailFolders:rg,getAccounts:ug,getMailTags:fg,getMailMessage:eg,getNextMailMessageId:lg,getPrevMailMessageId:ag,getMailConversation:vg,getNextMailConversationId:yg,getPrevMailConversationId:pg,removeMailFolderMessages:wg,restoreMailMessages:bg,moveMailMessages:kg,removeMailMessages:dg,markMailMessages:gg,createMailTag:nn,updateMailTag:tn,removeMailTag:rn,setMailTag:un,setMailConversationsTag:fn,unsetMailTag:en,unsetMailConversationsTag:on,addMailDocument:sn,removeMailMailbox:hn,getMailDefaultMailboxSettings:cn,getMailMailbox:ln,setDefaultAccount:an,createMailMailboxSimple:vn,createMailMailboxOAuth:yn,updateMailMailboxOAuth:pn,createMailMailbox:wn,updateMailMailbox:bn,setMailMailboxState:kn,removeMailMessageAttachment:dn,sendMailMessage:gn,saveMailMessage:ntt,searchEmails:ttt,getMailContacts:itt,getMailContactsByInfo:rtt,createMailContact:utt,deleteMailContacts:ftt,updateMailContact:ett,getMailAlerts:ott,deleteMailAlert:stt,getMailFilteredConversations:htt,moveMailConversations:ctt,restoreMailConversations:ltt,removeMailConversations:att,markMailConversations:vtt,getMailDisplayImagesAddresses:ytt,createDisplayImagesAddress:ptt,removeDisplayImagesAddress:wtt,linkChainToCrm:btt,markChainAsCrmLinked:ktt,unmarkChainAsCrmLinked:dtt,exportMessageToCrm:gtt,getLinkedCrmEntitiesInfo:cg,isConversationLinkedWithCrm:nit,getMailHelpCenterHtml:tit,getMailboxSignature:og,updateMailboxSignature:sg,updateMailboxAutoreply:hg,exportAllAttachmentsToMyDocuments:iit,exportAllAttachmentsToDocuments:rit,exportAttachmentToMyDocuments:uit,exportAttachmentToDocuments:fit,setEMailInFolder:eit,getMailServer:oit,getMailServerFullInfo:sit,getMailServerFreeDns:hit,getMailDomains:cit,getCommonMailDomain:lit,addMailDomain:ait,removeMailDomain:vit,addMailbox:yit,addMyMailbox:pit,getMailboxes:wit,removeMailbox:bit,addMailBoxAlias:dit,updateMailbox:kit,removeMailBoxAlias:git,addMailGroup:nrt,addMailGroupAddress:trt,removeMailGroupAddress:irt,getMailGroups:rrt,removeMailGroup:urt,isDomainExists:frt,checkDomainOwnership:ert,getDomainDnsSettings:ort,createNotificationAddress:srt,removeNotificationAddress:hrt,addCalendarBody:crt,setMailConversationEnabledFlag:lrt,setMailAlwaysDisplayImagesFlag:art,setMailCacheUnreadMessagesFlag:vrt,setMailEnableGoNextAfterMove:yrt,getMailServerInfo:prt,connectMailServerInfo:wrt,saveMailServerInfo:brt,getMailOperationStatus:krt,getWebItemSecurityInfo:drt,setWebItemSecurity:grt,setAccessToWebItems:nut,setProductAdministrator:tut,isProductAdministrator:iut,getPortalSettings:rut,getPortalLogo:uut,getAuditEvents:gut,getLoginEvents:dut,createLoginHistoryReport:nft,createAuditTrailReport:tft,getIpRestrictions:fut,saveIpRestrictions:eut,updateIpRestrictionsSettings:out,updateTipsSettings:sut,smsValidationSettings:hut,closeWelcomePopup:cut,setColorTheme:lut,setTimaAndLanguage:aut,setDefaultpage:vut,getTalkUnreadMessages:ift,registerUserOnPersonal:rft,saveWhiteLabelSettings:uft,restoreWhiteLabelSettings:fft,getCustomNavigationItems:eft,getCustomNavigationItemSample:oft,getCustomNavigationItem:sft,createCustomNavigationItem:hft,deleteCustomNavigationItem:cft,getCalendars:lft,getCalendarEventByUid:aft,getCalendarEventById:vft,importCalendarEventIcs:yft,saveLdapSettings:yut,getLdapSettings:put,getLdapDefaultSettings:wut,getLdapStatus:but,syncLdap:kut,getBarPromotions:pft,markBarPromotion:wft,getBarTips:bft,markBarTip:kft,deleteBarTips:dft,getReassignProgress:gft,terminateReassign:net,startReassign:tet,getRemoveProgress:iet,terminateRemove:ret,startRemove:uet}}();
(function(t){function f(n){var r=[],t=0,u,i;for(n=encodeURI(n).split(""),u=n.length;t<u;)i=n[t],t+=1,"%"!==i?r.push(i.charCodeAt(0)):(i=n[t]+n[t+1],r.push(parseInt(i,16)),t+=2);return r}function e(n){for(var r=[],t=0,e=n.length,i,u,f;t<e;)i=n[t],u=n[t+1],f=n[t+2],128>i?(r.push(String.fromCharCode(i)),t+=1):191<i&&i<224?(r.push(String.fromCharCode((i&31)<<6|u&63)),t+=2):(r.push(String.fromCharCode((i&15)<<12|(u&63)<<6|f&63)),t+=3);return r.join("")}function o(t){var o="",e=f(t),s=e.length,u;for(u=0,n=s-2;u<n;u+=3)o+=i[e[u]>>2],o+=i[((e[u]&3)<<4)+(e[u+1]>>4)],o+=i[((e[u+1]&15)<<2)+(e[u+2]>>6)],o+=i[e[u+2]&63];return s%3&&(u=s-s%3,o+=i[e[u]>>2],s%3==2?(o+=i[((e[u]&3)<<4)+(e[u+1]>>4)],o+=i[(e[u+1]&15)<<2],o+=r):(o+=i[(e[u]&3)<<4],o+=r+r)),o}function s(n){var o,s,i=0,h=[],t=0,f=0;for(i=0,idxCnt=n.length;i<idxCnt;i++)s=n.charCodeAt(i),o=u[s&127],o!==-1&&(f=f<<6|o,t+=6,t>=8&&(t-=8,r!==n.charAt(i)&&h.push(f>>t&255),f&=(1<<t)-1));return t?"":e(h)}var r="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.base64=t.Base64={encode:o,decode:s}})(jQuery);
(function(n,t,i){function u(n){var t=document.createElement("textarea");return t.innerHTML=n,t.value}function e(n){var t=n.val(),i=0,r="";if(t=typeof t=="string"?[t]:t||[],r=[].concat([""],t,[""]).join("xyu"),r.indexOf("xyu-1xyu")!==-1){for(i=t.length;i--;)if(t[i]==-1){t.splice(i,1);break}n.val(t)}}function r(t){var i=t?jQuery(t.target):n();if(i.is("select")){jQuery(document.body).unbind("click",arguments.callee);jQuery(document.body).one("click",arguments.callee);return undefined}jQuery("span.custom-combobox").removeClass("showed-options").find("div.combobox-container:first").hide()}function o(n){f(n)}function s(){r();jQuery(document.body).unbind("click",r)}function h(){var s=jQuery(this),i=s.parents("span.custom-combobox:first"),t="",h=null,e=s.val(),b="",r=[],c=[],l=null,o=null,k=s.find("option"),f=i.find("li.option-item"),n=0,a=0,v=!1;for(e=typeof e=="string"?[e]:e||[],b=[].concat([""],e,[""]).join("xyu"),a=k.length;a--;){if(o=k[a],t=o.getAttribute("value"),t==-1){h=o;continue}for(v=!1,b.indexOf("xyu"+t+"xyu")!==-1&&(v=!0,l=o,r.unshift(l.innerHTML),c.unshift(l.className)),n=f.length;n--;)if(f[n].getAttribute("data-value")===t){jQuery(f[n]).find("input").attr("checked",v===!0);break}}h&&r.length===0&&r.unshift(h.innerHTML);for(var y="",p=i.attr("class").split(/\s+/),w=0,w=p?p.length:0;w--;)y=p[w],y.indexOf("select-value-")===0&&i.removeClass(y);for(i.removeClass(i.attr("data-optclass")||" ").find("span.combobox-title-inner-text:first").text(u(r.length===1?r[0]:r.join(", "))),i.attr("data-value",t).attr("data-optclass",c.join(" ")).addClass(c.join(" ")).addClass("select-value-"+t),n=f.length;n--;)if(f[n].getAttribute("data-value")===t){jQuery(f[n]).addClass("selected-item").siblings().removeClass("selected-item");break}}function f(t){var i=n(t.target).parents("span.custom-combobox:first");if(i.hasClass("showed-options"))return undefined;r();jQuery(document.body).unbind("click",r);e(i.find("select"));i.addClass("showed-options").find("div.combobox-container:first").show();setTimeout(y,1)}function c(n){var i=jQuery(this).parents("span.custom-combobox:first"),r=i.find("select:first"),u=jQuery(n.target),t=u.attr("data-value");t&&r.val(t).change()}function l(){for(var i=jQuery(this).parents("span.custom-combobox:first"),f=i.find("select:first"),r=i.find("input:checked"),n=null,t=[],u=r.length;u--;)n=r[u].parentNode.getAttribute("data-value"),n&&n!=-1&&t.unshift(n);t&&f.val(t).change()}function a(n,t){var s=[],r=null,y=null,h=[],nt=n.className,c=jQuery(n).val(),tt="",p="",e=[],l=[],w=-1,b=!1,it=n.multiple===!0,k=null,a,rt,o;for(c=typeof c=="string"?[c]:c||[],tt=[].concat([""],c,[""]).join("xyu"),a=0,rt=t.length;a<rt;a++)r=t[a],r.value==-1&&(y=r),b=!1,r.value!=-1&&tt.indexOf("xyu"+r.value+"xyu")!==-1&&(b=!0,k=r,e.unshift(k.title),l.unshift(k.classname)),p=Math.floor(Math.random()*1e6),w=a,h.push({value:r.value,title:u(r.title)}),s=s.concat(["<li",' class="option-item',r.classname?" "+r.classname:"",r.selected===!0?" selected-item":"",'"',' data-value="'+(h.length-1)+'"',' title=""',">",it?'<input id="option-'+p+'" type="checkbox"'+(b===!0?' checked="checked"':"")+' /><label for="option-'+p+'">'+r.title+"<\/label>":r.title,"<\/li>"]);y&&e.length===0&&e.unshift(y.title);s=['<span class="combobox-title">','<span class="inner-text combobox-title-inner-text">',e.length>0?e.length===1?e[0]:e.join(", ")||"":"","<\/span>","<\/span>",'<span class="combobox-wrapper">','<div class="combobox-container">','<ul class="combobox-options'+(it?" is-multiple":"")+'">',s.join(""),"<\/ul>","<\/div>","<\/span>"];o=i.createElement("span");o.className="custom-combobox"+(w!==-1?" select-value-"+w:"")+(nt?" "+nt:"")+(l.length>0?" "+l.join(" "):"");l&&o.setAttribute("data-optclass",l.join(" "));o.innerHTML=s.join("");for(var ut=h.length,f=null,v=null,d=o.getElementsByTagName("li"),g=0,g=d?d.length:0;g--;)v=d[g],f=v.getAttribute("data-value"),f=isFinite(+f)?+f:-1,f>-1&&f<ut&&(v.setAttribute("title",jQuery.trim(h[f].title)),v.setAttribute("data-value",h[f].value));return o}function v(n){for(var e=n.value,o=[],u=null,i=null,f=0,r=null,t,i=n.getElementsByTagName("option"),f=i?i.length:0;f--;)r=i[f],u=r.getAttribute("value"),o.unshift({classname:r.className,value:u,title:r.innerHTML,selected:u==e});return(t=a(n,o),t)?(n.parentNode.insertBefore(t,n),t.appendChild(n),t.setAttribute("data-value",e),t):null}function y(){jQuery(document.body).one("click",r)}function p(n,t){n.blur(s).focus(o).change(h);t.find("span.combobox-title:first").click(f);t.find("ul.combobox-options:first").click(c);t.find("input").click(l)}n.fn.advansedFilterCustomCombobox=function(){for(var i=null,r=null,u=n(this),f=0,t=null,f=u.length;f--;)(i=u[f],t=n(i),t.hasClass("custom-combobox"))||(r=v(i),p(n(i),n(r)),t.addClass("custom-combobox"),n(r).find("div.combobox-container:first").append(t),n.browser.mobile&&(t.addClass("mobile-mode"),t.parents(".custom-combobox:first").addClass("mobile-mode")));return u}})(jQuery,window,document,document.body);
(function(n,t,i){function s(n){return n?n.constructor.toString().indexOf("Array")!=-1:!1}function e(n,t){var i,r,u;if(n=typeof n=="string"?n:"",!n)return"";if(t===!0){for(i=[["&lt;","<"],["&gt;",">"],["&and;","\\^"],["&sim;","~"],["&amp;","&"]],r=i.length;r--;)n=n.replace(new RegExp(i[r][1],"g"),i[r][0]);return n}return u=document.createElement("textarea"),u.innerHTML=n,u.value}function st(t){for(var f=[],i=null,r="",u=0,e=t?t.length:0;u<e;u++){i=t[u];switch(i.type){case"sorter":r={id:i.id,type:i.type,params:{id:i.params.id,def:i.params.def,dsc:i.params.dsc,sortOrder:i.params.sortOrder}};break;case"daterange":r={id:i.id,type:i.type,params:{from:Teamlab.serializeTimestamp(new Date(i.params.from)),to:Teamlab.serializeTimestamp(new Date(i.params.to))}};break;default:r={id:i.id,type:i.type,params:i.params}}r.params=n.base64.encode(n.toJSON(r.params));f.push(n.toJSON(r))}return n.base64.encode(f.join(";"))}function ht(){var n=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname+location.search;return encodeURIComponent(n.charAt(n.length-1)==="/"?n+"default.aspx":n)}function ct(n,t){n.some(function(n){return n.type!="sorter"})?t.addClass("has-filters"):t.removeClass("has-filters")}function lt(t,i){var r,u;if(w===!0&&(i.length===0||i.length===1&&i[0].id==="sorter"))return w=!1,undefined;if(t=t&&typeof t=="object"?t:{},w=!1,r=st(i),t.inhash===!0)try{ASC.Controls.AnchorController.safemove(r)}catch(f){}u=ht();localStorageManager.setItem(u,r);n.cookies.set(u,r,{path:d})}function at(t){var u=null,f=ht(),o,s;if(localStorageManager.getItem(f)&&(u=n.base64.decode(localStorageManager.getItem(f))),t&&typeof t=="object"&&t.inhash===!0&&(r=location.hash,r=r&&typeof r=="string"&&r.charAt(0)==="#"?r.substring(1):r,r.length===0&&(r=n.cookies.get(f),r=decodeURIComponent(r),r=r&&typeof r=="string"&&r.charAt(0)==="#"?r.substring(1):r),u=n.base64.decode(r),r&&r!=="null")){try{ASC.Controls.AnchorController.safemove(r)}catch(h){}n.cookies.set(f,r,{path:d})}var i=null,e=[];for(u=typeof u=="string"&&u.length>0?u.split(";"):[],o=0,s=u.length;o<s;o++){try{i=n.parseJSON(u[o]);i.params=n.parseJSON(n.base64.decode(i.params))}catch(h){i=null}if(i)switch(i.type){case"sorter":e.push({id:i.id,selected:!0,params:i.params});break;case"daterange":e.push({id:i.id,params:{from:Teamlab.serializeDate(i.params.from),to:Teamlab.serializeDate(i.params.to)}});break;default:e.push({id:i.id,params:i.params})}}return e||[]}function rr(n){return n.data("filtervalues")||[]}function ur(n,t){for(var i in t)t.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(n[i]=t[i])}function vt(n,t){for(var u=[],i=0,r=0,i=n.length;i--;){for(r=t.length;r--;)if(n[i]&&t[r]&&n[i].id===t[r].id){ur(n[i],t[r]);break}u.unshift(n[i])}for(r=t.length;r--;){for(i=n.length;i--;)if(t[r].id===n[i].id)break;u.unshift(t[r])}return u}function fr(n,t){for(var i=n.find(".filter-item.filter-item-group > .selector-wrapper:first").data("items"),r=0,i=i?i:[],r=i.length;r--;)if(i[r].id==t)return i[r].title;return t}function er(n,t,i){for(var r=n.find(".filter-item.filter-item-person > .selector-wrapper:first").data("items"),u=0,r=r?r:[],u=r.length;u--;)if(r[u].id==t)return r[u].title;return typeof i=="string"&&i?i:t}function nt(n,t){if(!t.title)return undefined;for(var i=0,i=n?n.length:0;i--;){if(t.groupid)if(n[i].id===t.groupid){n[i].items.push(t);break}else continue;if(n[i].title===t.group){n[i].items.push(t);break}}i===-1&&n.push({title:t.group||"",items:[t],id:t.groupid||""})}function yt(n,t,i,r,u){var f=n.datepicker({onSelect:function(n,t,i,r){return function(u,f){r(this,n,t,i,u,f)}}(t,i,r,tt)}).click(function(n){n.stopPropagation()});return f.datepicker("setDate",u),f}function or(n){return jQuery.tmpl(et.filterItem,n)}function pt(n,t,i){var l=1,r=[],o=null,s=null,h="",u=0,v=0,f=0,a=0,c;for(l=n&&typeof n=="object"&&n.hasOwnProperty("colcount")&&isFinite(+n.colcount)?+n.colcount:l,u=0,v=t.length;u<v;u++)if(i==="filter"&&l>1){if(u<l){for(r.push('<li class="item-group-col"><ul class="group-items">'),c=u;c<v;c+=l){for(s=t[c].items,o=[],f=0,a=s.length;f<a;f++)o.push(wt(s[f],i));h=e(t[c].title,!0);r=r.concat(["<li",' class="item-group '+i+"-group",t[c].title?"":" none-title",'"',">",'<span class="title" title="'+h+'">',h,"<\/span>",'<ul class="filter-items">',o.join(""),"<\/ul>","<\/li>"])}r.push('<\/ul><div class="clear"><\/div><\/li>')}}else{for(s=t[u].items,o=[],f=0,a=s.length;f<a;f++)o.push(wt(s[f],i));h=e(t[u].title,!0);r=r.concat(["<li",' class="item-group '+i+"-group",t[u].title?"":" none-title",'"',">",'<span class="title" title="'+h+'">',h,"<\/span>","<\/li>",o.join("")])}return r.push('<li class="item-list-separator '+i+'-list-separator"><\/li>'),r.join("")}function wt(n,t){return["<li",' class="item-item '+t+"-item",n.def===!0?" selected":"",n.def===!0?(n.dsc=!!n.dsc)==!0?" dsc-sort":" asc-sort":"",n.dsc===!0||n.sortOrder==="descending"?" dsc-sort-default":"",'"',' title="'+e(n.title,!0)+'"',' data-id="'+n.id+'"',n.type?' data-type="'+n.type+'"':"",n.hashmask?' data-anchor="'+n.hashmask+'"':"",">",'<span class="inner-text">',e(n.title,!0),"<\/span>","<\/li>"].join("")}function sr(n,t){var u=null,r=null;return(r=jQuery.tmpl(et.filterContainer,{filtervalues:n,sortervalues:t}),!r||r.length!=1)?null:(r=r[0],u=i.createElement("div"),u.className="clearFix",u.innerHTML=r.outerHTML,r)}function bt(t,i,r,u){for(var o=null,a=!1,e=[],s=0,r=[].concat(r),u=[].concat(u),f=0,c=0,v="",h=null,y=i.find("li.filter-item"),l=0,p=0,l=0,p=y.length;l<p;l++){for(h=n(y[l]),v=h.attr("data-id"),a=!1,f=0,c=r?r.length:0;f<c;f++)if(r[f].id===v){nt(e,r[f]);r.splice(f,1);a=!0;break}a===!1&&nt(e,{type:h.attr("data-type"),title:h.text(),group:"",hashmask:h.attr("data-anchor")})}for(f=0,c=r?r.length:0;f<c;f++)nt(e,r[f]);for(s=e.length;s--;)if(e[s].title===""){e.push(e[s]);e.splice(s,1);break}return o=i.find("ul.filter-list:first").removeClass("multi-column").empty()[0]||null,o&&(t.colcount>1&&(o.className+=" multi-column multi-column-"+t.colcount),o.innerHTML=pt(t,e,"filter")),o=i.find("ul.sorter-list:first").removeClass("multi-column").empty()[0]||null,o&&(o.innerHTML=pt(t,[{title:"",items:u}],"sorter")),o}function l(n,t,i){for(var t=t||null,e=n.data("filteroptions"),r=n.data("filtervalues"),f=r?r.length:0,u=[];f--;)r[f].isset===!0&&u.unshift(r[f]),t===null&&r[f].id==="sorter"&&(t=r[f]);ct(u,n);lt(e,u);i===!0&&n.trigger("resetallfilters",[n,t.id,u]);n.trigger("setfilter",[n,t,t!=null?t.params:null,u]);n.trigger("updatefilter",[n,t!=null?t.id:null,u])}function hr(n,t,i){for(var t=t||null,e=n.data("filteroptions"),r=n.data("filtervalues"),f=r?r.length:0,u=[];f--;)r[f].isset===!0&&u.unshift(r[f]),t===null&&r[f].id==="sorter"&&(t=r[f]);ct(u,n);lt(e,u);i===!0&&n.trigger("resetallfilters",[n,t.id,u]);n.trigger("resetfilter",[n,t,u]);n.trigger("updatefilter",[n,t.id,u])}function f(n,t,i,r,f){var b,k,w,e,a,h,v,p;if(n.trigger("adv-setFilterItem",[n,t,i,r,f]),u(!0),y(n,!0),n.length>0&&i&&i.id==="sorter"&&(b=n.find('li.sorter-item[data-id="'+r.id+'"]:first'),it(n,r.title),k=n.find("div.advansed-filter-sort-container:first"),w=r.dsc===!0?"dsc-sort":"asc-sort",k.removeClass("asc-sort").removeClass("dsc-sort").addClass(w),b.addClass("selected").removeClass("asc-sort").removeClass("dsc-sort").addClass(w).siblings().removeClass("selected").removeClass("asc-sort").removeClass("dsc-sort")),n.length>0&&i){if(e=null,a=t&&t.length>0?t.attr("data-paramsid")||null:null,i.params||(i.params=i.multiselect===!0?[]:{}),i.multiselect===!0&&s(i.params)&&a){for(h=i.params,v=h?h.length:0;v--;)if(a==h[v].__id){e=h[v];break}e||(e={__id:a},i.params.push(e))}else e=i.params;for(p in r)r.hasOwnProperty(p)&&(e[p]=r[p]);i.isset=!0;c(n);f!==!0&&o===!1&&l(n,i)}}function a(n,t,i,r){var e,c,f,h;if(n.trigger("adv-unsetFilterItem",[n,t,i,r]),u(!0),y(n,!0),n.length>0&&i){if(e=!1,c=t&&t.length>0?t.attr("data-paramsid")||null:null,i.multiselect===!0&&s(i.params)&&c){for(f=i.params,h=f?f.length:0;h--;)if(c==f[h].__id){f.splice(h,1);break}f.length===0&&(e=!0)}else e=!0;e===!0&&(i.params=null,i.isset=!1);r!==!0&&o===!1&&hr(n,i)}}function cr(t){for(var i,u=t.find("li.item-group.filter-group"),r=0,f=u.length;r<f;r++)i=n(u[r]),i.removeClass("hidden-item"),i.find(".item-item:not(.hidden-item)").length===0&&i.addClass("hidden-item")}function y(n){var o=n.find("input.advansed-filter-input:first"),e=o.val(),t=null,i=n.data("filtervalues"),r=0,u,f;if(!i||i.length===0)return undefined;for(r=i.length;r--;)if(i[r].id==="text")break;if(r!==-1)if(t=i[r],typeof e=="string"&&e.length>0){u={value:e};t.params||(t.params={});for(f in u)u.hasOwnProperty(f)&&(t.params[f]=u[f]);t.isset=!0}else t.params=null,t.isset=!1}function lr(n,t,i,r){n.length>0&&i&&f(n,t,i,{},r)}function ar(){return!0}function vr(n,t,i){return i.hasOwnProperty("defaultparams")?i.defaultparams:{}}function yr(){}function pr(n,t,i){i&&i.hasOwnProperty("name")&&t.removeClass("default-value").find("span.group-selector:first span.custom-value:first").attr("title",i.name).find("span.value:first").text(i.name)}function kt(n,t,i,r,u){n.length>0&&t.length>0&&pr(n,t,{id:r.id,name:e(r.title)});n.length>0&&i&&f(n,t,i,{id:r.id,value:r.id,name:e(r.title)},u)}function wr(n,t){if(n.hasClass("showed-groupselector"))return undefined;if(jQuery(n).find(".filter-item.filter-item-group > .advansed-filter-groupselector").length!=0)try{n.addClass("showed-groupselector").find(".filter-item.filter-item-group > .selector-wrapper:first").groupadvancedSelector("reset",!0)}catch(i){}jQuery(document.body).unbind("click",u);ri(n,t,n.find("div.advansed-filter-groupselector-container:first"));setTimeout(function(){jQuery(document.body).one("click",u)},1)}function br(){}function kr(n,t,i){return t.id===i.id}function dr(n,t,i){if(jQuery(t).children(".advanced-selector-container").length==0){try{n.addClass("showed-groupselector");t.children(".selector-wrapper:first").groupadvancedSelector({inPopup:!0,onechosen:!0})}catch(r){}try{jQuery(t).children(".selector-wrapper:first").on("showList",function(n,t,i,r){return function(u,f){r(n,t,i,f)}}(n,t,i,kt))}catch(r){}}}function gr(n,t,i){i&&i.hasOwnProperty("name")&&t.removeClass("default-value").find("span.person-selector:first span.custom-value:first").attr("title",i.name).find("span.value:first").text(i.name)}function dt(n,t,i,r,u,o){n.length>0&&t.length>0&&gr(n,t,{id:r,name:e(u)});n.length>0&&i&&f(n,t,i,{id:r,value:r,name:e(u)},o)}function nu(n,t,i){return t.id===i.id}function tu(n,t,i){if(jQuery(t).children(".advansed-filter-userselector").length==0){try{var r=i.hasOwnProperty("showme")?Boolean(i.showme):!0;n.addClass("showed-userselector");t.children(".selector-wrapper:first").useradvancedSelector({showme:r,inPopup:!0,onechosen:!0,showGroups:!0,itemsDisabledIds:r?[]:[window.Teamlab.profile.id],showDisabled:window.Teamlab.profile.isAdmin})}catch(u){}try{jQuery(t).children(".selector-wrapper:first").on("showList",function(n,t,i,r){return function(u,f){r(n,t,i,f.id,f.title)}}(n,t,i,dt))}catch(u){}}}function iu(n,t){if(n.hasClass("showed-userselector"))return undefined;if(jQuery(n).find(".filter-item.filter-item-person > .advansed-filter-userselector").length!=0)try{n.addClass("showed-userselector").find(".filter-item.filter-item-person > .selector-wrapper:first").useradvancedSelector("reset",!0)}catch(i){}jQuery(document.body).unbind("click",u);ri(n,t,n.find("div.advansed-filter-userselector-container:first"));setTimeout(function(){jQuery(document.body).one("click",u)},1)}function ru(){}function tt(n,t,i,r,u,e,o,s){var v=jQuery(n),h=e?e.input.datepicker("getDate"):s,c=v.parents("span.advansed-filter-dateselector-date:first"),a=null,l=!1;c.hasClass("dateselector-from-date")?(l=!0,a=c.parents(".filter-item-daterange:first").find("span.to-daterange-selector:first span.datepicker-container:first")):(l=!1,a=c.parents(".filter-item-daterange:first").find("span.from-daterange-selector:first span.datepicker-container:first"));t.length>0&&r&&(c.find("span.btn-show-datepicker-title:first").text(u),h&&(f(t,i,r,l?{from:h.getTime()}:{to:h.getTime()},o),a.datepicker("option",l?"minDate":"maxDate",h)))}function uu(n,t,i){return t.from==i.from&&t.to==i.to}function fu(t,i,r){var u=null,s=null,h=null,f=new Date,e,o;return e=new Date(f.getFullYear(),f.getMonth()-6,f.getDate(),0,0,0,0),o=new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0),s=i.find("span.from-daterange-selector:first span.datepicker-container:first"),h=i.find("span.to-daterange-selector:first span.datepicker-container:first"),u=yt(s,t,i,r,e),u.datepicker("option","maxDate",o),i.find("span.from-daterange-selector:first span.btn-show-datepicker-title:first").text(n.datepicker.formatDate(u.datepicker("option","dateFormat"),u.datepicker("getDate"))),u=yt(h,t,i,r,o),u.datepicker("option","minDate",e),i.find("span.to-daterange-selector:first span.btn-show-datepicker-title:first").text(n.datepicker.formatDate(u.datepicker("option","dateFormat"),u.datepicker("getDate"))),{from:e.getTime(),to:o.getTime()}}function eu(n,t,i,r){if(r.hasClass("showed-datepicker"))return undefined;jQuery(document.body).unbind("click",u);var f=r.addClass("showed-datepicker").find("span.advansed-filter-datepicker-container:first").css("display","block");f.removeClass("reverse-position");i.parents("div.hidden-filters-container:first").length===0&&t.width()-i[0].offsetLeft-i.parent()[0].offsetLeft-i.width()<f.width()&&f.addClass("reverse-position");setTimeout(function(){jQuery(document.body).one("click",u)},1)}function ou(){}function su(n,t,i,r,u){var c=jQuery(n),e=c.val(),o,h;if(t.length>0&&r){if(s(e)){for(o=e,h=e.length;h--;)if(o[h]==-1){o.splice(h,1);break}e=o}f(t,i,r,{value:e,title:c.find('option[value="'+(""+e).replace(/\"/g,'\\"')+'"]:first').text()},u)}}function hu(n,t,i){return t.value==i.value?!0:s(t.value)&&s(i.value)&&t.value.length===i.value.length?[].concat(t.value).sort().join("")==[].concat(i.value).sort().join(""):!1}function cu(n,t,i){var e=t.find("select.advansed-filter-combobox:first"),r=e.val(),o=i.hasOwnProperty("defaultvalue")?i.defaultvalue:"-1",u,f;if(s(r)){for(u=r,f=r.length;f--;)if(u[f]==-1){u.splice(f,1);break}r=u}return r=r==o?null:r,r=s(r)&&(r.length===0||r.length===1&&r[0]=="-1")?null:r,e.advansedFilterCustomCombobox().change(function(n,t,i,r){return function(){r(this,n,t,i)}}(n,t,i,su)),r?{value:r,title:e.find('option[value="'+(""+r).replace(/\"/g,'\\"')+'"]:first').text()}:null}function lu(){}function au(n,t,i,r){var u=null;switch(t.type){case"flag":u=ar;break;case"group":u=kr;break;case"person":u=nu;break;case"daterange":u=uu;break;case"combobox":u=hu}return u!==null&&t.hasOwnProperty("params")?u(n,t.params,i,r):!1}function vu(n,t,i,r){var u=null,f;switch(i.type){case"flag":u=vr;break;case"group":u=dr;break;case"person":u=tu;break;case"daterange":u=fu;break;case"combobox":u=cu}if(u!==null)return f=u(n,t,i,r),i.hasOwnProperty("bydefault")&&i.bydefault&&typeof i.bydefault=="object"?i.bydefault:f}function yu(n,t,i){var r=null;switch(i.type){case"flag":r=yr;break;case"group":r=br;break;case"person":r=ru;break;case"daterange":r=ou;break;case"combobox":r=lu}r!==null&&r(n,t,i)}function gt(t,i,r,u,f){switch(r.type){case"flag":lr(t,i,r,f);break;case"group":kt(t,i,r,{id:u.id,title:fr(t,u.id)},f);break;case"person":dt(t,i,r,u.id,er(t,u.id,u.name),f);break;case"daterange":var s=null,o=null,e=null;u.hasOwnProperty("from")&&(e=i.find("span.from-daterange-selector:first span.datepicker-container:first"),s=new Date(+u.from),o=e.datepicker("getDate"),e.length>0&&o&&s instanceof Date&&(e.datepicker("setDate",s),o=e.datepicker("getDate"),tt(e,t,i,r,n.datepicker.formatDate(e.datepicker("option","dateFormat"),o),null,f,o)));u.hasOwnProperty("to")&&(e=i.find("span.to-daterange-selector:first span.datepicker-container:first"),s=new Date(+u.to),o=e.datepicker("getDate"),e.length>0&&o&&s instanceof Date&&(e.datepicker("setDate",s),o=e.datepicker("getDate"),tt(e,t,i,r,n.datepicker.formatDate(e.datepicker("option","dateFormat"),o),null,f,o)));break;case"combobox":i.find("select").val(u.value).change();break;default:r.hasOwnProperty("process")&&typeof r.process=="function"?r.process(t,i,r,u,f):null}}function pu(n){n.hasClass("hidden-item")&&n.removeClass("hidden-item")}function wu(n,t,i,r){return i.hasClass("hidden-item")?!1:(i.addClass("hidden-item"),t.length>0?(h(n,t,r),!0):void 0)}function bu(n){n.hasClass("disabled-item")&&n.removeClass("disabled-item")}function ku(n,t,i,r){return i.hasClass("disabled-item")?!1:(i.addClass("disabled-item"),t.length>0?(h(n,t,r),!0):void 0)}function du(n,t,i){if(t.length>0)return h(n,t,i),!0}function ni(t,i,r,u){var e,l,b,a,k,v,d,g,nt,p,tt,w,o;if(typeof u=="undefined"&&typeof i.nonetrigger!="undefined"&&(u=i.nonetrigger),e=null,l=t.find("div.advansed-filter-filters:first"),l.length===0)return undefined;if(i.id==="text")return r&&typeof r=="object"&&r.hasOwnProperty("value")&&(b=t.find("input.advansed-filter-input:first"),b.val()!=r.value)?(b.val(r.value),y(t,u),!0):!1;if((e=l.find('div.filter-item[data-id="'+i.id+'"]:first')).length>0&&i.multiselect!==!0){if(!i.hasOwnProperty("groupby")&&(!r||au(t,i,r,u)))return!1;h(t,e,!0)}for(a=i.hasOwnProperty("groupby")&&typeof i.groupby=="string"&&i.groupby.length>0?i.groupby:null,a!==null&&(k=l.find('div.filter-item[data-group="'+a+'"]:first'),t.length>0&&k.length>0&&h(t,k,!0)),v=t.data("customdata"),v&&(d=v.hasOwnProperty("maxfilters")?v.maxfilters:-1,d!==-1&&l.find("div.filter-item").length>=d&&(g=l.find("div.filter-item:first"),t.length>0&&g.length>0&&h(t,g,!0))),nt=s(r)?r:[r],p=0,tt=nt.length;p<tt;p++)r=nt[p],e=n((i.hasOwnProperty("create")&&typeof i.create=="function"?i.create:or)(i)),e.length>0&&(l.append(e),i&&(w=r&&typeof r=="object"&&r.hasOwnProperty("__id")?r.__id:Math.floor(Math.random()*1e6),e.attr("data-id",i.id).attr("data-paramsid",w).attr("data-type",i.type).addClass("filter-item").addClass("filter-item-"+i.type),a!==null&&e.attr("data-group",a),o=(i.hasOwnProperty("customize")&&typeof i.customize=="function"?i.customize:vu)(t,e,i,u),o=o&&typeof o=="object"?o:null,o=i.hasOwnProperty("value")?i.value:o,o?o.__id=w:null,r=r&&typeof r=="object"?r:null,r?r.__id=w:null,o&&!r&&(f(t,e,i,o,u),gt(t,e,i,o,!0)),r&&(f(t,e,i,r,u),gt(t,e,i,r,u))));return c(t),!0}function ti(n,t,i,r){var u=n.find("div.advansed-filter-filters:first");if(u.length===0)return undefined;i.length>0&&(t&&((t.hasOwnProperty("destroy")&&typeof t.destroy=="function"?t.destroy:yu)(n,i,t),a(n,i,t,r)),i.find("div.advansed-filter-control").appendTo(n),i.remove());c(n)}function h(n,t,i){for(var f=t.attr("data-id"),u=n.data("filtervalues"),r=0,r=u?u.length:0;r--;)if(u[r].id===f)break;ti(n,r!==-1?u[r]:null,t,i)}function gu(n,t){var i=n.find("li.item-item.sorter-item");i.filter('[data-id="'+t+'"]').removeClass("hidden-item")}function nf(n,t,i){var u=n.find("li.item-item.sorter-item"),r=null;return r=u.filter('[data-id="'+t+'"]').addClass("hidden-item"),r.hasClass("selected")&&(r=u.not(".hidden-item").filter(":first"),r.length>0&&(t=r.attr("data-id"),t))?(v(n,t,{dsc:!1},i),!0):void 0}function v(n,t,i,r){var o=n.data("filtervalues")||[],u=-1,s=n.data("sortervalues")||[],e=-1;if(s.length>0)for(e=s.length;e--;)if(s[e].id===t)break;if(o.length>0)for(u=o.length;u--;)if(o[u].id==="sorter")break;return u!==-1&&e!==-1?o[u].params&&o[u].params.id===s[e].id&&o[u].params.dsc===i.dsc?!1:(s[e].dsc=i.dsc,s[e].sortOrder=i.dsc===!0?"descending":"ascending",f(n,null,o[u],s[e],r),!0):!1}function ii(n,t,i){var u=parseInt(n.find("div.advansed-filter-input input:first").css("min-width")||100)||100,s=parseInt(n.find("div.advansed-filter-input").css("margin-right")||0),r=t.children("div.filter-item:visible:last"),f=n.find(".advansed-filter-button.btn-show-filters:first"),e=f.length==1?f.width():0,o=0;return t.children("div:visible").each(function(){o+=jq(this).outerWidth()}),i.length===0||r.length===0?!1:i[0].offsetTop!==r[0].offsetTop||i[0].offsetHeight!==r[0].offsetHeight||n[0].offsetWidth<t[0].offsetWidth+t[0].offsetLeft+e+u||i.find("span.selector-wrapper:first")[0].offsetHeight!==r.find("span.selector-wrapper:first")[0].offsetHeight||n[0].offsetWidth<o+t[0].offsetLeft+e+u+s+10}function it(n,t){var i=0,u=n.find("div.advansed-filter-container:first"),r=n.find("div.advansed-filter-sort-container:first");r.length>0&&(r.addClass("sorter-isset"),t&&r.find("span.value:first").text(t),i=n.hasClass("disable-sorter-block")?0:r.width(),u.css("margin-right",(i>0?i+38:0)+22+"px"),n.find("div.advansed-filter-helper:first").css("margin-right",(i>0?i+38:0)+22+"px"),n.find("label.advansed-filter-state:first").css("left","auto").css("right",(i>0?i+38:0)+"px"),c(n))}function c(n){var tt=n.width(),s=n.find("div.advansed-filter-input:first"),p=n.find("div.advansed-filter-button:first"),t=n.find("div.advansed-filter-filters:first"),f=t.find("div.hidden-filters-container:first"),it=f.find("div.filter-item"),r,e,o;if(s.length===0||t.length===0||tt===0)return undefined;t.find("div.filter-item").length===0?(t.addClass("empty-list"),n.addClass("empty-filter-list")):(t.removeClass("empty-list"),n.removeClass("empty-filter-list"));t.removeClass("has-hidden-filters");it.removeClass("hidden-filter").insertAfter(f);for(var h=0,c=null,u=null,l=0,a=n.data("filteroptions"),w=n.find("div.advansed-filter-container:first"),i=t.find("div.filter-item:first"),b=t.find("div.filter-item"),k=!1,l=b.length;l--;)u=jQuery(b[l]),c=u.find("span.selector-wrapper:first"),h=u.find("span.title:first").width()+8,u.width(h+c.width()),c.css("left",h+"px");if(s[0].style.marginLeft="auto",k=ii(w,t,i),i.length&&k)for(t.addClass("has-hidden-filters"),i=t.find("div.filter-item:first:visible");i.length>0&&ii(w,t,i);)u=i,i=i.next("div.filter-item"),u.addClass("hidden-filter").appendTo(f);t.find("div.hidden-filter").length>0?t.addClass("has-hidden-filters"):t.removeClass("has-hidden-filters");for(var d=f.find("div.filter-item"),g=d.length,rt=0;g--;)d[g].style.zIndex=++rt;if(a&&typeof a=="object"&&a.colcount>1){if(r=n.find("ul.item-list.filter-list.multi-column:first"),r.addClass("show-item-list").height()>0&&!r.hasClass("is-render")){var v=0,nt=0,y=r.find("li.item-group-col");for(r.width("auto"),e=y.length;e--;)v=y[e].offsetWidth,y[e].style.width=v+"px",nt+=v;r.addClass("is-render").width(nt+20+"px")}r.removeClass("show-item-list")}o=t.width()+2;p.css("left",o+"px");n.find("div.advansed-filter-list:first").css("left",o+"px");s[0].style.marginLeft=p[0].offsetWidth+o+"px"}function ri(n,t,i){if(i.addClass("reset-position").parents("div.advansed-filter-control:first").appendTo(t.parents("div.hidden-filters-container:first").length===0?t:t.parents("div.advansed-filter-filters:first").find("div.btn-show-hidden-filters:first")),t.parents("div.hidden-filters-container:first").length>0)return undefined;if(n.width()-t[0].offsetLeft-t.parent()[0].offsetLeft-t.width()<i.width()){var r=i.width()-(n.width()-t[0].offsetLeft-t.parent()[0].offsetLeft-t.width())+40,f=i.find("div.control-top:first")[0].offsetLeft||0,u=parseFloat(i.css("margin-left"));i.removeClass("reset-position").css("margin-left",-r+"px").find("div.control-top:first").css("left",f+r-(isFinite(u)?Math.abs(u):0)+"px")}}function rt(n){var u=n.find("div.advansed-filter-support:first"),f=n.find("label.advansed-filter-label:first"),i=n.find("input.advansed-filter-input:first"),e=n.find("div.advansed-filter-container:first"),o=n.find("div.advansed-filter-list:first"),r=i.attr("id")||Math.floor(Math.random()*1e6),t;i.attr("id",r);f.attr("for",r);t=u.innerWidth();e.css("margin-left",t+"px");o.css("margin-left",t+"px")}function tf(n,t){t===!0?n.removeClass("disable-sorter-block"):n.addClass("disable-sorter-block")}function ui(n,t){typeof n=="function"&&jQuery(function(n,t){return function(){setTimeout(function(){n.apply(window,t)},1)}}(n,t))}function fi(n,t){if(n=n.hasClass("advansed-filter")?n:n.find("div.advansed-filter:first"),n.length===0)return undefined;if(t.hasOwnProperty("anykey")&&t.anykey===!0){var i=t.hasOwnProperty("anykeytimeout")?t.anykeytimeout:ft;i=isFinite(+i)?+i:ft;i>0?(k=i,n.find("input.advansed-filter-input:first").unbind("keyup paste",pi).bind("keyup paste",pi)):n.find("input.advansed-filter-input:first").unbind("keyup paste",p).bind("keyup paste",p)}else n.find("input.advansed-filter-input:first").unbind("keyup paste",wi).bind("keyup paste",wi);n.find("input.advansed-filter-input:first").unbind("keyup paste input",ei).bind("keyup paste input",ei);n.find(".btn-start-filter:first").unbind("click",bi).bind("click",bi);n.find("label.btn-reset-filter:first").unbind("click",ki).bind("click",ki);n.find("ul.filter-list:first").unbind("click",ci).bind("click",ci);n.find("ul.sorter-list:first").unbind("click",li).bind("click",li);n.find("div.btn-show-filters:first").unbind("click",oi).bind("click",oi);n.find("span.btn-toggle-sorter:first").unbind("click",hi).bind("click",hi);n.find("div.advansed-filter-sort-container:first span.title:first").unbind("click",si).bind("click",si);n.find("div.advansed-filter-filters:first").unbind("click",ai).bind("click",ai);n.find("div.advansed-filter-userselector:first").unbind("click",vi).bind("click",vi);n.find("div.advansed-filter-groupselector:first").unbind("click",yi).bind("click",yi)}function u(n){var t=n&&typeof n=="object"?jQuery(n.target):null;if(t&&t.is("span.btn-show-datepicker")&&t.parents("div.hidden-filters-container:first").length>0||t&&t.is("span.combobox-title")&&t.parents("div.hidden-filters-container:first").length>0||t&&t.is("span.combobox-title-inner-text")&&t.parents("div.hidden-filters-container:first").length>0){jQuery(document.body).unbind("click",arguments.callee);jQuery(document.body).one("click",arguments.callee);return jQuery("div.advansed-filter").find("span.advansed-filter-dateselector-date").removeClass("showed-datepicker").find("span.advansed-filter-datepicker-container").hide(),undefined}n===!0&&jQuery(document.body).trigger("click");jQuery("div.advansed-filter").removeClass("showed-filters").find("ul.filter-list:first").hide();jQuery("div.advansed-filter").removeClass("showed-sorters").find("ul.sorter-list:first").hide();jQuery("div.advansed-filter").removeClass("showed-hidden-filters").find("div.hidden-filters-container:first").hide();jQuery("div.advansed-filter").removeClass("showed-userselector").find("div.advansed-filter-userselector-container:first").hide();jQuery("div.advansed-filter").removeClass("showed-groupselector").find("div.advansed-filter-groupselector-container:first").hide();jQuery("div.advansed-filter").find("span.advansed-filter-dateselector-date").removeClass("showed-datepicker").find("span.advansed-filter-datepicker-container").hide()}function ei(){this.value===""?this.parentNode.className=this.parentNode.className.replace(" has-value",""):this.parentNode.className.indexOf(" has-value")===-1&&(this.parentNode.className=this.parentNode.className+" has-value")}function oi(n){var t=jQuery(this).parents("div.advansed-filter:first");if(t.hasClass("showed-filters"))return undefined;u(n);jQuery(document.body).unbind("click",u);t.addClass("showed-filters").find("ul.filter-list:first").show();setTimeout(function(){jQuery(document.body).one("click",u)},1)}function si(n){var t=jQuery(this).parents("div.advansed-filter:first");if(t.hasClass("disable-sorter-block")||t.find("div.advansed-filter-sort-container:first").hasClass("sorter-nochange")||t.hasClass("showed-sorters"))return undefined;u(n);jQuery(document.body).unbind("click",u);t.addClass("showed-sorters").find("ul.sorter-list:first").show();setTimeout(function(){jQuery(document.body).one("click",u)},1)}function hi(){var n=jQuery(this).parents("div.advansed-filter:first"),t,i;if(n.hasClass("disable-sorter-block")||(t=n.find("li.sorter-item.selected:first"),n.length===0||t.length===0))return undefined;i=t.attr("data-id")||null;i&&v(n,i,{dsc:t.hasClass("asc-sort")})}function ci(n){var t=jQuery(n.target),r;if(t.hasClass("filter-item")||(t=t.parents("li.filter-item:first")),r=t.parents("div.advansed-filter:first"),r.length===0||t.length===0||t.hasClass("hidden-item")||t.hasClass("disabled-item"))return undefined;for(var u=r.data("filtervalues"),f=0,e=t.attr("data-id")||"",i=null,f=u?u.length:0;f--;)if(u[f].id===e){i=u[f];break}i.params||(i.params=i.multiselect===!0?[]:{});i!=null&&ni(r,i)}function li(n){var t=jQuery(n.target),i,r,u;if(t.hasClass("sorter-item")||(t=t.parents("li.sorter-item:first")),i=t.parents("div.advansed-filter:first"),i.length===0||t.length===0)return undefined;r=t.attr("data-id")||null;r&&(u=t.hasClass("asc-sort"),t.hasClass("asc-sort")||t.hasClass("dsc-sort")||!t.hasClass("dsc-sort-default")||(u=!0),v(i,r,{dsc:u}))}function ai(n){var i=null,r=null,t=jQuery(n.target),o,s;if(i=t.parents("div.advansed-filter:first"),r=t.hasClass("filter-item")?t:t.parents("div.filter-item:first"),t.hasClass("btn-show-hidden-filters"))return(o=jQuery(this).parents("div.advansed-filter:first"),o.hasClass("showed-hidden-filters"))?undefined:(u(n),jQuery(document.body).unbind("click",u),o.addClass("showed-hidden-filters").find("div.hidden-filters-container:first").show(),setTimeout(function(){jQuery(document.body).one("click",u)},1),undefined);if(t.hasClass("btn-show-datepicker"))return s=t.parents("span.advansed-filter-dateselector-date:first"),eu(n,i,r,s),undefined;if(i.length===0||r.length===0)return undefined;if(t.hasClass("btn-delete")){for(var h=r.attr("data-id"),e=i.data("filtervalues"),f=0,f=e?e.length:0;f--;)if(e[f].id===h)break;return ti(i,f!==-1?e[f]:null,r),undefined}(t.hasClass("group-selector")||t.parents("span.group-selector:first").length>0)&&wr(i,r);(t.hasClass("person-selector")||t.parents("span.person-selector:first").length>0)&&iu(i,r)}function vi(n){var t=null,i=jQuery(n.target);if(t=i.parents("div.advansed-filter:first"),t.length===0)return undefined;n.stopPropagation()}function yi(n){var t=null,i=jQuery(n.target);if(t=i.parents("div.advansed-filter:first"),t.length===0)return undefined;n.stopPropagation()}function p(n){var e=n&&typeof n=="object"?jQuery(n.target):b?jQuery(b):jQuery(),r=e.val(),u=e.parents("div.advansed-filter:first"),t=u.data("filtervalues"),i=0;if(!t||t.length===0)return undefined;for(i=t.length;i--;)if(t[i].id==="text")break;i!==-1&&(wasUpdated=!0,wasUpdated=!t[i].params&&r==""?!1:wasUpdated,wasUpdated&&(typeof r=="string"&&r.length>0?f(u,null,t[i],{value:r}):a(u,null,t[i])))}function pi(n){clearTimeout(ot);k>0&&(b=n.target,ot=setTimeout(p,k))}function wi(n){switch(n.keyCode){case 13:return p(n)}}function bi(){var u=jQuery(this),i=u.parents("div.advansed-filter:first"),r=i.find("input.advansed-filter-input:first").val(),n=i.data("filtervalues"),t=0;if(!n||n.length===0)return undefined;for(t=n.length;t--;)if(n[t].id==="text")break;t!==-1&&(typeof r=="string"&&r.length>0?f(i,null,n[t],{value:r}):a(i,null,n[t]))}function ki(){var n=jQuery(this).parents("div.advansed-filter:first"),i=n.data("filtervalues"),v=n.data("sortervalues"),r=0,t=null,c=null,e=n.find("div.filter-item"),s=null,u=0,f=!1;for(o=!0,n.removeClass("has-filters").find("div.advansed-filter-input:first").removeClass("has-value").find("input.advansed-filter-input:first").val(""),r=i?i.length:0;r--;)t=i[r],t.id==="text"&&t.isset===!0&&(f=!0,a(n,null,t)),t.id==="sorter"&&(c=t);for(u=e.length;u--;)f=!0,s=jQuery(e[u]),h(n,s,!0);o=!1;f===!0&&l(n,null,!0)}function rf(n,t,i){r!==i&&di(n,t,undefined,!0)}function di(n,t,i,r){var s=t.length>0?t.data("filtervalues")||[]:[],u=at(n,t);if(r===!0)for(var h=null,f=null,o=0,e=0,o=s.length;o--;){for(f=s[o],h=f.id,e=u.length;e--;)if(u[e].id==h)break;e===-1&&u.push({id:f.id,type:f.type,reset:!0})}u.length>0&&ut(null,t,u,null,i)}function ut(n,t,i,r,f){var nt=!1,tt=!1,et=!1,w=!1,s=t.filter(":first"),b=s.length>0?s.data("filtervalues")||[]:[],ct=s.length>0?s.data("sortervalues")||[]:[],a=0,e=null,h=null,d,ot,st,ht,y,it,g,ut,k,ft,p;if(et=!1,n&&((!s.hasClass("no-button")&&n.hasButton===!1||s.hasClass("no-button")&&(typeof n.hasButton=="undefined"||n.hasButton===!0))&&(et=!0),s[n.hasButton===!1?"addClass":"removeClass"]("no-button")),r===null)for(r=[],d=i.length;d--;)if(i[d].id==="sorter"&&i[d].params){e=i[d];h={id:e.params.id,title:e.params.title,dsc:e.params.dsc,sortOrder:e.params.sortOrder,selected:e.selected===!0};r.push(h);break}for(n=n||{},o=!0,nt=!1,tt=!1,y=0,it=r.length;y<it;y++){if(h=r[y],h.visible===!0&&gu(s,h.id,!0),h.visible===!1&&nf(s,h.id,!0)&&(tt=!0),h.selected===!0&&v(s,h.id,{dsc:h.dsc===!0||h.sortOrder==="descending"},!0)){tt=!0;break}h.def===!0&&v(s,h.id,{dsc:h.dsc===!0||h.sortOrder==="descending"},!0)}for(ot=s.find("li.item-item.sorter-item").not(".hidden-item"),ot.length===1&&s.find(".advansed-filter-sort-container:first").addClass("sorter-nochange"),w=!1,st=s.find("li.item-item.filter-item"),ht=s.find("div.advansed-filter-filters:first div.filter-item"),y=0,it=i.length;y<it;y++){if(e=i[y],(e.hasOwnProperty("visible")||e.hasOwnProperty("enable")||e.hasOwnProperty("reset")||e.hasOwnProperty("params"))&&(g=st.filter('[data-id="'+e.id+'"]'),ut=ht.filter('[data-id="'+e.id+'"]')),e.visible===!0?pu(g):e.visible===!1&&wu(s,ut,g,!0)&&(w=!0),e.enable===!0?bu(g):e.enable===!1&&ku(s,ut,g,!0)&&(w=!0),e.type==="combobox"&&e.hasOwnProperty("options")){for(a=b.length;a--;)if(e.id===b[a].id)break;a!==-1&&(k=b[a],k.options=e.options.slice(0),ft="-1",p=null,ft=typeof e.defaultvalue=="string"&&e.defaultvalue.length>0?e.defaultvalue:ft,p=typeof e.defaulttitle=="string"&&e.defaulttitle.length>0?e.defaulttitle:p,p=typeof k.defaulttitle=="string"&&k.defaulttitle.length>0?k.defaulttitle:p,p&&k.options.unshift({value:ft,classname:"default-value",title:p,def:!0}))}if(e.visible!==!1&&e.hasOwnProperty("params")&&e.params){for(a=b.length;a--;)if(e.id!=="sorter"&&e.id==b[a].id)break;a!==-1&&ni(s,b[a],e.params,!0)&&(w=!0)}(e.reset===!0||e.hasOwnProperty("params")&&e.params===null)&&du(s,ut,!0)&&(w=!0)}if((e.hasOwnProperty("visible")||e.hasOwnProperty("enable"))&&cr(s),n.store===!0&&!s.hasClass("is-init")&&(di(n,s,!0),n.inhash===!0))try{ASC.Controls.AnchorController.bind(function(n,t){return function(i){rf(n,t,i)}}(n,s))}catch(lt){}o=!1;s.hasClass("is-init")||f!==!0&&(rt(s),s.addClass("is-init"),l(s),nt=!0);et==!0&&(u(!0),c(s));f!==!0&&nt!==!0&&(w===!0||tt===!0)&&(nt=!0,l(s));s.trigger("adv-ready",[s,n,f])}function uf(n,t,i){for(var u=n.filter(":first"),e=u.length>0?u.data("filtervalues")||[]:[],r=0,r=e.length;r--;)if(t==e[r].id)break;r!==-1&&f(u,null,e[r],i)}function ff(n){var u=n.filter(":first"),t=u.data("filtervalues"),i=0,r=[];if(!t||t.length===0)return r;for(y(u,!0),i=t.length;i--;)t[i].isset===!0&&r.unshift(t[i]);return r}function ef(n){var i=!1,t=n.filter(":first"),r=t.length>0?t.data("filtervalues")||[]:[],e=t.find("div.advansed-filter-filters:first div.filter-item"),s=null,u=0,f=0;for(o=!0,t.removeClass("has-filters").find("div.advansed-filter-input:first").removeClass("has-value").find("input.advansed-filter-input:first").val(""),f=r?r.length:0;f--;)filtervalue=r[f],filtervalue.id==="text"&&filtervalue.isset===!0&&(i=!0,t.find("input.advansed-filter-input:first").val(""),a(t,null,filtervalue));for(u=e.length;u--;)i=!0,s=jQuery(e[u]),h(t,s,!0);o=!1;i===!0&&l(t)}function gi(n,t){var i=Math.floor(Math.random()*1e6);n.find("div.advansed-filter-hint-popup:first").attr("id",i).html(t);n.addClass("has-hint").find("label.advansed-filter-hint:first").attr("data-popupid",i).click(function(){jQuery(this).helper({BlockHelperID:jQuery(this).attr("data-popupid")});var n=jQuery("#"+jQuery(this).attr("data-popupid")),t=n.offset().top;n.offset().top>n.outerHeight()+20?n.removeClass("valign-bottom").addClass("valign-top").parents("div.advansed-filter-hint-popup-helper:first").removeClass("valign-bottom").addClass("valign-top").find("div.cornerHelpBlock:first").removeClass("pos_bottom").addClass("pos_top"):n.removeClass("valign-top").addClass("valign-bottom").parents("div.advansed-filter-hint-popup-helper:first").removeClass("valign-top").addClass("valign-bottom").find("div.cornerHelpBlock:first").removeClass("pos_top").addClass("pos_bottom")})}function of(t,i,r,u,f){var l=u.hasOwnProperty("zindex")?u.zindex===!0:!1,h=null,c=n(),e=null,s=0,o=null;for(h=n(sr(i,r,u)),bt(u,h,i,r),fi(h,u),f=f&&typeof f=="object"?f:null,s=t.length;s--;){if(o=n(t[s]).val(""),(e=o.is("div.advansed-filter")?o:o.parents("div.advansed-filter:first")).length>0){l===!0&&e.css("z-index",100-s);continue}e=h.clone(!0);e.insertBefore(o).attr("id",o.attr("id")||null);o.remove();e=e.hasClass("advansed-filter")?e:e.find("div.advansed-filter:first");l===!0&&e.css("z-index",100-s);e.addClass("has-events").data("filtervalues",i).data("sortervalues",r).data("customdata",f).data("filteroptions",u);u.hasOwnProperty("help")&&e.addClass("has-help").find("div.advansed-filter-helper:first").html(['<label class="advansed-filter-helper-label"><\/label>',u.help].join(""));!u.hintDefaultDisable&&u.hasOwnProperty("hint")&&gi(e,u.hint);c=c.add(e)}return c}function sf(t,i,r,u,f){var c=u.hasOwnProperty("zindex")?u.zindex===!0:!1,h=n(),e=null,o=0,s=null;for(f=f&&typeof f=="object"?f:null,o=t.length;o--;)(s=n(t[o]).val(""),(e=s.is("div.advansed-filter")?s:s.parents("div.advansed-filter:first")).length!==0)&&(e.hasClass("has-events")||(e.find("input.advansed-filter:first").val("").attr("maxlength",u.hasOwnProperty("maxlength")?u.maxlength:null),bt(u,e,i,r),fi(e,u),c===!0&&e.css("z-index",100-o),e.addClass("has-events").data("filtervalues",i).data("sortervalues",r).data("customdata",f).data("filteroptions",u),u.hasOwnProperty("help")&&e.addClass("has-help").find("div.advansed-filter-helper:first").html(['<label class="advansed-filter-helper-label"><\/label>',u.help].join("")),!u.hintDefaultDisable&&u.hasOwnProperty("hint")&&gi(e,u.hint)),h=h.add(e));return h}var ft=500,r="",et={filterContainer:"template-filter-container",filterItem:"template-filter-item"},w=!0,o=!1,ot=0,b=null,k=0,nr={},tr=[{type:"sorter",id:"sorter",hashmask:"sorter/{0}"},{type:"text",id:"text",hashmask:"text/{0}"}],ir=[],d="/",g=location.pathname.split("/");g.splice(g.length-1,1);d=g.join("/");n.fn.advansedFilter=n.fn.advansedfilter=function(t){var a,i,s;if(arguments.length===0)return ff(n(this));if(t===null)return ef(n(this));if(t&&typeof t=="string"){a=t;i=n(this).filter(":first");switch(a){case"sort":return tf(i,arguments.length>1?arguments[1]===!0:!0),it(i),rt(i),c(i),undefined;case"filters":return rr(i);case"storage":return at();case"resize":return i.is(":visible")&&(u(),it(i),rt(i),c(i)),undefined;default:return uf(i,arguments[0],arguments[1])}return undefined}var h=null,t=t&&typeof t=="object"?t:{},r=t.hasOwnProperty("filters")?t.filters:[],f=t.hasOwnProperty("sorters")?t.sorters:[],l=t.hasOwnProperty("resources")?t.resources:{},v=t.hasOwnProperty("maxfilters")?isFinite(+t.maxfilters)&&+t.maxfilters>=-1?+t.maxfilters:-1:-1,e=null,o=n(this);if(o.length===0)return o;for(s in l)l.hasOwnProperty(s)&&(nr[s]=l[s]);return(t.colcount=t.hasOwnProperty("colcount")&&isFinite(+t.colcount)?+t.colcount:1,t.colcount=t.colcount>4?4:t.colcount,!t.hintDefaultDisable&&ASC.Resources.Master.FilterHelpCenterLink&&(t.hint=t.hasOwnProperty("hint")?t.hint:ASC.Resources.Master.Resource.AdvansedFilterInfoText.format("<b>","<\/b>",'<br/><br/><a href="'+ASC.Resources.Master.FilterHelpCenterLink+'" target="_blank">',"<\/a>")),h={maxfilters:v},r=vt(r,jQuery.parseJSON(jQuery.toJSON(tr))),f=vt(f,jQuery.parseJSON(jQuery.toJSON(ir))),(e=sf(o,r,f,t,h)).length===o.length)?(ui(ut,[t,e,r,f,t.nonetrigger]),e):(e=of(o,r,f,t,h),ui(ut,[t,e,r,f,t.nonetrigger]),e)}})(jQuery,window,document,document.body);
(function(n){function k(){var r=this,f=r.$element,u=r.options;u.isInitializeItems&&"initAdvSelectorData"in r&&(r.initAdvSelectorData.call(r),r.options.showGroups&&(r.options.groupsChoose.length?r.rewriteObjectGroup.call(r,r.options.groupsChoose):"initAdvSelectorGroupsData"in r&&r.initAdvSelectorGroupsData.call(r)));f.on("click",n.proxy(tt,r));if(u.canadd)r.$advancedSelector.find(".advanced-selector-add-new-link").on("click",n.proxy(ot,r));n(document.body).on("keyup",n.proxy(g,r));r.$advancedSelector.find(".advanced-selector-block-list .advanced-selector-all-select input").on("click",n.proxy(p,r));r.$advancedSelector.find(".advanced-selector-block-list .advanced-selector-all-select").on("click",n.proxy(lt,r));r.$advancedSelector.find(".advanced-selector-search-field").on("keyup",n.proxy(nt,r));r.$advancedSelector.find(".advanced-selector-search-btn").on("click",n.proxy(r.options.isTempLoad?r.onSearchItemsTempLoad:r.onSearchItems,r));r.$advancedSelector.find(".advanced-selector-reset-btn").on("click",n.proxy(i,r));r.$advancedSelector.on("click",u.onechosen?".advanced-selector-list-items li":".advanced-selector-btn-action",n.proxy(wt,r));r.$advancedSelector.on("click",".advanced-selector-list-block .advanced-selector-btn-cancel",n.proxy(it,r));n(document.body).on("click",n.proxy(d,r));jq(window).bind("resizeWinTimerWithMaxDelay",function(){e.call(r)});n(document).keyup(function(n){var u,i;r.$advancedSelector.is(":visible")&&(i||(i=n),i.keyCode?u=i.keyCode:i.which&&(u=i.which),u==27&&t.call(r))})}function d(n){var i=this,r=n&&typeof n=="object"?jQuery(n.target):null;i.$advancedSelector.is(":visible")||i.$advancedSelector.hide();r.closest(i.$advancedSelector).length===0&&i.$advancedSelector.is(":visible")&&r.closest(i.$element).siblings(".advanced-selector-container").length===0&&t.call(i)}function g(n){var t=this,i=t.$itemsListSelector.find("li:visible");t.$advancedSelector.is(":visible")&&!t.$advancedSelector.find(".advanced-selector-add-new-block").is(":visible")&&l(n,i)}function l(t,i){function f(t){i.parent().find("li.active").removeClass("active");switch(t){case"up":r=r<=0?i.length-1:--r;break;case"down":r=r==i.length-1?0:++r}n(i[r]).addClass("active");var u=n(i[r]).position().top;i.parent().scrollTop(u-i.position().top)}var t=t||window.event,u=t.keyCode||t.charCode,r=i.index(i.filter(".active"));if(i.length!=0&&(u==40||u==38||u==13)){t.preventDefault();t.stopPropagation();switch(u){case 38:f("up");break;case 40:f("down");break;case 13:n(i[r]).trigger("click")}}}function nt(t){var i=this,u=n(t.target),f=u.siblings(".advanced-selector-search-btn"),e=u.siblings(".advanced-selector-reset-btn"),o=i.$itemsListSelector.find("li:not(.disabled)"),s=i.$advancedSelector.find(".advanced-selector-no-results"),r=i.$advancedSelector.find(".advanced-selector-all-select");i.options.showGroups?r.hasClass("chosen")||r.find("label").trigger("click"):r=i.$itemsListSelector.siblings(".advanced-selector-all-select");u.val()!==""?(f.trigger("click"),f.hide(),e.show(),i.options.showGroups||r.hide()):(s.hide(),o.show(),f.show(),e.hide(),i.options.isTempLoad&&i.initAdvSelectorDataTempLoad.call(i),i.options.showGroups||r.show())}function i(){var n=this,t=n.$advancedSelector.find(".advanced-selector-search .advanced-selector-reset-btn"),r=t.siblings(".advanced-selector-search-btn"),u=n.$itemsListSelector.find("li:not(.disabled)"),f=n.$advancedSelector.find(".advanced-selector-no-results"),i=n.$advancedSelector.find(".advanced-selector-all-select"),e=n.$advancedSelector.find(".advanced-selector-no-items");n.options.onechosen&&n.options.showGroups&&(n.$groupsListSelector.find("ul li").removeClass("chosen"),n.$groupsListSelector.siblings(".advanced-selector-all-select").addClass("chosen"));n.options.showGroups?i.hasClass("chosen")||i.find("label").trigger("click"):i.show();t.siblings("input").val("");f.hide();e.hide();u.show();t.hide();r.show();n.options.isTempLoad&&n.initAdvSelectorDataTempLoad.call(n)}function tt(){var n=this,i=n.$itemsListSelector.find(".advanced-selector-list li");n.$element.hasClass("disabled")||(n.$element.trigger("additionalClickEvent"),n.$advancedSelector.is(":visible")?t.call(n):(e.call(n),n.$advancedSelector.show(),a.call(n)),i.length===0&&(n.options.itemsChoose.length?n.rewriteObjectItem.call(n,n.options.itemsChoose):!n.options.isInitializeItems&&"initAdvSelectorData"in n&&n.initAdvSelectorData.call(n),n.options.showGroups&&(n.options.groupsChoose.length?n.rewriteObjectGroup.call(n,n.options.groupsChoose):"initAdvSelectorGroupsData"in n&&n.initAdvSelectorGroupsData.call(n))),n.$itemsListSelector.find(".advanced-selector-list li").filter(":visible").length?n.$advancedSelector.find(".advanced-selector-empty-list").hide():n.$advancedSelector.find(".advanced-selector-empty-list").show())}function e(){if(this.$element.length){var t=this,i=t.$element,f=t.options.inPopup?i.position():i.offset(),r=f.left,e=f.top+i.outerHeight()+4,o=n(window),c=n(window).width(),l=o.height(),a=o.scrollTop(),v=o.scrollLeft(),u=t.$advancedSelector.find(".advanced-selector-add-new-block"),s=t.$advancedSelector.widthCounted+parseInt(t.$advancedSelector.css("border-left-width"),10)+parseInt(t.$advancedSelector.css("border-right-width"),10),h=t.$advancedSelector.outerHeight();i.offset().left+s-(u.length&&!u.hasClass("right-position")?u.outerWidth():0)>v+c&&(r=Math.max(0,r+t.$element.outerWidth()-s));u.is(":visible")&&(r-=t.widthAddBlock);e+h>l+a&&(e=f.top-h);t.$advancedSelector.css({top:e,left:r})}}function a(){var n=this;n.$advancedSelector.find(".advanced-selector-search-field").focus()}function it(){t.call(this);rt.call(this)}function t(){var n=this;i.call(n);n.$advancedSelector.hide();u.call(n);n.$itemsListSelector.find("ul li").removeClass("active");n.$itemsListSelector.find("ul").scrollTop(0)}function rt(){var n=this;n.$advancedSelector.find(".advanced-selector-list-items li").removeClass("selected selected-before");n.$advancedSelector.find(".advanced-selector-list li input, .advanced-selector-all-select input").prop("checked",!1).prop("indeterminate",!1);n.options.showGroups&&n.$advancedSelector.find(".advanced-selector-list-groups li").removeClass("selected");i.call(n);w.call(n,n.options.itemsSelectedIds)}function v(t){for(var r,u=this,i=0,f=t.length;i<f;i++)r=u.$itemsListSelector.find("ul li[data-id="+t[i]+"]").filter(":not(.disabled)"),n(r).length&&r.addClass("selected-before");w.call(u,t)}function ut(){for(var r,f,t,e,n=this,u=[],i=0,o=n.items.length;i<o;i++)for(u=n.items[i].groups||[],r=0,f=u.length;r<f;r++)for(t=0,e=n.groups.length;t<e;t++)u[r].id==n.groups[t].id&&n.groups[t].items.push(n.items[i].id)}function o(n){for(var i=this,r=[],t=0,u=i.groups.length;t<u;t++)if(n==i.groups[t].id){r=i.groups[t].items;break}return r}function ft(n){for(var r,e,i=this,u=[],f=[],t=0,o=i.items.length;t<o;t++)if(n==i.items[t].id)for(u=i.items[t].hasOwnProperty("groups")?i.items[t].groups:[],r=0,e=u.length;r<e;r++)f.push(u[r].id);return f}function et(n,t){for(var i=0,r=t.length;i<r;i++)if(n==t[i].id)return t[i]}function s(n){var t=this,i,r;n&&(i=t.$groupsListSelector.find("li.chosen"),r=t.$advancedSelector.find(".advanced-selector-all-select").hasClass("chosen"),i&&i.length?t.$advancedSelector.find(".advanced-selector-add-new-block .advanced-selector-field-wrapper."+n+" .advanced-selector-field-list li[data-id="+i.attr("data-id")+"]").trigger("click"):r&&t.$advancedSelector.find(".advanced-selector-add-new-block .advanced-selector-field-wrapper."+n+" .advanced-selector-reset-btn").trigger("click"))}function ot(){var n=this,t=n.$advancedSelector.find(".advanced-selector-add-new-block"),i=n.options.inPopup?n.$advancedSelector.position().left:n.$advancedSelector.offset().left;t.length?t.is(":visible")?u.call(n):(t.show(),t.hasClass("right-position")||n.$advancedSelector.css({left:i-n.widthAddBlock}),n.$advancedSelector.css({width:n.widthAddBlock+(n.options.showGroups?n.widthSelector*2:n.widthSelector+5)+"px"}),y.call(n)):("initCreationBlock"in n&&n.initCreationBlock.call(n,{items:n.items,groups:n.groups}),st.call(n),y.call(n))}function u(){var n=this;n.$advancedSelector.find(".advanced-selector-add-new-block").hide();n.$advancedSelector.css({width:(n.options.showGroups?n.widthSelector*2:n.widthSelector+5)+"px"});e.call(n)}function st(){var i=this,t=i.$advancedSelector.find(".advanced-selector-add-new-block");t.find(".advanced-selector-btn-cancel").on("click",n.proxy(u,i));t.find(".advanced-selector-btn-add").on("click",n.proxy(ht,i));n(document).keyup(function(n){var r,i;t.is(":visible")&&(i||(i=n),i.keyCode?r=i.keyCode:i.which&&(r=i.which),r==13&&t.find(".advanced-selector-btn-add").trigger("click"))})}function y(){var n=this;n.$advancedSelector.find(".advanced-selector-add-new-block input[type=text]").first().focus()}function ht(t){var i=this,r=n(t.target),u=i.$advancedSelector.find(".advanced-selector-add-new-block");u.find(".advanced-selector-field-wrapper").removeClass("error");i.hideServerError(r);"createNewItemFn"in i&&i.createNewItemFn.call(i)}function ct(n){if(n){var t=this.$groupsListSelector.find(".advanced-selector-list li[data-id="+n+"]");t.find("input").prop("indeterminate",!0).prop("checked",!1);t.length&&!t.hasClass("chosen")&&t.find("label").trigger("click")}}function p(t){var u=this,o=n(t.target).closest(".advanced-selector-all-select"),s=o.find("input[type=checkbox]"),h=o.siblings("[class^=advanced-selector-list]").find("li:not(.disabled) input[type=checkbox]"),f=!s.is(":checked"),e;if(u.options.onechosen){o.trigger("click");return}n(t.target).is("input")||(f=s.is(":checked"));s.prop("checked",!f).prop("indeterminate",!1);h.prop("checked",!f).prop("indeterminate",!1);f?h.closest("li").removeClass("selected"):h.closest("li").addClass("selected").removeClass("chosen");o.toggleClass("chosen",!f);e=u.$itemsListSelector.find("li:not(.disabled)");u.$advancedSelector.find(".advanced-selector-no-items").hide();e.show();u.options.showGroups&&u.$groupsListSelector.length&&(f?e.removeClass("selected"):e.addClass("selected"),e.find("input[type=checkbox]").prop("checked",!f));i.call(u);u.selectedItems=f?[]:e.filter(".selected");r.call(u,e)}function lt(t){var i=this,r=n(t.target).closest(".advanced-selector-all-select"),u=i.$itemsListSelector.find("li:not(.disabled)");if(!i.options.showGroups){p.call(i,t);return}r.hasClass("chosen")||(i.$advancedSelector.find(".advanced-selector-no-items").hide(),u.show(),i.$groupsListSelector&&i.$groupsListSelector.find("li").removeClass("chosen"),r.addClass("chosen"),s.call(i,i.nameSimpleSelectorGroup))}function r(n){n=n.filter(":not(.disabled)");var t=n.find("input[type=checkbox]:checked").length,i=n.parents(".advanced-selector-block").find(".advanced-selector-selected-count");this.options.isTempLoad&&(t=this.selectedItems.length);t>0?i.text(t+" "+ASC.Resources.Master.Resource.SelectorSelectedItems).show():i.text("").hide()}function h(n,t){for(var i=0;i<n.length;i++)if(t.indexOf(n[i])===-1)return!1;return!0}function at(t){var i=this,u=n(t.target).closest("li"),e=u.find("input[type=checkbox]"),f=e.is(":checked")?!0:!1;u.hasClass("disabled")||(i.options.onechosen?(i.$itemsListSelector.find("li.selected").removeClass("selected"),u.addClass("selected"),i.selectedItems=[],i.selectedItems.push(u[0])):(n(t.target).is(u.find("input"))&&(f=e.is(":checked")?!1:!0),e.prop("checked",!f),f?(i.selectedItems.splice(n.inArray(u[0],i.selectedItems),1),u.removeClass("selected")):(u.addClass("selected"),i.selectedItems.push(u[0])),c.call(i,i.$itemsListSelector),r.call(i,i.$itemsListSelector)),i.$groupsListSelector&&i.$groupsListSelector.length&&b.call(i,[u.attr("data-id")],!f))}function w(t){for(var u,e,w,v,s,y,i=this,b=i.$itemsListSelector.find("li:not(.disabled)"),l=[],f=[],p=[],a=0,k=t.length;a<k;a++)u=b.filter("[data-id ="+t[a]+"]"),n(u).length&&!u.find("input").is(":checked")&&(u.addClass("selected"),u.find("input").prop("checked",!0),i.selectedItems.push(u));if(i.$groupsListSelector&&i.$groupsListSelector.length)for(l=n.grep(i.items,function(i){return n.inArray(i.id,t)!=-1}),l.forEach(function(n){f=f.concat(n.groups).unique()}),l.forEach(function(n){p.push(n.id)}),e=0,w=f.length;e<w;e++)v=i.$groupsListSelector.find("li[data-id="+f[e].id+"]"),s=o.call(i,f[e].id),s=n.grep(s,function(t){return n.inArray(t,i.options.itemsDisabledIds)==-1}),n(v).length&&(y=h(s,p)?!0:!1,v.find("input").prop("indeterminate",!y).prop("checked",y));c.call(i,i.$itemsListSelector);r.call(i,i.$itemsListSelector)}function c(n){var r=n.find("li:not(.disabled) input[type=checkbox]:checked").length,u=this.$advancedSelector.find(".advanced-selector-all-select"),i,t;r==0?(i=!1,t=!1):(t=!0,r==n.find("li:not(.disabled)").length&&(i=!0,t=!1));u.find("input").prop("checked",i).prop("indeterminate",t)}function b(t,i){for(var l,y,s,p,w,f=this,e=[],v=f.$itemsListSelector.find("li.selected"),c=[],u,r,a=0,b=t.length;a<b;a++)e=e.concat(ft.call(f,t[a])).unique();for(l=0,y=v.length;l<y;l++)c.push(n(v[l]).attr("data-id"));for(s=0,p=e.length;s<p;s++)r=f.$groupsListSelector.find("li[data-id="+e[s]+"]").find("input[type=checkbox]"),u=o.call(f,e[s]),u=n.grep(u,function(t){return n.inArray(t,f.options.itemsDisabledIds)==-1}),i?h(u,c)?(r.prop("indeterminate",!1).prop("checked",!0),r.closest("li").not(".selected").addClass("selected")):r.prop("indeterminate",!0):h(u,c)||(w=c.some(function(t){return n.inArray(t,u)!==-1}),r.prop("checked",!1).prop("indeterminate",!1),r.closest("li").removeClass("selected"),w&&r.prop("indeterminate",!0))}function vt(t){var i=this,l=n(t.target),e=l.closest("li"),f=l.is(":checked")?!1:!0,s=[],y,h,a,v,u;if(i.options.onechosen){e.trigger("click");return}for(i.$advancedSelector.find(".advanced-selector-search-field").val(""),f?e.removeClass("selected"):(i.$advancedSelector.find(".advanced-selector-all-select").removeClass("chosen"),e.addClass("selected")),l.prop("indeterminate",!1).prop("checked",!f),y=i.$groupsListSelector.find("li.selected"),i.$itemsListSelector.find("li").hide(),s=o.call(i,e.attr("data-id")),h=0,a=s.length;h<a;h++)v=s[h],u=i.$itemsListSelector.find("li[data-id="+v+"]").filter(":not(.disabled)"),f?u.removeClass("selected"):u.addClass("selected"),f?i.selectedItems.splice(i.selectedItems.indexOf(u)):i.selectedItems.push(u),u.find("input").prop("checked",!f),u.show();b.call(i,s,!f,i.$advancedSelector);c.call(i,i.$itemsListSelector);r.call(i,i.$itemsListSelector)}function yt(t){var i=this,f=n(t.target).closest("li"),y=f.find("label"),c=f.attr("data-id"),l=i.$groupsListSelector.find("li"),o=i.$itemsListSelector.find("li:not(.disabled)"),a=i.$groupsListSelector.siblings(".advanced-selector-all-select"),e=i.$advancedSelector.find(".advanced-selector-no-items"),v=i.$advancedSelector.find(".advanced-selector-no-results"),r,u,h;for(a.removeClass("chosen"),l.removeClass("chosen"),f.addClass("chosen"),r=pt(i.items,c),o.hide(),e.hide(),v.hide(),r.length==0&&e.show(),u=0,h=r.length;u<h;u++)i.$itemsListSelector.find("li[data-id='"+r[u]+"']").show();i.$itemsListSelector.is(":visible")&&!o.filter(":visible").length&&e.show();s.call(i,i.nameSimpleSelectorGroup)}function pt(n,t){for(var u,o,f=[],i,e,r=0,s=n.length;r<s;r++)if(i=n[r].groups,e=n[r].id,i&&i.length)for(u=0,o=i.length;u<o;u++)e in f||i[u].id!=t||f.push(e);return f}function wt(i){for(var r=this,e=n(i.target),o=r.options.isTempLoad?r.selectedItems:r.$itemsListSelector.find("li.selected"),u=[],s,f=0,h=o.length;f<h;f++)u.push(et(n(o[f]).attr("data-id"),r.items));if(r.options.onechosen&&e.hasClass("selected-before")){e.removeClass("selected-before");t.call(r);return}t.call(r);s=r.options.onechosen?u:[u];r.$element.trigger("showList",s)}function bt(){var t=this;t.$groupsListSelector.on("click","ul li input",n.proxy(vt,t)).on("click","ul li",n.proxy(yt,t))}jQuery.expr[":"].icontains=function(n,t,i){return jQuery(n).text().toUpperCase().indexOf(i[3].toUpperCase())>=0};Array.prototype.unique=function(){for(var t,n=this.concat(),i=0;i<n.length;++i)for(t=i+1;t<n.length;++t)n[i]===n[t]&&n.splice(t--,1);return n};var kt=function(t){function o(n){var t=n&&typeof n=="object"?jQuery(n.target):null;t.closest(".advanced-selector-field-search").length===0&&(i.hide(),i.find("li.active").removeClass("active"),i.scrollTop(0))}function s(t){var i=r.find("li:visible");n(i).parent().is(":visible")&&l(t,i)}function h(n){var n=n||window.event,h=n.keyCode||n.charCode;if(h!=13){var t=r.find("input").val(),o=i.find('li:icontains("'+t+'")'),s=r.parents(".advanced-selector-field-wrapper");i.hide();i.find("li.selected").removeClass("selected");r.find("input").attr("data-id","");i.find("li").removeClass("chosen").hide();o.length?(i.show(),o.addClass("chosen").show(),s.removeClass("error")):u.showErrorField.call(u,{field:s,error:""});t.length?(f.show(),e.hide()):(f.hide(),e.show())}}function c(t){var r=n(t.target),o=r.parent().siblings(".advanced-selector-field");i.find("li.selected").removeClass("selected");r.addClass("selected");o.val(r.text());o.attr("data-id",r.attr("data-id"));i.hide();f.show();e.hide();"onChooseItemSimpleSelector"in u&&u.onChooseItemSimpleSelector.call(this,{id:r.attr("data-id")})}function a(){var n=t.find(".advanced-selector-field-search:first"),i=n.find(".advanced-selector-field-list");n.parents(".advanced-selector-field-wrapper").removeClass("error");n.find("input").val("").removeAttr("data-id");i.find("li").removeClass("selected").show();i.hide();f.hide();e.show()}var u=this,r=t.find(".advanced-selector-field-search:first"),i=r.find(".advanced-selector-field-list"),f=t.find(".advanced-selector-reset-btn"),e=t.find(".advanced-selector-search-btn");r.find("input").on("keyup",h).on("focus",function(){n(this).hasClass("disabled")||(i.find("li.chosen").length||r.find("input").val()=="")&&i.show()});r.find("li").on("click",n.proxy(c,u));u.$advancedSelector.on("click",o);f.on("click",a);n(document.body).on("keyup",n.proxy(s,u))},f=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.advancedSelector.defaults,i);this.init()};f.prototype={constructor:f,init:function(){var t=this,r,u,i,f,e;t.heightListWithoutCreate=225;t.heightListChooseOne=200;t.widthSelector=t.options.width?t.options.width:211;t.widthAddBlock=216;t.items=[];t.groups=[];t.nameSimpleSelectorGroup="";t.selectedItems=[];t.cache={};r=5;u=n.tmpl(t.options.templates.selectorContainer,{opts:t.options});t.options&&t.$element.after(u);t.$advancedSelector=u;t.$itemsListSelector=t.$advancedSelector.find(".advanced-selector-list-items");t.options.showGroups&&(t.$groupsListSelector=t.$advancedSelector.find(".advanced-selector-list-groups"));t.$advancedSelector.widthCounted=t.options.showGroups?t.widthSelector*2:t.widthSelector+r;t.$advancedSelector.css({width:t.$advancedSelector.widthCounted});(t.options.height||t.options.width)&&(i=t.$advancedSelector.find(".advanced-selector-list-block"),t.options.height&&(f=i.innerHeight()-i.height(),t.$advancedSelector.css({height:t.options.height+f}),t.$advancedSelector.heightCounted=t.options.height+f),t.options.width&&(e=i.innerWidth()-i.width(),t.$advancedSelector.widthCounted=(t.options.showGroups?t.widthSelector:t.widthSelector+r)-e,t.$advancedSelector.find(".advanced-selector-block-list").css({width:t.$advancedSelector.widthCounted+"px"})));k.call(t)},displayAddItemBlock:function(t){var i=this,e=i.$advancedSelector.find(".advanced-selector-add-new-block"),u=n(window).scrollLeft(),f=i.options.inPopup?i.$advancedSelector.position().left:i.$advancedSelector.offset().left,r=n.tmpl(i.options.templates.addNewPanel,{fields:t.newoptions,btnTitle:t.newbtn});u+i.$advancedSelector.offset().left<i.widthAddBlock?(i.$advancedSelector.append(r),i.$advancedSelector.find(".advanced-selector-add-new-block").addClass("right-position")):(i.$advancedSelector.prepend(r),i.$advancedSelector.css({left:f-i.widthAddBlock}));i.$advancedSelector.css({width:i.widthAddBlock+(i.options.showGroups?i.widthSelector*2:i.widthSelector+5)+"px"})},displayLoadingBtn:function(n){var t=n.btn.parents(".advanced-selector-btn-cnt"),i='<div class="advanced-selector-loader">'+n.text+"<\/div>";t.find("button").addClass("disable");t.append(i);this.$advancedSelector.find(".advanced-selector-add-new-block input").attr("disabled","disabled")},hideLoadingBtn:function(t){var i=n(t).parents(".advanced-selector-btn-cnt");i.find("button").removeClass("disable");i.find(".advanced-selector-loader").remove();this.$advancedSelector.find(".advanced-selector-add-new-block input").removeAttr("disabled")},showErrorField:function(t){n(t.field).addClass("error");n(t.field).find(".advanced-selector-field-error").text(t.error)},showServerError:function(t){var i='<div class="advanced-selector-server-error" title="{0}">{0}<\/div>'.format(Encoder.htmlEncode(t.error));n(t.field).parents(".advanced-selector-btn-cnt").append(i)},hideServerError:function(n){n.parents(".advanced-selector-btn-cnt").find(".advanced-selector-server-error").remove()},actionsAfterCreateItem:function(t){var i=this,f=t.newitem,r=t.response,o=t.nameProperty,s,e,c,h;if(r.hasOwnProperty(o)){for(s=n.isArray(r[o])?r[o][0].id:r[o],e=0,c=i.groups.length;e<c;e++)s==i.groups[e].id&&i.groups[e].items.push(r.id);f.groups=r.groups}i.items.push(f);h=n.tmpl(i.options.templates.itemList,{Items:[f],isJustList:i.options.onechosen});(i.options.showme||i.options.withadmin)&&i.$itemsListSelector.find("li").not(".disabled").length?i.$itemsListSelector.find(".advanced-selector-list li:not(.disabled)").first().after(h):i.$itemsListSelector.find(".advanced-selector-list").prepend(h);i.select.call(i,[f.id]);i.$advancedSelector.find(".advanced-selector-add-new-block input").val("");i.$advancedSelector.find(".advanced-selector-no-results, .advanced-selector-no-items, .advanced-selector-empty-list").hide();i.options.onechosen||i.$advancedSelector.find(".advanced-selector-all-select").show();i.options.showGroups&&ct.call(i,s);i.$element.trigger("afterCreate",f);u.call(i)},disableDefaultItemsIds:function(t){for(var r,u=this,i=0,f=t.length;i<f;i++)r=u.$itemsListSelector.find("ul li[data-id="+t[i]+"]"),n(r).length&&r.addClass("disabled")},onSearchItems:function(){var t=this;if(t.$advancedSelector.find(".advanced-selector-loader-list").is(":visible")){setTimeout(function(){t.onSearchItems.call(t)},100);return}var i=t.$advancedSelector.find(".advanced-selector-search-field"),e=i.length!==0?n.trim(i.val()):"",r=t.$itemsListSelector.find("li:not(.disabled)"),u=r.filter(':icontains("'+e+'")'),f=t.$advancedSelector.find(".advanced-selector-no-results");r.hide();u.length?(f.hide(),u.show()):f.show()},initDataSimpleSelector:function(t){var i=this,r=t.tag,f=n.tmpl(i.options.templates.addNewItems,{Items:t.items}),u=i.$advancedSelector.find(".advanced-selector-field-wrapper."+r);i.nameSimpleSelectorGroup=r;u.find(".advanced-selector-field-list").html(f);kt.call(i,u);i.options.showGroups&&s.call(i,r)},showLoaderSimpleSelector:function(n){var t=this.$advancedSelector.find(".advanced-selector-field-wrapper."+n+" .advanced-selector-field-search");t.append('<div class="advanced-selector-field-loader"><\/div>')},hideLoaderSimpleSelector:function(n){var t=this.$advancedSelector.find(".advanced-selector-field-wrapper."+n+" .advanced-selector-field-search");t.find(".advanced-selector-field-loader").remove()},rewriteObjectItem:function(n){var r=this,t,u,i;for(r.items=[],t=0,u=n.length;t<u;t++)i={},i.title=n[t].displayName||n[t].title||n[t].name||n[t].Name,n[t].hasOwnProperty("id")?i.id=n[t].id:n[t].hasOwnProperty("Id")&&(i.id=n[t].Id),n[t].hasOwnProperty("isPending")&&(i.status=n[t].isPending?"pending":""),(n[t].hasOwnProperty("groups")||n[t].hasOwnProperty("projectId"))&&(i.groups=n[t].groups||[{id:n[t].projectId.toString()}],n[t].groups&&n[t].groups.length&&!n[t].groups[0].id&&i.groups.map(function(n){n.id=n.ID})),n[t].hasOwnProperty("contactclass")&&(i.type=n[t].contactclass),n[t].hasOwnProperty("isPrivate")&&(i.data=n[t].isPrivate),r.items.push(i);r.items=r.items.sort(r.options.sortMethod||SortData);r.$element.data("items",r.items);r.showItemsListAdvSelector.call(r)},rewriteObjectGroup:function(n){var t=this,i,u,r;for(t.groups=[],i=0,u=n.length;i<u;i++)r={},r.title=n[i].name||n[i].title,r.id=n[i].id,r.items=n[i].items||[],t.groups.push(r);t.groups=t.groups.sort(SortData);t.options.showGroups&&t.showGroupsListAdvSelector.call(t)},showItemsListAdvSelector:function(){var t=this,r=t.items,f,u,e,o,i;if(t.options.showme)for(f={},u=0,e=r.length;u<e;u++)r[u].id==Teamlab.profile.id&&(f=r[u],f.title=ASC.Resources.Master.Resource.MeLabel,r.splice(u,1),r.unshift(f));o=n.tmpl(t.options.templates.itemList,{Items:r,isJustList:t.options.onechosen});(!t.options.canadd&&t.options.showGroups||t.options.isTempLoad)&&(i=177);t.options.onechosen&&(i=t.options.canadd?t.heightListChooseOne:t.heightListWithoutCreate);t.options.onechosen||!t.options.canadd||t.options.showGroups||(i=131);t.options.height&&(i=t.options.height);i&&(t.$itemsListSelector.height(i),t.$itemsListSelector.find(".advanced-selector-list").height(i));t.$itemsListSelector.find(".advanced-selector-list").html(o);t.$itemsListSelector.find("ul").off("click").on("click","li",n.proxy(at,t));t.disableDefaultItemsIds.call(t,t.options.itemsDisabledIds);t.$itemsListSelector.find("li:not(.disabled)").length?(t.$advancedSelector.find(".advanced-selector-empty-list").hide(),t.$advancedSelector.find(".advanced-selector-all-select").show()):(t.$advancedSelector.find(".advanced-selector-empty-list").show(),t.$advancedSelector.find(".advanced-selector-all-select").hide());t.options.showGroups?bt.call(t):v.call(t,t.options.itemsSelectedIds);a.call(t)},showGroupsListAdvSelector:function(){var t=this,r=n.tmpl(t.options.templates.groupList,{Items:t.groups,isJustList:t.options.onechosen}),i;t.groups.length?t.$groupsListSelector.find(".advanced-selector-list").html(r):t.$groupsListSelector.find(".advanced-selector-no-groups").show();t.options.onechosen&&(i=t.options.canadd?t.heightListChooseOne:t.heightListWithoutCreate-28,t.$groupsListSelector.find(".advanced-selector-list").height(i));ut.call(t);v.call(t,t.options.itemsSelectedIds)},showLoaderListAdvSelector:function(n){var t=this,i;switch(n){case"items":i=t.$itemsListSelector;break;case"groups":if(!t.$groupsListSelector)return;i=t.$groupsListSelector}t.$advancedSelector.find(".advanced-selector-add-new, .advanced-selector-all-select").hide();i.append('<div class="advanced-selector-loader-list"><\/div>')},hideLoaderListAdvSelector:function(){this.$advancedSelector.find(".advanced-selector-add-new, .advanced-selector-all-select").show();this.$advancedSelector.find(".advanced-selector-loader-list").hide()},reset:function(n){var t=this,f=n||!1,u=t.$itemsListSelector.find("ul li");u.filter(".selected,.selected-before").removeClass("selected selected-before");f||u.removeClass("disabled");t.$advancedSelector.find(".advanced-selector-list li input, .advanced-selector-all-select input").prop("checked",!1).prop("indeterminate",!1);t.options.showGroups&&t.$advancedSelector.find(".advanced-selector-list-groups li").removeClass("selected");t.selectedItems=[];t.options.itemsSelectedIds=[];i.call(t);r.call(t,t.$itemsListSelector)},select:function(t){var u=this,i,f,r;for(u.options.itemsSelectedIds=u.options.itemsSelectedIds.concat(t).unique(),i=0,f=t.length;i<f;i++)r=u.$itemsListSelector.find("ul li[data-id="+t[i]+"]"),n(r).length&&!r.find("input").is(":checked")&&r.trigger("click")},unselect:function(t){var r=this,u,f,i;for(r.options.itemsSelectedIds=n.grep(r.options.itemsSelectedIds,function(i){return n.inArray(i,t)==-1}),u=0,f=t.length;u<f;u++)i=r.$itemsListSelector.find("ul li[data-id="+t[u]+"]"),r.options.onechosen&&i.removeClass("selected"),n(i).length&&i.find("input").is(":checked")&&i.trigger("click")},disable:function(t){var i=this,r,u,f;for(i.unselect.call(i,t),i.options.itemsDisabledIds=i.options.itemsDisabledIds.concat(t).unique(),r=0,u=t.length;r<u;r++)f=i.$itemsListSelector.find("ul li[data-id="+t[r]+"]"),n(f).length&&i.$itemsListSelector.find("ul li[data-id="+t[r]+"]").addClass("disabled").hide()},undisable:function(t){var r=this,i,u,f;for(r.options.itemsDisabledIds=n.grep(r.options.itemsDisabledIds,function(i){return n.inArray(i,t)==-1}),i=0,u=t.length;i<u;i++)f=r.$itemsListSelector.find("ul li[data-id="+t[i]+"]"),n(f).length&&r.$itemsListSelector.find("ul li[data-id="+t[i]+"]").removeClass("disabled").show()},add:function(t){var i=this,u=n.grep(i.items,function(n){return n.id==t.id}).length,r;u?(r=i.$itemsListSelector.find("ul li[data-id="+t.id+"]"),r.hasClass("disabled")&&r.removeClass("disabled")):"addNewItemObj"in i&&i.$itemsListSelector.find("ul li").length&&i.addNewItemObj.call(i,t)},rewriteItemList:function(n,t){var i=this;n=n||[];t=t||[];i.$itemsListSelector.find("ul li").length?(i.rewriteObjectItem.call(i,n),i.select.call(i,t)):(i.options.itemsChoose=n,i.options.itemsSelectedIds=t)},selectBeforeShow:function(n){this.$element.trigger("showList",arguments);this.select([n.id])}};n.fn.advancedSelector=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var u=n(this),r=u.data("advancedSelector"),e=n.extend({},n.fn.advancedSelector.defaults,u.data(),typeof t=="object"&&t);r||u.data("advancedSelector",r=new f(this,e));typeof t=="string"&&r[t].apply(r,i)})};n.fn.advancedSelector.defaults={itemsChoose:[],groupsChoose:[],itemsSelectedIds:[],itemsDisabledIds:[],showGroups:!1,onechosen:!1,canadd:!1,showme:!1,showSearch:!0,inPopup:!1,isInitializeItems:!1,isTempLoad:!1,templates:{selectorContainer:"template-selector-container",itemList:"template-selector-items-list",groupList:"template-selector-groups-list",addNewPanel:"template-selector-add-new-item",selectedItemsList:"template-selector-selected-items",addNewItems:"template-selector-add-new-list-items",addNewItemsSelect:"template-selector-add-new-select-items"}};n.fn.advancedSelector.Constructor=f})(jQuery,window,document,document.body);
(function(n){var t=ASC.Resources.Master.Resource,i=Teamlab,r=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.useradvancedSelector.defaults,i);this.init()};r.prototype=n.extend({},n.fn.advancedSelector.Constructor.prototype,{constructor:r,initCreationBlock:function(n){for(var o,r=this,f={},s=[],e=n.groups,u=0,h=e.length;u<h;u++)s.push({title:e[u].title,id:e[u].id});f.newoptions=[{title:t.SelectorType,type:"choice",tag:"type",items:[{type:"user",title:t.SelectorUser},{type:"visitor",title:t.SelectorVisitor}]},{title:t.SelectorFirstName,type:"input",tag:"first-name"},{title:t.SelectorLastName,type:"input",tag:"last-name"},{title:t.SelectorEmail,type:"input",tag:"email"},{title:t.SelectorGroup,type:"select",tag:"group"}];f.newbtn=t.InviteButton;r.displayAddItemBlock.call(r,f);r.initDataSimpleSelector.call(r,{tag:"group",items:s});o=r.$advancedSelector.find(".advanced-selector-add-new-block");r.options.withGuests?i.getQuotas({},{success:function(n,t){t.availableUsersCount==0&&o.find(".type select").val("visitor").attr("disabled","disabled")},error:function(){}}):o.find(".type").hide()},initAdvSelectorData:function(){var t=this,i=t.options.showDisabled?window.UserManager.getAllUsers():ASC.Resources.Master.ApiResponses_ActiveProfiles.response;t.options.withGuests||(i=n.grep(i,function(n){return n.isVisitor==!1}));t.rewriteObjectItem.call(t,i)},initAdvSelectorGroupsData:function(){var n=this,i=ASC.Resources.Master.ApiResponses_Groups.response,t,r;n.rewriteObjectGroup.call(n,i);n.options.isAdmin&&(t=[],r=[],n.$groupsListSelector.find(".advanced-selector-list li").hide(),n.items.forEach(function(n){t=t.concat(n.groups).unique()}),t.forEach(function(t){n.$groupsListSelector.find(".advanced-selector-list li[data-id="+t.id+"]").show()}))},rewriteObjectItem:function(n){var r=this,t,u,i;for(r.items=[],t=0,u=n.length;t<u;t++)i={},i.title=n[t].displayName||n[t].title,i.id=n[t].id,i.isVisitor=n[t].isVisitor,i.profileUrl=n[t].profileUrl,n[t].hasOwnProperty("isPending")&&(i.status=n[t].isPending?"pending":""),n[t].hasOwnProperty("groups")&&(i.groups=n[t].groups,n[t].groups&&n[t].groups.length&&!n[t].groups[0].id&&i.groups.map(function(n){n.id=n.ID})),r.items.push(i);r.items=r.items.sort(SortData);r.$element.data("items",r.items);r.showItemsListAdvSelector.call(r)},createNewItemFn:function(){var n=this,r=n.$advancedSelector.find(".advanced-selector-add-new-block"),e=r.find(".advanced-selector-btn-add"),f,o,s,u;if(n.options.withGuests)switch(r.find(".type select").val()){case"user":o=!1;break;case"visitor":o=!0}else o=!1;if(s=r.find(".group input").attr("data-id"),u={isVisitor:o,firstname:r.find(".first-name input").val().trim(),lastname:r.find(".last-name input").val().trim(),email:r.find(".email input").val().trim(),department:s&&s.length?[s]:[]},u.firstname||(n.showErrorField.call(n,{field:r.find(".first-name"),error:t.ErrorEmptyUserFirstName}),f=!0),u.lastname||(n.showErrorField.call(n,{field:r.find(".last-name"),error:t.ErrorEmptyUserLastName}),f=!0),u.firstname&&u.firstname.length>64&&(n.showErrorField.call(n,{field:r.find(".first-name"),error:t.ErrorMesLongField64}),f=!0),u.lastname&&u.lastname.length>64&&(n.showErrorField.call(n,{field:r.find(".last-name"),error:t.ErrorMesLongField64}),f=!0),jq.isValidEmail(u.email)||(n.showErrorField.call(n,{field:r.find(".email"),error:t.ErrorNotCorrectEmail}),f=!0),!u.department.length&&r.find(".group input").val()&&(n.showErrorField.call(n,{field:r.find(".group"),error:t.ErrorGroupNotExist}),f=!0),f){r.find(".error input").first().focus();return}i.getQuotas({},{success:function(r,f){if(f.availableUsersCount==0&&!u.isVisitor){n.showServerError.call(n,{field:e,error:t.UserSelectorErrorLimitUsers+f.maxUsersCount});return}i.addProfile({},u,{before:function(){n.displayLoadingBtn.call(n,{btn:e,text:t.LoadingProcessing})},success:function(i,r){r=this.__responses[0];var u={id:r.id,title:r.displayName,isVisitor:r.isVisitor,status:"pending",groups:[]};toastr.success(t.UserSelectorAddSuccess.format("<b>"+u.title+"<\/b>"));n.actionsAfterCreateItem.call(n,{newitem:u,response:r,nameProperty:"groups"})},error:function(){n.showServerError.call(n,{field:e,error:this.__errors[0]})},after:function(){n.hideLoadingBtn.call(n,e)}})},error:function(){}})},addNewItemObj:function(n){var t={id:n.id,title:n.displayName,isVisitor:n.isVisitor,status:n.isPending?"pending":"",groups:[]};this.actionsAfterCreateItem.call(this,{newitem:t,response:n,nameProperty:"groups"})}});n.fn.useradvancedSelector=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var f=n(this),u=f.data("useradvancedSelector"),e=n.extend({},n.fn.useradvancedSelector.defaults,f.data(),typeof t=="object"&&t);u||f.data("useradvancedSelector",u=new r(this,e));typeof t=="string"&&u[t].apply(u,i)})};n.fn.useradvancedSelector.defaults=n.extend({},n.fn.advancedSelector.defaults,{showme:!0,addtext:t.UserSelectorAddText,noresults:t.UserSelectorNoResults,noitems:t.UserSelectorNoItems,nogroups:t.UserSelectorNoGroups,emptylist:t.UserSelectorEmptyList,isAdmin:!1,withGuests:!0,isInitializeItems:!0})})(jQuery);
(function(n){var t=ASC.Resources.Master.Resource,i=Teamlab,r=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.groupadvancedSelector.defaults,i);this.init()};r.prototype=n.extend({},n.fn.advancedSelector.Constructor.prototype,{constructor:r,initCreationBlock:function(){var n=this,r={},u=[],f;r.newoptions=[{title:t.SelectorTitle,type:"input",tag:"title"},{title:t.SelectorHead,type:"select",tag:"manager"}];r.newbtn=t.CreateButton;n.displayAddItemBlock.call(n,r);f={employeeStatus:1,employeeType:1};i.getProfilesByFilter({},{before:n.showLoaderSimpleSelector.call(n,"manager"),filter:f,success:function(r,f){for(var e=0,o=f.length;e<o;e++)f[e].id==i.profile.id?u.unshift({title:t.MeLabel,id:f[e].id}):u.push({title:f[e].displayName,id:f[e].id});n.initDataSimpleSelector.call(n,{tag:"manager",items:u});n.hideLoaderSimpleSelector.call(n,"manager")},error:function(n,t){toastr.error(t)}})},initAdvSelectorData:function(){var n=this,t=ASC.Resources.Master.ApiResponses_Groups.response;n.rewriteObjectItem.call(n,t)},rewriteObjectItem:function(n){var t=this,i,e,r,u,f;for(t.items=[],i=0,e=n.length;i<e;i++)r={},r.title=n[i].name,r.id=n[i].id,t.items.push(r);t.items=t.items.sort(SortData);t.options.withadmin&&(u=ASC.Resources.Master.GroupSelector_WithGroupAdmin,t.items.unshift({id:u.Id,title:u.Name}));t.options.witheveryone&&(f=ASC.Resources.Master.GroupSelector_WithGroupEveryone,t.items.unshift({id:f.Id,title:f.Name}));t.$element.data("items",t.items);t.showItemsListAdvSelector.call(t)},createNewItemFn:function(){var n=this,r=n.$advancedSelector.find(".advanced-selector-add-new-block"),e=r.find(".advanced-selector-btn-add"),f,o=r.find(".manager input").attr("data-id"),u={groupName:r.find(".title input").val().trim(),groupManager:o&&o.length?o:"00000000-0000-0000-0000-000000000000",groupId:null,members:[]};if(u.groupName||(n.showErrorField.call(n,{field:r.find(".title"),error:t.ErrorEmptyGroupTitle}),f=!0),u.groupName&&u.groupName.length>64&&(n.showErrorField.call(n,{field:r.find(".title"),error:t.ErrorMesLongField64}),f=!0),u.groupManager=="00000000-0000-0000-0000-000000000000"&&r.find(".manager input").val().trim()&&(n.showErrorField.call(n,{field:r.find(".manager"),error:t.ErrorHeadNotExist}),f=!0),f){r.find(".error input").first().focus();return}i.addGroup(null,u,{before:function(){n.displayLoadingBtn.call(n,{btn:e,text:t.LoadingProcessing})},after:function(){n.hideLoadingBtn.call(n,e)},error:function(){n.showServerError.call(n,{field:e,error:this.__errors[0]})},success:function(i,r){r=this.__responses[0];var u={id:r.id,title:r.name,head:r.manager};toastr.success(t.GroupSelectorAddSuccess.format("<b>"+u.title+"<\/b>"));n.actionsAfterCreateItem.call(n,{newitem:u,response:r})}})},addNewItemObj:function(n){var t=this,i={id:n.id,title:n.name,head:n.manager};t.actionsAfterCreateItem.call(t,{newitem:i,response:n})}});n.fn.groupadvancedSelector=function(t,i){return this.each(function(){var u=n(this),f=u.data("groupadvancedSelector"),e=n.extend({},n.fn.groupadvancedSelector.defaults,u.data(),typeof t=="object"&&t);f||u.data("groupadvancedSelector",f=new r(this,e));typeof t=="string"&&f[t](i)})};n.fn.groupadvancedSelector.defaults=n.extend({},n.fn.advancedSelector.defaults,{addtext:t.GroupSelectorAddText,noresults:t.GroupSelectorNoResults,emptylist:t.GroupSelectorEmptyList,witheveryone:!1,withadmin:!1,isInitializeItems:!0})})(jQuery);
(function(n){var t=ASC.Resources.Master.Resource,i=Teamlab,r=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.contactadvancedSelector.defaults,i);this.init()};r.prototype=n.extend({},n.fn.advancedSelector.Constructor.prototype,{constructor:r,initCreationBlock:function(n){var i=this,e={},o=[],u=n.items,f,r,s;e.newoptions=[{title:t.SelectorContactType,type:"choice",tag:"type",items:[{type:"person",title:t.SelectorPerson},{type:"company",title:t.SelectorCompany}]},{title:t.SelectorFirstName,type:"input",tag:"first-name"},{title:t.SelectorLastName,type:"input",tag:"last-name"},{title:t.SelectorCompany,type:"select",tag:"company"},{title:t.SelectorCompanyName,type:"input",tag:"title"}];e.newbtn=t.CreateButton;i.displayAddItemBlock.call(i,e);f=i.$advancedSelector.find(".advanced-selector-field-wrapper.type .advanced-selector-field");f.on("change",function(){var n=f.val();switch(n){case"person":i.$advancedSelector.find(".advanced-selector-field-wrapper.first-name, .advanced-selector-field-wrapper.last-name, .advanced-selector-field-wrapper.company").show();i.$advancedSelector.find(".advanced-selector-field-wrapper.title").hide();break;case"company":i.$advancedSelector.find(".advanced-selector-field-wrapper.first-name, .advanced-selector-field-wrapper.last-name, .advanced-selector-field-wrapper.company").hide();i.$advancedSelector.find(".advanced-selector-field-wrapper.title").show()}});for(f.trigger("change"),r=0,s=u.length;r<s;r++)u[r].type=="company"&&o.push({title:u[r].title,id:u[r].id});i.initDataSimpleSelector.call(i,{tag:"company",items:o});i.hideLoaderSimpleSelector.call(i,"company")},initAdvSelectorDataTempLoad:function(){function u(i,r){var u,e,f;for(t.options.withPhoneOnly&&(r=r.filter(function(n){return n.commonData.some(function(n){return n.infoType==0})})),t.cache[""]=r,t.rewriteObjectItem.call(t,r),u=0,e=t.selectedItems.length;u<e;u++)f=t.$itemsListSelector.find(".advanced-selector-list"),f.prepend(t.selectedItems[u]),r.forEach(function(i){i.id==n(t.selectedItems[u]).attr("data-id")&&f.find("li[data-id="+i.id+"]").not(".selected").remove()})}function f(n,t){toastr.error(t)}var t=this,r=0;t.cache[""]?u(null,t.cache[""]):i.getCrmContacts({},{filter:{startIndex:r,Count:15},before:function(){t.showLoaderListAdvSelector.call(t,"items")},after:function(){t.hideLoaderListAdvSelector.call(t,"items")},success:u,error:f});t.$advancedSelector.find(".advanced-selector-list").off("scroll").on("scroll",function(){var u=n(this);u.innerHeight()+u.scrollTop()>=u.prop("scrollHeight")&&t.options.showSearch&&t.$advancedSelector.find(".advanced-selector-search-field")&&(r+=15,i.getCrmContacts({},{filter:{startIndex:r,Count:15},success:function(i,r){var u,f,e;for(r.length&&r.forEach(function(n){t.cache[""].push(n)}),t.displayPartialList.call(t,i,r),u=0,f=t.selectedItems.length;u<f;u++)e=t.$itemsListSelector.find(".advanced-selector-list"),r.forEach(function(i){i.id==n(t.selectedItems[u]).attr("data-id")&&e.find("li[data-id="+i.id+"]").not(".selected").remove()});t.pushNewItemsInList.call(t,r)},error:function(n,t){toastr.error(t)}}))})},initAdvSelectorData:function(){var n=this;n.options.isTempLoad?n.initAdvSelectorDataTempLoad.call(n):i.getCrmContacts({},{before:function(){n.showLoaderListAdvSelector.call(n,"items")},after:function(){n.hideLoaderListAdvSelector.call(n,"items")},success:function(t,i){n.rewriteObjectItem.call(n,i)},error:function(n,t){toastr.error(t)}})},onSearchItemsTempLoad:function(){function o(i,r){var u,f;i&&(t.cache[i.__filter.prefix]=r);u=t.$advancedSelector.find(".advanced-selector-no-results");t.$itemsListSelector.find(".advanced-selector-list").html("");r.length==0?u.show():(u.hide(),t.displayPartialList.call(t,i,r),f=[],t.selectedItems.forEach(function(t){f.push(n(t).attr("data-id"))}),t.$itemsListSelector.find(".advanced-selector-list li").each(function(){var t=n(this);n.inArray(t.attr("data-id"),f)!=-1&&t.addClass("selected").find("input").prop("checked",!0)}),t.disableDefaultItemsIds.call(t,t.options.itemsDisabledIds))}function s(n,t){toastr.error(t)}var t=this,f=0,r=null,u={prefix:t.$advancedSelector.find(".advanced-selector-search-field").val(),searchType:-1,entityID:0,startIndex:f,Count:15},e;if(u.prefix in t.cache)r=t.cache[u.prefix];else for(e in t.cache)t.cache[e].length==0&&u.prefix.indexOf(e)==0&&(r=[]);if(r==null?i.getCrmContactsByPrefix({},{filter:u,success:o,error:s}):o(null,r),r==null||r.scrolled==!1)t.$advancedSelector.find(".advanced-selector-list").off("scroll").on("scroll",function(){var r=n(this);r.innerHeight()+r.scrollTop()>=r.prop("scrollHeight")&&t.options.showSearch&&t.$advancedSelector.find(".advanced-selector-search-field")&&(f+=15,i.getCrmContactsByPrefix({},{filter:{startIndex:f,Count:15,prefix:t.$advancedSelector.find(".advanced-selector-search-field").val(),searchType:-1,entityID:0},success:function(n,i){i.length&&i.forEach(function(i){t.cache[n.__filter.prefix].push(i)});t.displayPartialList.call(t,n,i)},error:s}))})},displayPartialList:function(t,i){for(var f,s,u=this,e=[],o=[],r=0,h=i.length;r<h;r++)f={},f.title=i[r].displayName||i[r].title||i[r].name||i[r].Name,f.id=i[r].id&&i[r].id.toString(),f.phone=i[r].phone?[i[r].phone]:i[r].commonData&&i[r].commonData.filter(function(n){return n.infoType==0}),i[r].hasOwnProperty("contactclass")&&(f.type=i[r].contactclass),e.push(f),u.items.forEach(function(n){o.push(n.id)}),n.inArray(f.id,o)==-1&&u.items.push(f);s=n.tmpl(u.options.templates.itemList,{Items:e,isJustList:u.options.onechosen});u.$itemsListSelector.find(".advanced-selector-list").append(s);u.disableDefaultItemsIds.call(u,u.options.itemsDisabledIds)},createNewItemFn:function(){var n=this,r=n.$advancedSelector.find(".advanced-selector-add-new-block"),o=r.find(".advanced-selector-btn-add"),e,f=r.find(".type select").val()=="company"?!0:!1,u={};if(f?u.companyName=r.find(".title input").val().trim():(u.firstName=r.find(".first-name input").val().trim(),u.lastName=r.find(".last-name input").val().trim(),u.companyId=r.find(".company input").attr("data-id")),f&&!u.companyName&&(n.showErrorField.call(n,{field:r.find(".title"),error:t.ContactSelectorEmptyNameError}),e=!0),f||u.firstName||(n.showErrorField.call(n,{field:r.find(".first-name"),error:t.ErrorEmptyUserFirstName}),e=!0),f||u.lastName||(n.showErrorField.call(n,{field:r.find(".last-name"),error:t.ErrorEmptyUserLastName}),e=!0),f||u.companyId||!r.find(".company input").val()||(n.showErrorField.call(n,{field:r.find(".company"),error:t.ContactSelectorNotFoundError}),e=!0),e){r.find(".error input").first().focus();return}i.addCrmContact({},f,u,{before:function(){n.displayLoadingBtn.call(n,{btn:o,text:t.LoadingProcessing})},error:function(t,i){n.showServerError.call(n,{field:o,error:i})},success:function(t,i){var r={id:i.id,title:i.displayName,phone:i.commonData&&i.commonData.filter(function(n){return n.infoType==0})};n.actionsAfterCreateItem.call(n,{newitem:r,response:i})},after:function(){n.hideLoadingBtn.call(n,o)}})},rewriteObjectItem:function(n){var t=this;t.items=[];t.pushNewItemsInList.call(t,n);t.options.isTempLoad||(t.items=t.items.sort(SortData));t.showItemsListAdvSelector.call(t)},pushNewItemsInList:function(n){for(var i,r=this,t=0,u=n.length;t<u;t++)i={},i.title=n[t].displayName||n[t].title||n[t].name||n[t].Name,i.id=n[t].id&&n[t].id.toString(),i.phone=n[t].commonData&&n[t].commonData.filter(function(n){return n.infoType==0}),n[t].hasOwnProperty("contactclass")&&(i.type=n[t].contactclass),r.items.push(i)}});n.fn.contactadvancedSelector=function(t,i){return this.each(function(){var u=n(this),f=u.data("contactadvancedSelector"),e=n.extend({},n.fn.contactadvancedSelector.defaults,u.data(),typeof t=="object"&&t);f||u.data("contactadvancedSelector",f=new r(this,e));typeof t=="string"&&f[t](i)})};n.fn.contactadvancedSelector.defaults=n.extend({},n.fn.advancedSelector.defaults,{showme:!0,addtext:t.ContactSelectorAddText,noresults:t.ContactSelectorNoResult,noitems:t.ContactSelectorNoItems,emptylist:t.ContactSelectorEmptyList,withPhoneOnly:!1})})(jQuery);
(function(n){function i(i){var r=null;return n.each(t,function(n,t){return i.is(t.obj)?(r=t,!1):!0}),r}function u(i){n.each(t,function(n,r){return i.is(r.obj)?(t.splice(n,1),!1):!0})}function f(t,i){var r=this;this.obj=t;this.input=this.obj.find(".emailselector-input");this.buffer=this.obj.find(".emailSelector-input-buffer");this.hiddenInput=n("<input>").attr("type","text").addClass("emailselector-hidden-input").insertBefore(this.input);this.settings=i||{};this.cache=[];this.firstFailTerm="";this.history=[];this.editedValue="";this.historyStep=0;this.selectionMode=null;this.ctrlKeyPressed=!1;this.parseEmails=function(t){var r,i;return t?(r=[],typeof t=="string"&&(r=ASC.Mail.Utility.ParseAddresses(t).addresses),n.isArray(t)&&(r=t),i=[],n.each(r,function(n,t){typeof t=="object"&&i.push(t);typeof t=="string"&&(i=i.concat(ASC.Mail.Utility.ParseAddresses(t).addresses))}),i):[]};this.addItem=function(n,t){var i=r.parseEmails(n),u;i.length&&(u=r.drawItems(i,r.input),r.input.val("").css("width",""),r.input.insertBefore(r.buffer),r.closeSelector(),u&&(r.updateHistoryStep(!0,!0),r.settings.onChangeCallback&&t&&r.settings.onChangeCallback()))};this.drawItems=function(t,i){if(!t.length)return!1;var u=n.map(r.getItems(),function(n){return n.email}),f=!1;return n.each(t,function(t,e){if(e&&n.inArray(e.email,u)<0&&(n.tmpl("template-emailselector-item",e).data("item-data",e).insertBefore(i),u.push(e.email),f=!0,r.settings.maxCount)){if(u.length>=r.settings.maxCount){r.obj.find(".emailselector-input").prop("disabled",!0);return}r.obj.find(".emailselector-input").prop("disabled",!1)}}),f};this.getItems=function(t){return n.map(r.obj.find(".emailselector-item"+(t?".selected":"")),function(t){var i=n(t).data("item-data");return new ASC.Mail.Address(i.name,i.email,i.isValid)})};this.getString=function(t){var i=n.map(r.getItems(t),function(n){return n.ToString()});return i.join(", ")};this.closeSelector=function(){var n=r.input.data("ui-autocomplete");n&&n.close()};this.clearItems=function(){r.obj.find(".emailselector-item").remove();r.obj.find(".emailselector-input").prop("disabled",!1)};this.updateHistoryStep=function(t,i){var u=r.getItems();t?i?(r.historyStep++,r.history=n.grep(r.history,function(n){return n.step<r.historyStep}),r.history.push({data:u,step:r.historyStep})):r.historyStep<r.history.length&&r.historyStep++:r.historyStep>0&&r.historyStep--;r.settings.maxCount&&(u.length>=r.settings.maxCount?r.obj.find(".emailselector-input").prop("disabled",!0):r.obj.find(".emailselector-input").prop("disabled",!1))};this.showHistoryStep=function(){var t=n.grep(r.history,function(n){return n.step===r.historyStep});r.clearItems();t.length&&r.drawItems(t[0].data,r.input)};this.setBindings=function(){var t={A:65,C:67,X:88,V:86,Z:90,Y:89,enter:13,backspace:8,del:46,left:37,right:39,ctrl:17};r.obj.on("click",function(){r.input.focus()});r.obj.scroll(function(){r.hiddenInput.css("top",r.obj.scrollTop()+"px")});r.obj.on("click",".emailselector-item-close",function(t){n(t.target).parent().remove();r.updateHistoryStep(!0,!0);r.settings.onChangeCallback&&r.settings.onChangeCallback();r.input.focus();t.stopPropagation()});r.obj.on("click",".emailselector-item",function(t){var i=n(t.target);i.is(".emailselector-item-text")&&(i=i.parent());t.ctrlKey?(i.toggleClass("selected"),r.ctrlKeyPressed=!0):t.shiftKey?i.toggleClass("selected"):(r.obj.find(".emailselector-item").removeClass("selected"),i.addClass("selected"));r.hiddenInput.val(r.getString(!0)).focus().select();t.stopPropagation()});r.obj.on("mousedown",".emailselector-item",function(n){n.preventDefault?n.preventDefault():n.returnValue=!1});r.obj.on("dblclick",".emailselector-item",function(){var t=n(this),i;r.editedValue=t.data("item-data").ToString();i=r.buffer.text(r.editedValue).width();t.replaceWith(r.input);r.input.val(r.editedValue).width(i).focus()});r.obj.on("input","input[type=text]",function(){var t=n(this);r.buffer.text(t.val());t.width(r.buffer.width()+5||1)});r.obj.on("keydown",".emailselector-hidden-input",function(n){var f,i,e,u;switch(n.keyCode){case t.enter:r.obj.find(".emailselector-item.selected").length===1?r.obj.find(".emailselector-item.selected").trigger("dblclick"):r.input.focus();break;case t.A:n.ctrlKey&&(r.obj.find(".emailselector-item").addClass("selected"),r.hiddenInput.val(r.getString(!0)).select());break;case t.Z:n.ctrlKey&&(r.updateHistoryStep(!1,!1),r.showHistoryStep(),r.settings.onChangeCallback&&r.settings.onChangeCallback());break;case t.Y:n.ctrlKey&&(r.updateHistoryStep(!0,!1),r.showHistoryStep(),r.settings.onChangeCallback&&r.settings.onChangeCallback());break;case t.backspace:case t.del:r.obj.find(".emailselector-item.selected").remove();r.hiddenInput.val(r.getString(!0));r.updateHistoryStep(!0,!0);r.settings.onChangeCallback&&r.settings.onChangeCallback();r.input.focus();break;case t.left:f=r.obj.find(".emailselector-item.selected:"+(r.selectionMode==="right"?"last":"first"));f.length&&(i=f.prev(),i.length&&i.hasClass("emailselector-item")&&(n.shiftKey?(r.selectionMode||(r.selectionMode="left"),i.hasClass("selected")?(f.removeClass("selected"),r.obj.find(".emailselector-item.selected").length===1&&(r.selectionMode=null)):i.addClass("selected")):(r.obj.find(".emailselector-item").removeClass("selected"),i.addClass("selected"),r.selectionMode=null),r.hiddenInput.val(r.getString(!0)).select()));break;case t.right:e=r.obj.find(".emailselector-item.selected:"+(r.selectionMode==="left"?"first":"last"));e.length&&(u=e.next(),u.length&&u.hasClass("emailselector-item")?(n.shiftKey?(r.selectionMode||(r.selectionMode="right"),u.hasClass("selected")?(e.removeClass("selected"),r.obj.find(".emailselector-item.selected").length===1&&(r.selectionMode=null)):u.addClass("selected")):(r.obj.find(".emailselector-item").removeClass("selected"),u.addClass("selected"),r.selectionMode=null),r.hiddenInput.val(r.getString(!0)).select()):(r.obj.find(".emailselector-item").removeClass("selected"),r.input.focus()))}return n.ctrlKey&&(n.keyCode===t.X||n.keyCode===t.C)});r.obj.on("cut",".emailselector-hidden-input",function(){r.obj.find(".emailselector-item.selected").remove();r.updateHistoryStep(!0,!0);r.settings.onChangeCallback&&r.settings.onChangeCallback();setTimeout(function(){r.input.focus()},0)});r.obj.on("keydown",".emailselector-input",function(i){var f=n(this),u=f.val();if(i.keyCode===t.enter&&(r.addItem(u.trim(),!0),r.input.focus()),!u){if(i.ctrlKey&&i.keyCode===t.A&&(r.hiddenInput.focus(),r.obj.find(".emailselector-item").addClass("selected"),r.hiddenInput.val(r.getString(!0)).select()),i.ctrlKey&&i.keyCode===t.Z)return r.updateHistoryStep(!1,!1),r.showHistoryStep(),r.settings.onChangeCallback&&r.settings.onChangeCallback(),!1;if(i.ctrlKey&&i.keyCode===t.Y)return r.updateHistoryStep(!0,!1),r.showHistoryStep(),r.settings.onChangeCallback&&r.settings.onChangeCallback(),!1;i.keyCode===t.backspace&&(r.obj.find(".emailselector-item:last").remove(),r.updateHistoryStep(!0,!0),r.settings.onChangeCallback&&r.settings.onChangeCallback(),r.input.focus());i.keyCode===t.left&&(r.hiddenInput.focus(),r.obj.find(".emailselector-item:last").addClass("selected"),r.hiddenInput.val(r.getString(!0)).select())}});r.obj.on("keyup",".emailselector-hidden-input",function(n){n.keyCode===t.ctrl&&(r.ctrlKeyPressed=!1)});r.obj.on("blur",".emailselector-hidden-input",function(){n(this).val("");r.ctrlKeyPressed||r.obj.find(".emailselector-item").removeClass("selected")});r.obj.on("blur",".emailselector-input",function(){var t=n(this),i=t.val().trim();r.addItem(i,!0);r.selectionMode=null})};this.initAutocomplete=function(){r.input.autocomplete({minLength:2,delay:300,select:function(n,t){return t.item.name&&(t.item.name=Encoder.htmlDecode(t.item.name)),r.addItem([t.item],!0),!1},search:function(){return r.obj.is(":visible")},source:function(n,t){var i,u,f;if(r.settings.isInPopup&&(i=this.menu.element,u=r.obj.parents(".blockUI.blockPage:first"),u.length!==0&&(u.css("position")==="fixed"?i.css("position","fixed"):i.css("position","absolute"))),n.term in r.cache)return f=r.cache[n.term],t(f);if(!n.term)return r.firstFailTerm="",t([]);if(r.firstFailTerm){if(n.term.indexOf(r.firstFailTerm)===0)return t([]);r.firstFailTerm=""}Teamlab.searchEmails({},{term:n.term},{success:function(i,u){if(!u||u.length===0)return r.firstFailTerm=n.term,t([]);var f=r.parseEmails(u);return r.cache[n.term]=f,t(f)},error:function(n,t){console.log(t)}})},focus:function(){return!1},create:function(){n(window).resize(function(){r.closeSelector()})},open:function(){var t=n.Event("keydown",{keyCode:40});return n(r.input).trigger(t),!1}});r.input.data("ui-autocomplete")._renderMenu=function(t,i){var f=this,u;n.each(i,function(n,i){f._renderItemData(t,i)});r.settings.isInPopup&&n.browser.mobile&&t.parents(".blockUI.blockPage:first").length===0&&(u=r.obj.parents(".blockUI.blockPage:first"),u.length!==0&&t.appendTo(u.children()))};r.input.data("ui-autocomplete")._renderItem=function(t,i){return n.tmpl("template-emailselector-autocomplete",i).appendTo(t)};r.input.data("ui-autocomplete")._resizeMenu=function(){this.menu.element.outerWidth(r.obj.width())};r.input.data("ui-autocomplete")._suggest=function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t);this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:n(this.element).parent()},this.options.position))}};this.init=function(){r.setBindings();r.initAutocomplete();r.clearItems();r.addItem(r.settings.items,!1)}}var t=[],r={init:function(i){var e=n(this),r;return u(e),r=new f(e,i),t.push(r),r.init(),this},get:function(){var r=n(this),t=i(r);return t?t.getItems():null},getString:function(){var r=n(this),t=i(r);return t?t.getString():null},clear:function(){var r=n(this),t=i(r);return t&&(t.clearItems(),t.history=[],t.historyStep=0),this}};n.fn.AdvancedEmailSelector=function(n){return this.length&&r[n]?r[n].apply(this,Array.prototype.slice.call(arguments,1)):this}})(jQuery);
(function(n,t,i,r){function a(n){for(var t=0,i=n.offsetTop;n=n.offsetParent;)t=n.offsetTop,t?i+=t:null;return i}function f(n){var t,i;i=n.css("overflow-y","auto").height("auto").height();t=s.height()-a(n[0])-1;n.height(t+"px");i>t&&n.css("overflow-y","scroll")}function c(){for(var t=o,n=0,n=t.length;n--;)f(t[n])}function v(n){l.addClass(e);n.addClass(e).css("overflow-x","visible");f(n);o.push(n)}var u=!0,e="tl-block",o=[],s=n(window),l=n(r),h=!1;u=n.browser.msie&&n.browser.version<8?!1:u;n.fn.tlBlock=function(t){if(t&&typeof t=="string"){switch(t){case"resize":return this.each(function(){u&&f(n(this))})}return this}return t=n.extend({title:"",classname:""},t),h||(h=!0,s.unbind("resize",c).bind("resize",c)),this.each(function(){var i=n(this);u&&v(i,t)})}})(jQuery,window,document,document.body);
PopupBoxManager=new function(){this.Collection=[];this.TimerCollection=[];this.RegistryPopupBox=function(n){this.Collection[n.ID]=n};this.GetPopupBoxByID=function(n){return this.Collection[n]};this.AjaxCallback=function(){}};var PopupBoxContainerElementID="container";PopupBox=function(n,t,i,r,u,f,e){if(this.Height=i,this.Width=t,this.BorderCSSClass=u,this.BackgroundCSSClass=r,this.ID=n,this.ContentID="_"+n,this.IsVisible=!1,this.TimerHandler=null,this.CurrentElementID="",this.PreviousElementID="",this.VisibleWidth=-1,this.VisibleHeight=-1,this.ServerMethodFullName=f,typeof e=="object"&&(e.hasOwnProperty("apiMethodName")&&(this.ApiMethodName=e.apiMethodName),e.hasOwnProperty("tmplName")&&(this.TmplName=e.tmplName),e.hasOwnProperty("customFactory")&&(this.CustomFactory=e.customFactory)),this.BeginBox='<div class="'+this.BorderCSSClass+" "+this.BackgroundCSSClass+'" style="z-index:9999999; position:absolute; display:none; width:'+this.Whidth+'px;" id='+this.ID+">",this.EndBox="<\/div>",this.Content="<div id="+this.ContentID+"><\/div>",this.Init=function(){jq("#"+PopupBoxContainerElementID).append(this.BeginBox+this.Content+this.EndBox)},PopupBoxManager.RegistryPopupBox(this),jq("#"+PopupBoxContainerElementID).length>0)this.Init();else{var o=this.ID;jq(document).ready(function(){PopupBoxManager.GetPopupBoxByID(o).Init()})}this.SetContent=function(n){jq("#"+this.ContentID).html(n);jq("#"+this.ID).css({width:this.Width+"px"})};this.CheckVisible=function(){var n=this;n.IsVisible==!1?(clearInterval(n.checkVisibleHandler),n.checkVisibleHandler=null,jq("#"+n.ID).is(":visible")&&jq("#"+n.ID).fadeOut("slow")):n.checkVisibleHandler=setTimeout(function(){n.CheckVisible()},313)};this.RegistryElement=function(n,t){var i=this.ID;jq("#"+n).on("mouseover",function(){PopupBoxManager.GetPopupBoxByID(i).ExecAndShow(n,t)}).on("mouseout",function(){PopupBoxManager.GetPopupBoxByID(i).StopTimer()}).on("click",function(){PopupBoxManager.GetPopupBoxByID(i).StopTimer()});jq(document).on("keypress",function(n){n.hasOwnProperty("ctrlKey")&&n.ctrlKey===!0&&(n.which===99||n.which===97)||PopupBoxManager.GetPopupBoxByID(i).StopTimer()})};this.RegistryElementOnLive=function(n,t){var i=this.ID;jq(document).on("mouseover","#"+n,function(){PopupBoxManager.GetPopupBoxByID(i).ExecAndShow(n,t)}).on("mouseout","#"+n,function(){PopupBoxManager.GetPopupBoxByID(i).StopTimer()}).on("click","#"+n,function(){PopupBoxManager.GetPopupBoxByID(i).StopTimer()});jq(document).on("keypress",function(n){n.hasOwnProperty("ctrlKey")&&n.ctrlKey===!0&&(n.which===99||n.which===97)||PopupBoxManager.GetPopupBoxByID(i).StopTimer()})};this.ExecAndShow=function(n,t){if(this.CurrentElementID=n,this.CurrentElementID==this.PreviousElementID&&!1){setTimeout("PopupBoxManager.GetPopupBoxByID('"+this.ID+"').Show('"+n+"')",850);return}this.TimerHandler&&clearInterval(this.TimerHandler);this.PreviousElementID=this.CurrentElementID;this.TimerHandler=typeof this.ApiMethodName!="undefined"&&this.ApiMethodName!=""?setTimeout("PopupBoxManager.GetPopupBoxByID('"+this.ID+"').ExecApiCode('"+n+"','"+t+"')",850):setTimeout("PopupBoxManager.GetPopupBoxByID('"+this.ID+"').ExecAjaxCode('"+n+"','"+t+"')",850)};this.ExecApiCode=function(n,t){var i=this.ID;eval(this.ApiMethodName+'({popupBoxID: "'+this.ID+'"},'+t+",{success:"+this.ApiCallback+",error:"+function(){PopupBoxManager.GetPopupBoxByID(i).StopTimer()}+",before:"+function(){PopupBoxManager.GetPopupBoxByID(i).SetContent('<img class="popupbox-loader" src="'+StudioManager.GetImage("loader_32.gif")+'" alt="">');PopupBoxManager.GetPopupBoxByID(i).Show(n)}+"})")};this.ExecAjaxCode=function(n,t){var i=this.ID;AjaxPro.onLoading=function(t){t&&(PopupBoxManager.GetPopupBoxByID(i).SetContent('<img class="popupbox-loader" src="'+StudioManager.GetImage("loader_32.gif")+'" alt="">'),PopupBoxManager.GetPopupBoxByID(i).Show(n))};eval(this.ServerMethodFullName+"("+t+',"'+this.ID+'",this.AjaxCallback);')};this.AjaxCallback=function(n){AjaxPro.onLoading=function(){};var t=PopupBoxManager.GetPopupBoxByID(n.value.rs1);t.SetContent(n.value.rs2);t.SetPopupPosition(t.CurrentElementID)};this.ApiCallback=function(n,t){var i=PopupBoxManager.GetPopupBoxByID(n.popupBoxID),r,u;if(typeof i.CustomFactory=="function"&&i.CustomFactory.apply(this,[t]),t.isPrivateForMe=t.isPrivate,t.isPrivate&&t.accessList)for(r=0;r<t.accessList.length;r++)t.accessList[r].id==Teamlab.profile.id&&(t.isPrivateForMe=!1);u=jq.tmpl(i.TmplName,t);i.SetContent(u);i.SetPopupPosition(i.CurrentElementID)};this.SetPopupPosition=function(n){if(jq("#"+n).length!=0){var r=jq("#"+this.ID).height(),i=jq(window),o=i.scrollTop(),s=i.scrollLeft(),h=i.width(),c=i.height(),l=this.ID,t=jq("#"+n).offset(),u=jq("#"+n).height(),f="",e="";f=t.left+this.Width>s+h?t.left-this.Width+"px":t.left+"px";e=t.top+r+u>o+c?t.top-5-r+"px":t.top+3+u+"px";jq("#"+l).css({left:f,top:e})}};this.Show=function(n){this.SetPopupPosition(n);var i=this.ID,t=jq("#"+i);if(this.VisibleWidth=-1,this.VisibleHeight=-1,t.is(":visible")==!1){this.IsVisible=!0;t.fadeIn("slow");t.on("mouseout",function(){PopupBoxManager.GetPopupBoxByID(i).SetVisible(!1)});t.on("mouseover",function(){PopupBoxManager.GetPopupBoxByID(i).SetVisible(!0)})}this.CheckVisible()};this.SetVisible=function(n){jq("#"+this.ID).is(":visible")&&(this.IsVisible=n)};this.StopTimer=function(){try{this.IsVisible=!1;clearInterval(this.TimerHandler);this.TimerHandler=null}catch(n){}}};
typeof ASC=="undefined"&&(ASC={});typeof ASC.Files=="undefined"&&(ASC.Files=function(){return{}}());typeof ASC.Files.Utility=="undefined"&&(ASC.Files.Utility={});ASC.Files.Utility.FileExtensionLibrary={ArchiveExts:[".zip",".rar",".ace",".arc",".arj",".bh",".cab",".enc",".gz",".ha",".jar",".lha",".lzh",".pak",".pk3",".tar",".tgz",".uu",".uue",".xxe",".z",".zoo"],AviExts:[".avi"],CsvExts:[".csv"],DjvuExts:[".djvu"],DocExts:[".doc"],DocxExts:[".docx"],DocmExts:[".docm"],DoctExts:[".doct"],DotExts:[".dot"],DotmExts:[".dotm"],DotxExts:[".dotx"],EbookExts:[".epub",".fb2"],FlvExts:[".flv",".fla"],HtmlExts:[".html",".htm",".mht"],IafExts:[".iaf"],ImgExts:[".bmp",".cod",".gif",".ief",".jpe",".jpeg",".jpg",".jfif",".tiff",".tif",".cmx",".ico",".png",".pnm",".pbm",".ppm",".rgb",".xbm",".xpm",".xwd"],M2tsExts:[".m2ts"],MkvExts:[".mkv"],MovExts:[".mov"],Mp4Exts:[".mp4"],MpgExts:[".mpg"],OdpExts:[".odp",".fodp"],OdsExts:[".ods",".fods"],OdtExts:[".odt",".fodt"],PdfExts:[".pdf"],PpsExts:[".pps"],PpsxExts:[".ppsx"],PpsmExts:[".ppsm"],PptExts:[".ppt"],PptxExts:[".pptx"],PptmExts:[".pptm"],PpttExts:[".pptt"],PotExts:[".pot"],PotxExts:[".potx"],PotmExts:[".potm"],RtfExts:[".rtf"],SoundExts:[".mp3",".wav",".pcm",".aiff",".3gp",".flac",".fla",".cda"],SvgExts:[".svg"],TxtExts:[".txt"],DvdExts:[".vob"],XlsExts:[".xls",".xlsb"],XlsxExts:[".xlsx"],XlsmExts:[".xlsm"],XlstExts:[".xlst"],XltExts:[".xlt"],XltxExts:[".xltx"],XltmExts:[".xltm"],XmlExts:[".xml"],XpsExts:[".xps"],GdocExts:[".gdoc"],GsheetExts:[".gsheet"],GslidesExts:[".gslides"],CalendarExts:[".ics",".ical",".ifb",".icalendar"]};ASC.Files.Utility.getCssClassByFileTitle=function(n,t){var f=ASC.Files.Utility,r=f.FileExtensionLibrary,e=f.GetFileExtension(n),i="file",u=function(n){return jq.inArray(e,n)!=-1};return u(r.ArchiveExts)?i="Archive":u(r.AviExts)?i="Avi":u(r.CsvExts)?i="Csv":u(r.DjvuExts)?i="Djvu":u(r.DocExts)?i="Doc":u(r.DocxExts)?i="Docx":u(r.DocmExts)?i="Docm":u(r.DoctExts)?i="Doct":u(r.DotExts)?i="Dot":u(r.DotxExts)?i="Dotx":u(r.DotmExts)?i="Dotm":u(r.EbookExts)?i="Ebook":u(r.FlvExts)?i="Flv":u(r.HtmlExts)?i="Html":u(r.IafExts)?i="Iaf":u(r.ImgExts)?i="Image":u(r.M2tsExts)?i="M2ts":u(r.MkvExts)?i="Mkv":u(r.MovExts)?i="Mov":u(r.Mp4Exts)?i="Mp4":u(r.MpgExts)?i="Mpg":u(r.OdpExts)?i="Odp":u(r.OdtExts)?i="Odt":u(r.OdsExts)?i="Ods":u(r.PdfExts)?i="Pdf":u(r.PpsExts)?i="Pps":u(r.PpsxExts)?i="Ppsx":u(r.PpsmExts)?i="Ppsm":u(r.PptExts)?i="Ppt":u(r.PptxExts)?i="Pptx":u(r.PptmExts)?i="Pptm":u(r.PpttExts)?i="Pptt":u(r.PotExts)?i="Pot":u(r.PotxExts)?i="Potx":u(r.PotmExts)?i="Potm":u(r.RtfExts)?i="Rtf":u(r.SoundExts)?i="Sound":u(r.SvgExts)?i="Svg":u(r.TxtExts)?i="Txt":u(r.DvdExts)?i="Dvd":u(r.XlsExts)?i="Xls":u(r.XlsxExts)?i="Xlsx":u(r.XlsmExts)?i="Xlsm":u(r.XlstExts)?i="Xlst":u(r.XltExts)?i="Xlt":u(r.XltxExts)?i="Xltx":u(r.XltmExts)?i="Xltm":u(r.XmlExts)?i="Xml":u(r.XpsExts)?i="Xps":u(r.GdocExts)?i="Gdoc":u(r.GsheetExts)?i="Gsheet":u(r.GslidesExts)?i="Gslides":u(r.CalendarExts)&&(i="Cal"),"ftFile_"+(t===!0?21:32)+" ft_"+i};ASC.Files.Utility.getFolderCssClass=function(n){return"ftFolder_"+(n===!0?21:32)};ASC.Files.Utility.CanWebEditBrowser=!0===(jq.browser.msie&&jq.browser.versionCorrect>=9||jq.browser.safari&&jq.browser.versionCorrect>=5||jq.browser.mozilla&&jq.browser.versionCorrect>=4||jq.browser.chrome&&jq.browser.versionCorrect>=7||jq.browser.opera&&jq.browser.versionCorrect>=10.5);ASC.Files.Utility.GetFileExtension=function(n){if(typeof n=="undefined"||n==null)return"";n=n.trim();var t=n.lastIndexOf(".");return 0<=t?n.substring(t).trim().toLowerCase():""};ASC.Files.Utility.FileInAnInternalFormat=function(n){var t=ASC.Files.Utility.GetFileExtension(n);for(var i in ASC.Files.Utility.Resource.InternalFormats)if(ASC.Files.Utility.Resource.InternalFormats[i]===t)return!0;return!1};ASC.Files.Utility.CanImageView=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsImagePreviewed)!=-1};ASC.Files.Utility.CanWebView=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsWebPreviewed)!=-1};ASC.Files.Utility.CanWebEdit=function(n){return ASC.Files.Utility.CanWebEditBrowser&&Teamlab.profile.isVisitor!==!0?jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsWebEdited)!=-1:!1};ASC.Files.Utility.CanWebReview=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsWebReviewed)!=-1};ASC.Files.Utility.CanCoAuhtoring=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsCoAuthoring)!=-1};ASC.Files.Utility.MustConvert=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsMustConvert)!=-1};ASC.Files.Utility.GetConvertFormats=function(n){var t=ASC.Files.Utility.GetFileExtension(n);return ASC.Files.Utility.Resource.ExtsConvertible[t]||[]};ASC.Files.Utility.FileIsArchive=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsArchive)!=-1};ASC.Files.Utility.FileIsVideo=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsVideo)!=-1};ASC.Files.Utility.FileIsAudio=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsAudio)!=-1};ASC.Files.Utility.FileIsImage=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsImage)!=-1};ASC.Files.Utility.FileIsSpreadsheet=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsSpreadsheet)!=-1};ASC.Files.Utility.FileIsPresentation=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsPresentation)!=-1};ASC.Files.Utility.FileIsDocument=function(n){return jq.inArray(ASC.Files.Utility.GetFileExtension(n),ASC.Files.Utility.Resource.ExtsDocument)!=-1};ASC.Files.Utility.GetFileDownloadUrl=function(n,t,i){var r=ASC.Files.Utility.Resource.FileDownloadUrlString.format(encodeURIComponent(n));return t?r+"&"+ASC.Files.Utility.Resource.ParamVersion+"="+t:i?r+"&"+ASC.Files.Utility.Resource.ParamOutType+"="+i:r};ASC.Files.Utility.GetFileWebViewerUrl=function(n,t){var i=ASC.Files.Utility.Resource.FileWebViewerUrlString.format(encodeURIComponent(n));return t?i+"&"+ASC.Files.Utility.Resource.ParamVersion+"="+t:i};ASC.Files.Utility.GetFileWebViewerExternalUrl=function(n,t,i){return ASC.Files.Utility.Resource.FileWebViewerExternalUrlString.format(encodeURIComponent(n),encodeURIComponent(t||""),encodeURIComponent(i||""))};ASC.Files.Utility.GetFileWebEditorUrl=function(n){return ASC.Files.Utility.Resource.FileWebEditorUrlString.format(encodeURIComponent(n))};ASC.Files.Utility.GetFileWebEditorExternalUrl=function(n,t,i){return ASC.Files.Utility.Resource.FileWebEditorExternalUrlString.format(encodeURIComponent(n),encodeURIComponent(t||""))+(i?"&folderid="+i:"")};
var defineBodyMediaClass=function(){for(var i=jq("body"),t=[{min:0,max:1024,classname:"media-width-0-1024"},{min:0,max:1030,classname:"media-width-0-1030"},{min:0,max:1048,classname:"media-width-0-1048"},{min:0,max:1072,classname:"media-width-0-1072"},{min:0,max:1080,classname:"media-width-0-1080"},{min:0,max:1096,classname:"media-width-0-1096"},{min:0,max:1100,classname:"media-width-0-1100"},{min:0,max:1120,classname:"media-width-0-1120"},{min:0,max:1140,classname:"media-width-0-1140"},{min:0,max:1144,classname:"media-width-0-1144"},{min:0,max:1150,classname:"media-width-0-1150"},{min:0,max:1160,classname:"media-width-0-1160"},{min:0,max:1180,classname:"media-width-0-1180"},{min:0,max:1200,classname:"media-width-0-1200"},{min:0,max:1210,classname:"media-width-0-1210"},{min:1145,max:0,classname:"media-width-1145-0"},{min:0,max:1250,classname:"media-width-0-1250"},{min:0,max:1260,classname:"media-width-0-1260"},{min:0,max:1270,classname:"media-width-0-1270"},{min:0,max:1300,classname:"media-width-0-1300"},{min:0,max:1340,classname:"media-width-0-1340"},{min:0,max:1350,classname:"media-width-0-1350"},{min:0,max:1390,classname:"media-width-0-1390"},{min:0,max:1400,classname:"media-width-0-1400"},{min:0,max:1410,classname:"media-width-0-1410"},{min:0,max:1420,classname:"media-width-0-1420"},{min:0,max:1450,classname:"media-width-0-1450"},{min:0,max:1470,classname:"media-width-0-1470"},{min:0,max:1500,classname:"media-width-0-1500"},{min:0,max:1575,classname:"media-width-0-1575"},{min:0,max:1620,classname:"media-width-0-1620"},{min:0,max:1650,classname:"media-width-0-1650"},{min:1620,max:0,classname:"media-width-1620-0"},],r=jq("#studioPageContent").width()-jq(".mainPageTableSidePanel").width()+240,n=0,u=t.length;n<u;n++)r>=t[n].min&&(t[n].max==0||r<t[n].max)?i.hasClass(t[n].classname)||i.addClass(t[n].classname):i.hasClass(t[n].classname)&&i.removeClass(t[n].classname);i.removeClass("media-width-min")},uvOptions;(function(){var t,i;if(jQuery&&jQuery.datepicker&&jQuery.datepicker.setDefaults({prevText:"",nextText:"",firstDay:ASC.Resources.Master.FirstDay,dateFormat:ASC.Resources.Master.DatepickerDatePattern,dayNamesMin:ASC.Resources.Master.DayNames,dayNamesShort:ASC.Resources.Master.DayNames,dayNames:ASC.Resources.Master.DayNamesFull,monthNamesShort:ASC.Resources.Master.MonthNames,monthNames:ASC.Resources.Master.MonthNamesFull}),ServiceHelper.init(ASC.Resources.Master.ApiPath),ServiceFactory.init({responses:{isme:ASC.Resources.Master.ApiResponsesMyProfile},portaldatetime:{utcoffsettotalminutes:ASC.Resources.Master.TimezoneOffsetMinutes,displayname:ASC.Resources.Master.TimezoneDisplayName},names:{months:ASC.Resources.Master.MonthNamesFull,shortmonths:ASC.Resources.Master.MonthNames,days:ASC.Resources.Master.DayNamesFull,shortdays:ASC.Resources.Master.DayNames},formats:{datetime:ASC.Resources.Master.DateTimePattern,time:ASC.Resources.Master.TimePattern,date:ASC.Resources.Master.DatePattern},avatars:{small:ASC.Resources.Master.AvatarSmall,medium:ASC.Resources.Master.AvatarMedium,large:ASC.Resources.Master.AvatarLarge},supportedfiles:{imgs:ASC.Files.Utility.Resource.ExtsImagePreviewed,docs:ASC.Files.Utility.Resource.ExtsWebPreviewed}}),Teamlab.init(),LoadingBanner.strLoading=ASC.Resources.Master.Resource.LoadingProcessing,LoadingBanner.strDescription=ASC.Resources.Master.Resource.LoadingDescription,StudioManager.initImageZoom(),jq.browser.msie&&jq.browser.version==10&&jq("body").addClass("ie10"),jq.blockUI.defaults.css={},jq.blockUI.defaults.overlayCSS={},jq.blockUI.defaults.fadeOut=0,jq.blockUI.defaults.fadeIn=0,jq.blockUI.defaults.message='<div class="loader-text-block">'+ASC.Resources.Master.Resource.LoadingPleaseWait+"<\/div>",jq("#studio_sidePanel").length){LeftMenuManager.init(StudioManager.getBasePathToModule(),jq(".menu-list .menu-item.sub-list, .menu-list>.menu-item.sub-list>.menu-sub-list>.menu-sub-item"));LeftMenuManager.restoreLeftMenu();jq(".support-link").on("click",function(){jq(".support .expander").trigger("click")})}LeftMenuManager.bindEvents();ASC.Resources.Master.SetupInfoNotifyAddress&&ASC.Resources.Master.IsAuthenticated==!0&&ASC.Resources.Master.ApiResponsesMyProfile.response&&ASC.Resources.Master.ShowPromotions&&Teamlab.getBarPromotions({},{success:function(n,t){t&&eval(t)}});ASC.Resources.Master.SetupInfoTipsAddress&&ASC.Resources.Master.IsAuthenticated==!0&&ASC.Resources.Master.ApiResponsesMyProfile.response&&!ASC.Resources.Master.ApiResponsesMyProfile.response.isOutsider&&ASC.Resources.Master.ShowTips&&Teamlab.getBarTips({},{success:function(n,t){t&&eval(t)}});t=new PopupBox("pb_StudioUserProfileInfo",320,140,"tintLight","borderBaseShadow","",{apiMethodName:"Teamlab.getProfile",tmplName:"userProfileCardTmpl"});jq(".userLink").each(function(){var n=jq(this).attr("id");n!=null&&n!=""&&t.RegistryElement(n,'"'+jq(this).attr("data-uid")+'"')});jq("#commonLogout").click(function(){return typeof SmallChat!="undefined"&&SmallChat.logoutEvent&&SmallChat.logoutEvent(),!0});i=function(){if(window.devicePixelRatio>1)return!0;return window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),            (min--moz-device-pixel-ratio: 1.5),            (-o-min-device-pixel-ratio: 3/2),            (min-resolution: 1.5dppx),            (min-device-pixel-ratio: 1.5)").matches?!0:!1};i()&&jq.cookies.get("is_retina")==null&&jq.cookies.set("is_retina",!0,{path:"/"});defineBodyMediaClass();var n=240,r=951-n,u=function(){var n=jq("#studioPageContent").width()-48-r-25;jq(".mainPageTableSidePanel").resizable("option","maxWidth",n)};jq(".mainPageTableSidePanel").length==1&&(jq(".mainPageTableSidePanel").resizable({maxWidth:n,minWidth:n,handles:"e",start:function(){jq("body:not(.media-width-min)").addClass("media-width-min");jq(".popup_helper").hide()},resize:function(n,t){jq("#studio_sidePanel").css("width",t.size.width);jq(window).trigger("resizeSidePanel",[n,t])},create:function(){},stop:function(){}}),u());jq(window).on("resize",function(){jq(".studio-action-panel:not(.freeze-display)").hide();jq("body:not(.media-width-min)").addClass("media-width-min");clearTimeout(jq.data(this,"resizeWinTimer"));jq.data(this,"resizeWinTimer",setTimeout(function(){defineBodyMediaClass();jq(".mainPageTableSidePanel").length==1&&(u(),(jq("#studioPageContent").width()<jq(".mainPageTable.with-mainPageTableSidePanel").width()||jq(".mainPageTable.with-mainPageTableSidePanel .mainPageContent").outerWidth()<r)&&(jq("#studio_sidePanel").width(n),jq(".mainPageTableSidePanel").width(n)));jq(window).trigger("resizeWinTimer",null);jq("table.mainPageTable").tlBlock("resize");jq("div.advansed-filter").each(function(){jq(this).advansedFilter("resize")})},51));clearTimeout(jq.data(this,"resizeWinTimerWithMaxDelay"));jq.data(this,"resizeWinTimerWithMaxDelay",setTimeout(function(){defineBodyMediaClass();jq(window).trigger("resizeWinTimerWithMaxDelay",null);jq("table.mainPageTable").tlBlock("resize")},91))})})();jq("table.mainPageTable").tlBlock();setTimeout("jq(window).resize()",500);jq(window).one("resize",function(){clearTimeout(jq.data(this,"resizeWinTimer"));jq.data(this,"resizeWinTimer",setTimeout(function(){defineBodyMediaClass()},51))});uvOptions={custom_fields:{premium:ASC.Resources.Master.TenantIsPremium}};
var showHelpPage=function(n){var i=jq("link[rel*=icon][type^='image']:last"),t;i.attr("href").indexOf("logo_favicon_general.ico")!==-1&&i.attr("href",i.attr("href"));t=!!jq("#contentHelp-"+n).length;jq(".help-center").addClass("currentCategory open").toggleClass("active",!t);jq(".help-center .menu-sub-item").removeClass("active");jq("[id^='contentHelp-']").toggleClass("display-none",t);t&&(jq("#contentHelp-"+n).removeClass("display-none"),jq(jq(".help-center .menu-sub-item")[n]).addClass("active"))};jq(function(){ASC.Controls.AnchorController.bind(/^help(?:=(\d+))?/,showHelpPage)});
typeof ASC=="undefined"&&(ASC={});typeof ASC.Controls=="undefined"&&(ASC.Controls={});ASC.Controls.GroupSelector=function(n,t,i,r){var u,f,e;if(this.ID=n,this.SelectedGroup=null,this.Groups=[],this._groups=[],this.DisabledGroupIds=[],this.MobileVersion=t===!0,u=this,this.AdditionalFunction=null,this.Open=function(){if(this.ClearFilter(),!this.MobileVersion){var n=jq("#groupSelectorBtn_"+this.ID).position();jq("#groupSelectorContainer_"+this.ID).css({display:"block"});jq("#grpselector_filter_"+this.ID).focus()}},this.Close=function(){this.MobileVersion||jq("#groupSelectorContainer_"+this.ID).hide();this.SelectedGroup!=null&&this.AdditionalFunction!=null&&this.AdditionalFunction(this.SelectedGroup)},this.SuggestGroups=function(){var t,i,n;if(!this.MobileVersion){for(t=jq("#grpselector_filter_"+this.ID).val().trim().toLowerCase(),t==""&&this.ClearFilter(),i=[],n=0;n<this._groups.length;n++)this._groups[n].Name.toLowerCase().indexOf(t)>=0&&i.push(this._groups[n]);jq("#grpselector_groupList_"+this.ID).html(jq.tmpl("groupSelectorListTemplate",{Groups:i}))}},this.HideGroup=function(n,t){var r,i;if(t==undefined&&(t=!0),t)this.DisabledGroupIds.push(n);else{for(r=[],i=0;i<this.DisabledGroupIds.length;i++)this.DisabledGroupIds[i]!=n&&r.push(this.DisabledGroupIds[i]);this.DisabledGroupIds=r}this.ClearFilter()},this.DisplayAll=function(){this.DisabledGroupIds=[];this.ClearFilter()},this.ClearFilter=function(){var n,r,i,t,f;for(this._groups=[],n=0,r=u.Groups.length;n<r;n++){for(i=!1,t=0,f=u.DisabledGroupIds.length;t<f;t++)if(this.DisabledGroupIds[t]==u.Groups[n].Id){i=!0;break}i||this._groups.push(u.Groups[n])}if(this.MobileVersion){jq("#grpselector_mgroupList_"+this.ID).html(jq.tmpl("groupSelectorListTemplate",{Groups:this._groups}));jq("#grpselector_mgroupList_"+this.ID+" option[value='"+this.SelectedGroup+"']").attr("selected","selected");return}jq("#grpselector_filter_"+this.ID).val("");jq("#grpselector_groupList_"+this.ID).html(jq.tmpl("groupSelectorListTemplate",{Groups:this._groups}))},typeof ASC.Resources.Master.ApiResponses_Groups!="undefined"){for(this.MobileVersion===!0&&this.Groups.push(ASC.Resources.Master.GroupSelector_MobileVersionGroup),i&&this.Groups.push(ASC.Resources.Master.GroupSelector_WithGroupEveryone),r&&this.Groups.push(ASC.Resources.Master.GroupSelector_WithGroupAdmin),f=0,e=ASC.Resources.Master.ApiResponses_Groups.response.length;f<e;f++)this.Groups.push({Id:ASC.Resources.Master.ApiResponses_Groups.response[f].id,Name:ASC.Resources.Master.ApiResponses_Groups.response[f].name});jq("#grpselector_filter_"+this.ID).on("keyup",function(){u.SuggestGroups()});jq("#grpselector_clearFilterBtn_"+this.ID).on("click",function(){u.ClearFilter()});jq(document).click(function(t){jq(t.target?t.target:t.srcElement).parents().addBack().is("#groupSelectorBtn_"+n+", #groupSelectorContainer_"+n)||jq("#groupSelectorContainer_"+n).hide()});t?jq("#grpselector_mgroupList_"+n).bind("change",function(){var n=jq(this).val();n!=""&&n!="-1"&&(jq(u.Groups).each(function(t,i){if(i.Id==n)return u.SelectedGroup=i,!1}),u.Close())}):(jq("#groupSelectorBtn_"+n).bind("click",function(){u.Open()}),jq("#grpselector_clearFilterBtn_"+n).bind("click",function(){u.ClearFilter()}),jq("#grpselector_groupList_"+n).bind("click",function(n){if(jq(n.target).is("div.group")){var t=jq(n.target).attr("data");t!=""&&(jq(u.Groups).each(function(n,i){if(i.Id==t)return u.SelectedGroup=i,!1}),u.Close())}}))}};
typeof ASC=="undefined"&&(ASC={});typeof ASC.Mail=="undefined"&&(ASC.Mail=function(){return{}}());typeof ASC.Mail.Utility=="undefined"&&(ASC.Mail.Utility=function(){function i(){if(!window.ICAL)throw"Required ICAL module (~/js/third-party/ical.min.js)";if(!window.moment)throw"Required moment.js module (~/js/third-party/moment.min.js, ~/js/third-party/moment-timezone.min.js)";if(!window.RRule)throw"Required moment.js module (~/js/third-party/rrule.js, ~/js/third-party/nlp.js)";}function h(n){var t=jq.Deferred();return n.skipAccountsCheck?t.resolve(n,[]):window.Teamlab.getAccounts(n,{success:t.resolve,error:t.reject}),t.promise()}function c(n,t){var i=jq.Deferred(),r,u;try{if(n.skipAccountsCheck)return i.resolve(n),i.promise();if(r=n.message,t.length===0)throw"No accounts.";function f(n){var t=jq.grep(n,function(n){return n.is_default===!0}),i=t.length>0?t[0]:n[0];return new ASC.Mail.Address(i.name,i.email,!0)}if(r.from){if(u=jq.grep(t,function(n){return r.from.EqualsByEmail(n.email)}),u.length===0){if(!n.origCalendarEvent.canNotify)throw"From not found in your accounts.";r.from=f(t)}else if(u.length>1)throw"Found more then one account by From.";else if(!u[0].enabled)throw"Account is disabled.";}else r.from=f(t);i.resolve(n)}catch(e){i.reject(n,e)}return i.promise()}function l(n){var t=jq.Deferred(),i;return n.skipSave?(t.resolve(n,{messageUrl:null,saveSkipped:!0}),t.promise()):(i=n.message,window.Teamlab.saveMailMessage(n,i,{success:t.resolve,error:t.reject}),t.promise())}function a(n,t){var i=jq.Deferred(),r;return n.skipSave?(i.resolve(n,{messageUrl:null,saveSkipped:!0}),i.promise()):(r=n.message,r.id=t.id,i.resolve(n,{messageUrl:"/addons/mail/#draftitem/"+r.id}),i.promise())}function v(n,t){var r=jq.Deferred(),i,f,e,u,o,s;if(n.skipSave)return r.resolve(n,t),r.promise();if(i=n.message,i.HasDocumentsForSave()){f=i.GetDocumentsForSave();function h(r){var u=jq.Deferred(),f={fileId:r,version:"",shareLink:""};return window.Teamlab.addMailDocument({message:i,documentId:r,sendImmediately:n.sendImmediately},i.id,f,{success:function(n,r){i.attachments.push(r);i.RemoveDocumentAfterSave(n.documentId);u.resolve(n,t)},error:u.reject}),u.promise()}for(e=[],u=0,o=f.length;u<o;u++)s=f[u],e.push(h(s));jq.when.apply(jq,e).done(function(){i.HasDocumentsForSave()?r.reject(n,"Something goes wrong."):r.resolve(n,t)}).fail(r.reject)}else r.resolve(n,t);return r.promise()}function y(n){var t=jq.Deferred(),i;return n.skipSend?(t.resolve(n,-1),t.promise()):(i=n.message,window.Teamlab.sendMailMessage(n,i,{success:t.resolve,error:t.reject}),t.promise())}function p(n,t){var u=jq.Deferred(),f=n.skipSend?{messageUrl:null,sendSkipped:!0}:{messageUrl:"/addons/mail/#conversation/"+t},e=ASC.SocketIO&&!ASC.SocketIO.disabled()?ASC.SocketIO.Factory.counters:null,i;return n.skipSend||e&&e.connected()||(i=0,n.method==="REQUEST"?i=1:n.method==="REPLY"?i=2:n.method==="CANCEL"&&(i=3),r=t,setTimeout(function(){ASC.Mail.Utility._showSignalRMailNotification(i)},3e3)),n.method!=="REPLY"||n.skipCalendarImport?u.resolve(n,f):Teamlab.importCalendarEventIcs({},n.calendarId,n.message.calendarIcs,{success:function(){u.resolve(n,f)},error:u.reject,max_request_attempts:1}),u.promise()}function f(n){var t=jq.Deferred();return Teamlab.getCalendarEventByUid(n,n.calendarEventUid,{success:t.resolve,error:t.reject,max_request_attempts:1}),t.promise()}function u(n,t){var o=jq.Deferred(),c,u,f,r,i,s,e,h;try{if(n.origCalendarEvent=t,!t||!t.mergedIcs)throw"Empty ical";if(c=window.ICAL.parse(t.mergedIcs),u=new window.ICAL.Component(c),u.name!=="vcalendar")throw"Unsupported ical type (only vcalendar)";if(f=u.getFirstSubcomponent("vevent"),!f)throw"VEVENT not found";if(r=new window.ICAL.Event(f),r.uid!==n.calendarEventUid)throw'No found event by calendarEventUid="{0}"'.format(n.calendarEventUid);if(i={comp:u,vevent:f,event:r,organizerAddress:new ASC.Mail.Address(Encoder.htmlDecode(f.getFirstProperty("organizer").getParameter("cn")||""),r.organizer.toLowerCase().replace("mailto:","")),calendarTimeZone:t.timeZone},s=f.getFirstPropertyValue("rrule"),s!==null&&(i.recurrence=ASC.Mail.Utility.ToRRuleRfc2445String(s)),!ASC.Mail.Utility.IsValidEmail(i.organizerAddress.email))throw'Organizer email "{0}" is invalid'.format(i.organizerAddress.email,r.organizer);if(i.organizerAddress.isValid=!0,!r.attendees||r.attendees.length===0)throw"Unable to find attendees";switch(n.method){case"REQUEST":case"REPLY":if(u.getFirstPropertyValue("method")!=="REQUEST"&&u.getFirstPropertyValue("method")!=="REPLY"&&u.getFirstPropertyValue("method")!=="PUBLISH")throw"Allow only REQUEST";case"CANCEL":break;default:throw'Unsupported send method "{0}"'.format(n.method);}if(n.method==="REPLY"){if(e=jq.grep(r.attendees,function(t){return ASC.Mail.Utility.IsEqualEmail(t.getFirstValue().toLowerCase().replace("mailto:",""),n.attendeeEmail)})[0],!e)throw'Attendee with email "{0}" not found'.format(n.attendeeEmail);if(e.getParameter("partstat")===n.replyDecision)throw'Attendee with email "{0}" already answered "{1}"'.format(n.attendeeEmail,n.replyDecision);if(i.currentAttendee=e,i.currentAttendeeAddress=new ASC.Mail.Address(Encoder.htmlDecode(e.getParameter("cn")||""),e.getFirstValue().toLowerCase().replace("mailto:","")),!ASC.Mail.Utility.IsValidEmail(i.currentAttendeeAddress.email))throw'Attendee email "{0}" is invalid'.format(i.currentAttendeeAddress.email,i.currentAttendee);i.currentAttendeeAddress.isValid=!0;n.skipSend=i.currentAttendeeAddress.EqualsByEmail(i.organizerAddress);n.skipSend&&(n.skipSave=!0)}else if(n.method==="CANCEL"&&n.attendeesEmails){if(h=jq.grep(r.attendees,function(t){for(var r=!1,i=0,u=n.attendeesEmails.length;i<u;i++)if(ASC.Mail.Utility.IsEqualEmail(t.getFirstValue().toLowerCase().replace("mailto:",""),n.attendeesEmails[i])){r=!0;break}return r}),!h)throw"Attendees for cancel not found in event.";i.cancelAttendees=h}o.resolve(n,i)}catch(l){o.reject(n,l)}return o.promise()}function e(t,i){function a(n){return n?"https://maps.google.com/maps?q={0}".format(n.split(/[,\s]/).join("+")):""}var r,f,l;window.moment.locale(ASC.Resources.Master.TwoLetterISOLanguageName);var e=window.moment(i.event.startDate.toJSDate()),u=window.moment(i.event.endDate.toJSDate()),o=i.event.startDate.isDate,s=i.event.endDate.isDate,h=i.calendarTimeZone&&!o?e.utcOffset(i.calendarTimeZone.offset):e,c=i.calendarTimeZone&&!s?u.utcOffset(i.calendarTimeZone.offset):u;o&&s&&e.isBefore(u,"day")&&(u=u.clone().startOf("day").add(-1,"day"),c=u);r={summary:i.event.summary,location:i.event.location,allDay:!1,orgName:i.organizerAddress.name,orgEmail:i.organizerAddress.email,mailToHref:"mailto:"+i.organizerAddress.email,mapUrl:i.event.location?a(i.event.location):null};r.dateEvent=ASC.Mail.Utility.ToCalendarDateString(h,c,o,s);i.recurrence&&(r.rruleText=ASC.Mail.Utility.ToCalendarRRuleString(i.recurrence,h));switch(t.method){case"REQUEST":r.action=t.isUpdate?n.MailIcsUpdateDescription:n.MailIcsRequestDescription.format(i.organizerAddress.name||i.organizerAddress.email||i.currentAttendeeAddress.name||i.currentAttendeeAddress.email);break;case"REPLY":switch(t.replyDecision){case"ACCEPTED":f=n.MailIcsReplyYesDescription;break;case"TENTATIVE":f=n.MailIcsReplyMaybeDescription;break;case"DECLINED":f=n.MailIcsReplyNoDescription;break;default:throw"Unsupported attendee partstart";}r.action=f.format(i.currentAttendeeAddress.name||i.currentAttendeeAddress.email);break;case"CANCEL":r.action=n.MailIcsCancelDescription}return l=jq("<div/>").html(jq.tmpl("template-mailCalendar",r)).prop("outerHTML"),'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">                    <html xmlns="http://www.w3.org/1999/xhtml">                        <head>                            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />                            <link href="https://fonts.googleapis.com/css?family=Open+Sans:900,800,700,600,500,400,300&subset=latin,cyrillic-ext,cyrillic,latin-ext" rel="stylesheet" type="text/css" />                            <meta name="viewport" content="width=device-width" />                        <\/head>                        <body style="margin: 0; padding: 0; text-align: center; width: 100%; font-family: \'Open Sans\', Tahoma, Arial; font-size: 14px; color: #333;">'+l+"<\/body>                    <\/html>"}function w(t,i){var u=jq.Deferred(),r=new ASC.Mail.Message,f=[],o,s;return jq.each(i.event.attendees,function(n,r){var u=r.getFirstValue().toLowerCase().replace("mailto:",""),s=r.getParameter("cn")||"",e,o;if(ASC.Mail.Utility.IsValidEmail(u)){if(i.organizerAddress.EqualsByEmail(u)||(e=new ASC.Mail.Address(s,u,!0),t.attendeesEmails&&(o=jq.grep(t.attendeesEmails,function(n){return e.EqualsByEmail(n)}),o.length===0)))return!0;f.push(e)}return!0}),f.length>0?(o=i.organizerAddress,s=t.isUpdate?n.MailIcsUpdateSubject.format(i.event.summary):n.MailIcsRequestSubject.format(i.event.summary),r.from=o,r.to=f,r.subject=s,r.body=e(t,i),r.calendarIcs=i.comp.toString(),u.resolve(r,t)):u.reject(t,"Empty recipients list (toAddresses)"),u.promise()}function o(t,i){var o=jq.Deferred(),r=new ASC.Mail.Message,f,s,u,h;try{i.comp.updatePropertyWithValue("prodid","-//Ascensio System//OnlyOffice Calendar//EN");i.comp.updatePropertyWithValue("method",t.method);i.currentAttendee.removeParameter("rsvp");i.currentAttendee.setParameter("partstat",t.replyDecision);f=window.ICAL.Time.now();i.vevent.updatePropertyWithValue("dtstamp",f);i.vevent.updatePropertyWithValue("created",f);i.vevent.updatePropertyWithValue("last-modified",f);i.vevent.removeAllProperties("attendee");i.vevent.addProperty(i.currentAttendee);s=i.organizerAddress;switch(t.replyDecision){case"ACCEPTED":u=n.MailIcsReplyYesDescription;break;case"TENTATIVE":u=n.MailIcsReplyMaybeDescription;break;case"DECLINED":u=n.MailIcsReplyNoDescription;break;default:throw"Unsupported attendee partstart";}u='{0} "{1}"'.format(u.format(i.currentAttendeeAddress.name||i.currentAttendeeAddress.email),i.event.summary);h=new ASC.Mail.Address("",t.attendeeEmail,!0);r.from=h;r.to=[s];r.subject=n.MailIcsReplySubject.format(u);r.body=e(t,i);r.calendarIcs=i.comp.toString();o.resolve(r,t)}catch(c){o.reject(t,c)}return o.promise()}function b(t,i){var s=jq.Deferred(),u=new ASC.Mail.Message,f,r,h,o,c;if(i.comp.updatePropertyWithValue("prodid","-//Ascensio System//OnlyOffice Calendar//EN"),i.comp.updatePropertyWithValue("method",t.method),i.comp.updatePropertyWithValue("status","CANCELLED"),f=[],i.cancelAttendees)for(i.vevent.removeAllProperties("attendee"),r=0,h=i.cancelAttendees.length;r<h;r++)i.cancelAttendees[r].removeParameter("rsvp"),i.cancelAttendees[r].setParameter("partstat","DECLINED"),i.vevent.addProperty(i.cancelAttendees[r]),f.push(new ASC.Mail.Address(i.cancelAttendees[r].getParameter("cn"),i.cancelAttendees[r].getFirstValue().toLowerCase().replace("mailto:",""),!0));else jq.each(i.event.attendees,function(n,t){var i=t.getFirstValue().toLowerCase().replace("mailto:",""),r=t.getParameter("cn")||"";ASC.Mail.Utility.IsValidEmail(i)&&f.push(new ASC.Mail.Address(r,i,!0))});return o=window.ICAL.Time.now(),i.vevent.updatePropertyWithValue("dtstamp",o),i.vevent.updatePropertyWithValue("created",o),i.vevent.updatePropertyWithValue("last-modified",o),c=i.organizerAddress,u.from=c,u.to=f,u.subject=n.MailIcsCancelSubject.format(i.event.summary),u.body=e(t,i),u.calendarIcs=i.comp.toString(),s.resolve(u,t),s.promise()}function s(n){var t=jq.Deferred();try{if(i(),!n.calendarEventUid)throw"Param 'calendarEventUid' value is empty";f(n).then(u,t.reject).then(w,t.reject).then(ASC.Mail.Utility.SendMessage,t.reject).then(t.resolve,t.reject)}catch(r){t.reject(n,r)}return t.promise()}function k(n){var t=jq.Deferred();try{if(i(),!n.calendarEventUid)throw"Param 'calendarEventUid' value is empty";f(n).then(u,t.reject).then(b,t.reject).then(ASC.Mail.Utility.SendMessage,t.reject).then(t.resolve,t.reject)}catch(r){t.reject(n,r)}return t.promise()}var n=ASC.Resources.Master.Resource,t={None:0,EmptyRecipients:1,IncorrectEmail:2},r=0;return{ParseErrorTypes:t,ParseAddresses:function(n){function h(n){var t=n.match(/^"(.*)"\s*<([^>]+)>$/)||n.match(/^(.*)<([^>]+)>$/);return t?{name:jq.trim(t[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\")),email:jq.trim(t[2])}:{email:n}}function c(n){var t=undefined;return n.email&&(t=n.email,n.name&&(t='"'+n.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'" <'+t+">")),t}function o(n){var r,u,f;(n=c(h(n)),n)&&(r=emailAddresses.parseOneAddress(n),r?(u=!0,r.domain.indexOf(".")===-1&&(u=!1,i.errors.push({message:"Incorrect domain",type:t.IncorrectEmail,errorItem:n})),/^[\x00-\x7F]+$/.test(punycode.toUnicode(r.domain))||(u=!1,i.errors.push({message:"Punycode domains are not suppoted",type:t.IncorrectEmail,errorItem:n})),/^[\x00-\x7F]+$/.test(r.local)||(u=!1,i.errors.push({message:"Incorrect localpart",type:t.IncorrectEmail,errorItem:n})),i.addresses.push(new ASC.Mail.Address(r.name||"",r.address,u))):(f=n.trim(),f&&(i.addresses.push(new ASC.Mail.Address("",f,!1)),i.errors.push({message:"Incorrect email",type:t.IncorrectEmail,errorItem:n}))))}var i={addresses:[],errors:[]},r;if("string"!=typeof n||n.length===0)return i.errors.push({message:"Empty recipients",type:t.EmptyRecipients,errorItem:null}),i;r=n.replace(/[\s,;]*$/,",");for(var f,e=!1,s=0,u=0,l=r.length;l>u;u+=1)switch(r.charAt(u)){case",":case";":e||(f=r.substring(s,u),f=jq.trim(f),f&&o(f),s=u+1);break;case'"':"\\"!==r.charAt(u-1)&&'"'!==r.charAt(u+1)&&(e=!e)}return i.addresses.length||o(r.replace(/,\s*$/,"")),i},ParseAddress:function(n){var t=ASC.Mail.Utility.ParseAddresses(n);return t.errors.length>0||t.addresses.length!==1?new ASC.Mail.Address("",n,!1):t.addresses[0]},IsValidEmail:function(n){return ASC.Mail.Utility.ParseAddress(n).isValid},IsValidDomainName:function(n){var t=emailAddresses.parseOneAddress("test@"+n);return!!t&&t.domain===n&&n.indexOf(".")!==-1},IsEqualEmail:function(n,t){var i=ASC.Mail.Utility.ParseAddress(n),r=ASC.Mail.Utility.ParseAddress(t);return!i.isValid||!r.isValid?!1:i.email===r.email},SaveMessageInDrafts:function(n,t){var i=jq.Deferred();t=t||{skipAccountsCheck:!0};try{if(!(n instanceof ASC.Mail.Message))throw"Unsupported message format";t.hasOwnProperty("skipAccountsCheck")&&n.from||(t.skipAccountsCheck=!1);t.message=n;h(t).then(c,i.reject).then(l,i.reject).then(a,i.reject).then(v,i.reject).then(i.resolve,i.reject)}catch(r){i.reject(t,r)}return i.promise()},SendMessage:function(n,t){var r=jq.Deferred(),i;t=t||{skipAccountsCheck:!0};try{if(!(n instanceof ASC.Mail.Message))throw"Unsupported message format";t.hasOwnProperty("skipAccountsCheck")&&n.from||(t.skipAccountsCheck=!1);function u(n){var t={addresses:[],hasBad:!1},r,i,f,u;if(!n||!n.length)return t;if(!jq.isArray(n)&&"string"==typeof n)return r=ASC.Mail.Utility.ParseAddresses(n),t.addresses=r.addresses,t.hasBad=r.errors.length>0,t;for(i=0,f=n.length;i<f;i++)u=(n[i]instanceof ASC.Mail.Address)?n[i]:ASC.Mail.Utility.ParseAddress(n[i]),t.addresses.push(u),u.isValid||(t.hasBad=!0);return t}if(i=u(n.to),n.to=i.addresses,n.to.length===0)throw"To field is empty";else if(i.hasBad)throw"To field contains invalid recipients.";if(i=u(n.cc),n.cc=i.addresses,i.hasBad)throw"Cc field contains invalid recipients.";if(i=u(n.bcc),n.bcc=i.addresses,i.hasBad)throw"Bcc field contains invalid recipients.";ASC.Mail.Utility.SaveMessageInDrafts(n,t).then(y,r.reject).then(p,r.reject).then(r.resolve,r.reject)}catch(f){r.reject(t,f)}return r.promise()},SendCalendarRequest:function(n,t,i,r){return r=r||{skipAccountsCheck:!0},r.calendarId=n||-1,r.calendarEventUid=t,r.method="REQUEST",r.skipSave=r.skipSave||!0,i&&(r.attendeesEmails=i),s(r)},SendCalendarUpdate:function(n,t,i,r){return r=r||{skipAccountsCheck:!1},r.calendarId=n||-1,r.calendarEventUid=t,r.method="REQUEST",r.isUpdate=!0,r.skipSave=r.skipSave||!0,i&&(r.attendeesEmails=i),s(r)},SendCalendarReply:function(n,t,r,e,s){var h=jq.Deferred();s=s||{skipAccountsCheck:!0};s.calendarId=n||-1;s.calendarEventUid=t;s.method="REPLY";s.attendeeEmail=r;s.replyDecision=e;s.skipSave=s.skipSave||!0;try{if(i(),!t)throw t;if(!r)throw r;if(!e)throw e;if(e!=="ACCEPTED"&&e!=="DECLINED"&&e!=="TENTATIVE")throw e;if(!ASC.Mail.Utility.IsValidEmail(r))throw r;f(s).then(u,h.reject).then(o,h.reject).then(ASC.Mail.Utility.SendMessage,h.reject).then(h.resolve,h.reject)}catch(c){h.reject(s,c)}return h.promise()},SendCalendarReplyIcs:function(n,t,r,f,e){var s=jq.Deferred();e=e||{skipAccountsCheck:!0};e.calendarId=-1;e.calendarEventUid=n;e.method="REPLY";e.attendeeEmail=r;e.replyDecision=f;e.skipSave=e.skipSave||!0;e.skipCalendarImport=e.skipCalendarImport||!0;try{if(i(),!n)throw n;if(!r)throw r;if(!f)throw f;if(f!=="ACCEPTED"&&f!=="DECLINED"&&f!=="TENTATIVE")throw f;if(!ASC.Mail.Utility.IsValidEmail(r))throw r;u(e,{mergedIcs:t}).then(o,s.reject).then(ASC.Mail.Utility.SendMessage,s.reject).then(s.resolve,s.reject)}catch(h){s.reject(e,h)}return s.promise()},SendCalendarCancel:function(n,t,i,r){return r=r||{skipAccountsCheck:!0},r.calendarId=n||-1,r.calendarEventUid=t,r.method="CANCEL",r.skipSave=r.skipSave||!0,i&&(r.attendeesEmails=i),k(r)},_showSignalRMailNotification:function(t){var i=StudioManager.getCurrentModule();if(i==="mail"||i==="calendar"){switch(t){case-1:toastr.error(n.MailSendMessageError);i==="mail"&&window.mailAlerts&&window.mailAlerts.check(r>0?{showFailureOnlyMessageId:r}:{});break;case 0:toastr.success(n.MailSentMessageText);i==="mail"&&window.mailAlerts&&(!ASC.Resources.Master.Hub.Url||jq.connection&&jq.connection.hub.state!==jq.connection.connectionState.connected)&&setTimeout(function(){window.mailAlerts.check(r>0?{showFailureOnlyMessageId:r}:{})},5e3);break;case 1:toastr.success(n.MailSentIcalRequestText);break;case 2:toastr.success(n.MailSentIcalResponseText);break;case 3:toastr.success(n.MailSentIcalCancelText)}i==="mail"&&window.messagePage&&window.messagePage.refreshMailAfterSent(t)}},ToCalendarDateString:function(t,r,u,f){i();var e=t.format("ddd, DD MMM YYYY"),o=r.format("ddd, DD MMM YYYY"),h=u?"":t.format("LT"),c=f?"":r.format("LT"),s="(GMT{0})".format(t.format("Z"));return t.isSame(r,"day")?u?"{0}, {1}".format(e,n.MailIcsCalendarAllDayEventLabel):"{0}, {1} - {2} {3}".format(e,h,c,s):u&&f?"{0}, {1} - {2}, {1}".format(e,n.MailIcsCalendarAllDayEventLabel,o):u&&!f?"{0}, {1} - {2}, {3} {4}".format(e,n.MailIcsCalendarAllDayEventLabel,o,c,s):!u&&f?"{0}, {1} {2} - {3}, {4}".format(e,h,s,o,n.MailIcsCalendarAllDayEventLabel):"{0}, {1} - {2}, {3} {4}".format(e,h,o,c,s)},ToCalendarRRuleString:function(t,r,u){var f,e,o;i();r||(r=window.moment());try{f=RRule.parseString(t);f.dtstart=r.toDate();e=new RRule(f);o={dayNames:ASC.Resources.Master.DayNames,monthNames:ASC.Resources.Master.MonthNames,tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,"for":/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}};function s(t){switch(t.toLowerCase()){case"every":return n.MailIcsRRuleEveryLabel;case"until":return n.MailIcsRRuleUntilLabel;case"for":return n.MailIcsRRuleForLabel;case"times":return n.MailIcsRRuleTimesLabel;case"time":return n.MailIcsRRuleTimeLabel;case"(~ approximate)":return"(~ {0})".format(n.MailIcsRRuleApproximateLabel);case"hours":return n.MailIcsRRuleHoursLabel;case"hour":return n.MailIcsRRuleHourLabel;case"weekdays":return n.MailIcsRRuleWeekdaysLabel;case"weekday":return n.MailIcsRRuleWeekdayLabel;case"days":return n.MailIcsRRuleDaysLabel;case"day":return n.MailIcsRRuleDayLabel;case"weeks":return n.MailIcsRRuleWeeksLabel;case"week":return n.MailIcsRRuleWeekLabel;case"months":return n.MailIcsRRuleMonthsLabel;case"month":return n.MailIcsRRuleMonthLabel;case"years":return n.MailIcsRRuleYearsLabel;case"year":return n.MailIcsRRuleYearLabel;case"on":return n.MailIcsRRuleOnLabel;case"on the":return n.MailIcsRRuleOnTheLabel;case"in":return n.MailIcsRRuleInLabel;case"at":return n.MailIcsRRuleAtLabel;case"the":return n.MailIcsRRuleTheLabel;case"and":return n.MailIcsRRuleAndLabel;case"or":return n.MailIcsRRuleOrLabel;case"last":return n.MailIcsRRuleLastLabel;case"st":return n.MailIcsRRuleStLabel;case"nd":return n.MailIcsRRuleNdLabel;case"rd":return n.MailIcsRRuleRdLabel;case"th":return n.MailIcsRRuleThLabel;case"rrule error: unable to fully convert this rrule to text":return n.MailIcsRRuleParseErrorLabel;default:return t}}return u?e.toText():e.toText(s,o)}catch(h){console.warn(h)}return""},ToRRuleRfc2445String:function(n){var t,i;if(typeof n!="object"&&!n.icaltype&&n.icaltype!=="recur")throw"not supported rrule param";t="FREQ="+n.freq;n.count&&(t+=";COUNT="+n.count);n.interval>1&&(t+=";INTERVAL="+n.interval);for(i in n.parts)n.parts.hasOwnProperty(i)&&(t+=";"+i+"="+n.parts[i]);return n.until&&(t+=";UNTIL="+(n.until.isDate?window.moment(n.until.toJSDate()).startOf("day"):window.moment(n.until.toJSDate()).utc()).format("YYYYMMDD[T]HHmmss[Z]")),"wkst"in n&&n.wkst!==ICAL.Time.DEFAULT_WEEK_START&&(t+=";WKST="+ICAL.Recur.numericDayToIcalDay(n.wkst)),t}}}());typeof ASC.Mail.Message=="undefined"&&(ASC.Mail.Message=function(){var n=[];this.id=0;this.from="";this.to=[];this.cc=[];this.bcc=[];this.subject="";this.body="";this.attachments=[];this.mimeReplyToId="";this.importance=!1;this.tags=[];this.fileLinksShareMode=2;this.calendarIcs="";this.HasDocumentsForSave=function(){return n.length>0};this.AddDocumentsForSave=function(t){jq.merge(n,t)};this.GetDocumentsForSave=function(){return n};this.RemoveDocumentAfterSave=function(t){for(var r=-1,f=n.length,u,i=0;i<f;i++)if(u=n[i],u===t){r=i;break}r>-1&&n.splice(r,1)};this.ToData=function(){function i(n){return typeof n=="object"&&!(n instanceof ASC.Mail.Address)&&n.hasOwnProperty("name")&&n.hasOwnProperty("email")&&n.hasOwnProperty("isValid")&&(n=new ASC.Mail.Address(n.name,n.email,n.isValid)),n instanceof ASC.Mail.Address?n.ToString():n}function t(n){return n.map(i)}var r=JSON.stringify(this),n=JSON.parse(r);return n.from=i(n.from),n.to=t(n.to),n.cc=t(n.cc),n.bcc=t(n.bcc),n}},typeof ASC.Mail.Address=="undefined"&&(ASC.Mail.Address=function(n,t,i){function r(n){var t,i,u,r;if(!n)return"";for(t='"',i=0,u=n.length;i<u;i++)r=n[i],(r==="\\"||r==='"')&&(t+="\\"),t+=r;return t+'"'}this.name=n||"";this.email=t;this.isValid=i;this.ToString=function(n){return this.name?n?this.name+" <"+this.email+">":r(this.name)+" <"+this.email+">":this.email};this.Equals=function(n){if(typeof n=="object"&&n instanceof ASC.Mail.Address)return this===n;if(typeof n=="string"){var t=ASC.Mail.Utility.ParseAddress(n);return this.email===t}return!1};this.EqualsByEmail=function(n){if(typeof n=="object"&&n instanceof ASC.Mail.Address)return this.email.toLowerCase()===n.email.toLowerCase();if(typeof n=="string"){var t=ASC.Mail.Utility.ParseAddress(n);return this.email.toLowerCase()===t.email.toLowerCase()}return!1}}));typeof ASC.Mail.Sanitizer=="undefined"&&(ASC.Mail.Sanitizer=function(){function i(n){return n=n||{urlProxyHandler:"",needProxyHttp:!1,loadImages:!0,baseHref:window.location.origin},n.hasOwnProperty("urlProxyHandler")&&n.urlProxyHandler.length!==0||(n.urlProxyHandler="",n.needProxyHttp=!1),n.hasOwnProperty("needProxyHttp")||(n.needProxyHttp=!1),n.hasOwnProperty("loadImages")||(n.loadImages=!0),n.hasOwnProperty("baseHref")||(n.baseHref=window.location.origin),n}function t(n,t){i(t);return t.needProxyHttp&&n.indexOf("http://")===0?"{0}?url={1}".format(t.urlProxyHandler,jq.base64.encode(n)):n}function f(n){var t=document.createElement("a");return t.href=n,t}function e(n){try{var t=f(n);return t.protocol==="http:"||t.protocol==="https:"}catch(i){return!1}}function r(n,t){return n.indexOf("/")!==0?n:t.baseHref?t.baseHref+n:n}function o(u,f,o){var s,h,w,c,d,l,b;i(o);for(var v=u.style,y="",a=!1,p=0,k=v.length;p<k;p++){s=(v[p]||"").trim().toLowerCase();h=(v[v[p]]||"").trim().toLowerCase();try{if(n.styleForbiddenValue.test(h)||s==="position"||s==="margin-left"&&h.indexOf("-")!==-1||s==="margin-top"&&h.indexOf("-")!==-1||s==="margin-rigth"&&h.indexOf("-")!==-1||s==="margin-bottom"&&h.indexOf("-")!==-1||s==="left"||s==="top"||s==="rigth"||s==="bottom"){a=!0;continue}if(w=n.styleUrl.exec(h),!w){y="{0}{1}:{2};".format(y,s,h);continue}if(c=w[1].replace(n.quotes,""),!n.styleEmbeddedImage.test(c)&&(d=c.indexOf("//")===0?"http:"+c:c,!e(d))){a=!0;continue}l=r(c,o);o.needProxyHttp&&(l.length>0?l=t(l,o):(b=t(c,o),b.Equals(c)||(l=b)));l.length>0&&l!==c&&(h=h.replace(c,l),a=!0);s!=="background-image"&&(s!=="background"||h.indexOf("url(")===-1)||o.loadImages||(s="tl_disabled_"+s,f.imagesBlocked=!0,a=!0)}catch(g){a=!0;continue}y="{0}{1}{2};".format(y,s,h.length===0?"":":"+h)}return a&&console.log("Sanitizer: tag '%s' style changed:\n\told: '%s'\n\n\tnew: '%s'\n",u.tagName,v.cssText,y),a?y:v.cssText}function s(){var n=window.navigator.userAgent,i=n.indexOf("MSIE "),u,r,t;return i>0?parseInt(n.substring(i+5,n.indexOf(".",i)),10):(u=n.indexOf("Trident/"),u>0)?(r=n.indexOf("rv:"),parseInt(n.substring(r+3,n.indexOf(".",r)),10)):(t=n.indexOf("Edge/"),t>0)?parseInt(n.substring(t+5,n.indexOf(".",t)),10):!1}function h(f,e){function a(n){h.contentDocument.open();h.contentDocument.write(n);h.contentDocument.close()}function y(i){var s,p,l,v,f,a,w;switch(i.nodeType){case Node.TEXT_NODE:s=i.cloneNode(!0);break;case Node.ELEMENT_NODE:if(p=i.tagName.toUpperCase(),!u[p]){s=document.createDocumentFragment();break}for(s=h.contentDocument.createElement(p),l=0,v=i.attributes.length;l<v;l++){f=i.attributes[l];try{switch(f.name){case"background":case"src":a=f.value;n.styleEmbeddedImage.test(a)||(a=r(f.value,e));e.loadImages?s.setAttribute(f.name,t(a,e)):(s.setAttribute("tl_disabled_"+f.name,t(a,e)),c.imagesBlocked=!0);break;case"style":a=o(i,c,e);s.setAttribute(f.name,a);break;case"class":break;default:f.name.indexOf("on")!==0&&f.value.length>0&&s.setAttribute(f.name,f.value)}}catch(b){console.log("sanitize: ",b)}}for(l=0,v=i.childNodes.length;l<v;l++)try{w=y(i.childNodes[l]);s.appendChild(w,!1)}catch(k){console.log("sanitize: ",k)}break;default:s=document.createDocumentFragment()}return s}var c,h,l,v,p;if(i(e),c={html:f,imagesBlocked:!1,sanitized:!1,httpProxied:!1},!f)return c;if(h=document.createElement("iframe"),h.sandbox===undefined){l="Sorry, but your browser does not support sandboxed iframes. Please upgrade to a modern browser.";alert(l);throw l;}h.sandbox="allow-same-origin";h.style.display="none";s()||(h.src="data:text/html;base64,PHNwYW4+ZmFrZSBodG1sPC9zcGFuPg==");document.body.appendChild(h);try{v=f.replace(/<\/?link\b.*?>/g,"").replace(/ on\w+=".*?"/g,"");a(v)}catch(w){a(f)}return p=y(h.contentDocument.body),document.body.removeChild(h),c.html=p.innerHTML,c.sanitized=!0,c}var u={A:!0,ABBR:!0,ACRONYM:!0,ADDRESS:!0,APPLET:!0,AREA:!0,ARTICLE:!0,ASIDE:!0,AUDIO:!0,B:!0,BDI:!0,BDO:!0,BGSOUND:!0,BLOCKQUOTE:!0,BIG:!0,BODY:!0,BLINK:!0,BR:!0,CANVAS:!0,CAPTION:!0,CENTER:!0,CITE:!0,CODE:!0,COL:!0,COLGROUP:!0,COMMENT:!0,DATALIST:!0,DD:!0,DEL:!0,DETAILS:!0,DFN:!0,DIR:!0,DIV:!0,DL:!0,DT:!0,EM:!0,FIGCAPTION:!0,FIGURE:!0,FONT:!0,FOOTER:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEAD:!0,HEADER:!0,HGROUP:!0,HR:!0,HTML:!0,I:!0,IMG:!0,INS:!0,ISINDEX:!0,KBD:!0,LABEL:!0,LEGEND:!0,LI:!0,MAP:!0,MARQUEE:!0,MARK:!0,META:!1,METER:!0,NAV:!0,NOBR:!0,NOEMBED:!0,NOFRAMES:!0,NOSCRIPT:!0,OL:!0,OPTGROUP:!0,OPTION:!0,"O:SMARTTAGTYPE":!0,P:!0,PLAINTEXT:!0,PRE:!0,Q:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SECTION:!0,SMALL:!0,SPAN:!0,SOURCE:!0,STRIKE:!0,STRONG:!0,STYLE:!1,SUB:!0,SUMMARY:!0,SUP:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TIME:!0,TITLE:!1,TR:!0,TT:!0,U:!0,UL:!0,VAR:!0,VIDEO:!0,WBR:!0,XMP:!0},n={styleEmbeddedImage:/^data:([\w/]+);(\w+),([^\"^)\s]+)/,styleItems:/^([^\s^:]+)\s*:\s*([^;]+);?/g,styleUrl:/^.*\b\s*url\s*\(([^)]*)\)/i,styleForbiddenValue:/^(?:(expression|eval|javascript|vbscript))\s*(\(|:)/,quotes:/['"]+/g};return{Sanitize:function(n,t){try{return h(n,t)}catch(i){var r="Failed ASC.Mail.Sanitizer.Sanitize: {0}".format(i);console.error(r,i);n=r}return{html:n,imagesBlocked:!1,sanitized:!1,httpProxied:!1}}}}());
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){function i(){}function u(n){return n}function et(n){return!!n}function c(n){return!n}function s(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments);n=null}}function o(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function w(n){return e(n)||"number"==typeof n.length&&n.length>=0&&n.length%1==0}function r(n,t){for(var i=-1,r=n.length;++i<r;)t(n[i],i,n)}function h(n,t){for(var i=-1,r=n.length,u=Array(r);++i<r;)u[i]=t(n[i],i,n);return u}function ot(n){return h(Array(n),function(n,t){return t})}function wt(n,t,i){return r(n,function(n,r,u){i=t(i,n,r,u)}),i}function bt(n,t){r(ut(n),function(i){t(n[i],i)})}function st(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1}function b(n){var i,r,t=-1;return w(n)?(i=n.length,function(){return t++,i>t?t:null}):(r=ut(n),i=r.length,function(){return t++,i>t?r[t]:null})}function t(n,t){return t=null==t?n.length-1:+t,function(){for(var u=Math.max(arguments.length-t,0),r=Array(u),i=0;u>i;i++)r[i]=arguments[i+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function k(n){return function(t,i,r){return n(t,r)}}function l(n){return function(t,r,u){var e;if(u=o(u||i),t=t||[],e=b(t),0>=n)return u(null);var h=!1,f=0,c=!1;!function l(){if(h&&0>=f)return u(null);for(;n>f&&!c;){var i=e();if(null===i)return h=!0,void(0>=f&&u(null));f+=1;r(t[i],i,s(function(n){f-=1;n?(u(n),c=!0):l()}))}}()}}function a(t){return function(i,r,u){return t(n.eachOf,i,r,u)}}function d(n){return function(t,i,r,u){return n(l(i),t,r,u)}}function v(t){return function(i,r,u){return t(n.eachOfSeries,i,r,u)}}function g(n,t,r,u){u=o(u||i);t=t||[];var f=w(t)?[]:{};n(t,function(n,t,i){r(n,function(n,r){f[t]=r;i(n)})},function(n){u(n,f)})}function y(n,t,i,r){var u=[];n(t,function(n,t,r){i(n,function(i){i&&u.push({index:t,value:n});r()})},function(){r(h(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function nt(n,t,i,r){y(n,t,function(n,t){i(n,function(n){t(!n)})},r)}function f(n,t,i){return function(r,u,f,e){function o(){e&&e(i(!1,void 0))}function s(n,r,u){return e?void f(n,function(r){e&&t(r)&&(e(i(!0,n)),e=f=!1);u()}):u()}arguments.length>3?n(r,u,s,o):(e=f,f=u,n(r,s,o))}}function tt(n,t){return t}function it(n,r,u){u=u||i;var f=w(r)?[]:{};n(r,function(n,i,r){n(t(function(n,t){t.length<=1&&(t=t[0]);f[i]=t;r(n)}))},function(n){u(n,f)})}function ht(n,t,i,r){var u=[];n(t,function(n,t,r){i(n,function(n,t){u=u.concat(t||[]);r(n)})},function(n){r(n,u)})}function ct(t,u,f){function a(t,u,f,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,e(u)||(u=[u]),0===u.length&&t.idle()?n.setImmediate(function(){t.drain()}):(r(u,function(n){var r={data:n,callback:o||i};f?t.tasks.unshift(r):t.tasks.push(r);t.tasks.length===t.concurrency&&t.saturated()}),void n.setImmediate(t.process))}function v(n,t){return function(){c-=1;var i=!1,u=arguments;r(t,function(n){r(l,function(t,r){t!==n||i||(l.splice(r,1),i=!0)});n.callback.apply(n,u)});n.tasks.length+c===0&&n.drain();n.process()}}if(null==u)u=1;else if(0===u)throw new Error("Concurrency must not be zero");var c=0,l=[],o={tasks:[],concurrency:u,payload:f,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(n,t){a(o,n,!1,t)},kill:function(){o.drain=i;o.tasks=[]},unshift:function(n,t){a(o,n,!0,t)},process:function(){for(var n,i,r;!o.paused&&c<o.concurrency&&o.tasks.length;)n=o.payload?o.tasks.splice(0,o.payload):o.tasks.splice(0,o.tasks.length),i=h(n,function(n){return n.data}),0===o.tasks.length&&o.empty(),c+=1,l.push(n[0]),r=s(v(o,n)),t(i,r)},length:function(){return o.tasks.length},running:function(){return c},workersList:function(){return l},idle:function(){return o.tasks.length+c===0},pause:function(){o.paused=!0},resume:function(){if(o.paused!==!1){o.paused=!1;for(var i=Math.min(o.concurrency,o.tasks.length),t=1;i>=t;t++)n.setImmediate(o.process)}}};return o}function lt(n){return t(function(i,u){i.apply(null,u.concat([t(function(t,i){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&r(i,function(t){console[n](t)}))})]))})}function at(n){return function(t,i,r){n(ot(t),i,r)}}function vt(n){return t(function(i,r){var u=t(function(t){var r=this,u=t.pop();return n(i,function(n,i,u){n.apply(r,t.concat([u]))},u)});return r.length?u.apply(this,r):u})}function rt(i){return t(function(t){var u=t.pop(),r;t.push(function(){var t=arguments;r?n.setImmediate(function(){u.apply(null,t)}):u.apply(null,t)});r=!0;i.apply(this,t);r=!1})}var yt,n={},p="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=p&&(yt=p.async);n.noConflict=function(){return p.async=yt,n};var kt=Object.prototype.toString,e=Array.isArray||function(n){return"[object Array]"===kt.call(n)},dt=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},ut=Object.keys||function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t},ft="function"==typeof setImmediate&&setImmediate,pt=ft?function(n){ft(n)}:function(n){setTimeout(n,0)};n.nextTick="object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:pt;n.setImmediate=ft?pt:n.nextTick;n.forEach=n.each=function(t,i,r){return n.eachOf(t,k(i),r)};n.forEachSeries=n.eachSeries=function(t,i,r){return n.eachOfSeries(t,k(i),r)};n.forEachLimit=n.eachLimit=function(n,t,i,r){return l(t)(n,k(i),r)};n.forEachOf=n.eachOf=function(n,t,r){function e(n){f--;n?r(n):null===u&&0>=f&&r(null)}r=o(r||i);n=n||[];for(var u,h=b(n),f=0;null!=(u=h());)f+=1,t(n[u],u,s(e));0===f&&r(null)};n.forEachOfSeries=n.eachOfSeries=function(t,r,u){function e(){var i=!0;return null===f?u(null):(r(t[f],f,s(function(t){if(t)u(t);else{if(f=h(),null===f)return u(null);i?n.setImmediate(e):e()}})),void(i=!1))}u=o(u||i);t=t||[];var h=b(t),f=h();e()};n.forEachOfLimit=n.eachOfLimit=function(n,t,i,r){l(t)(n,i,r)};n.map=a(g);n.mapSeries=v(g);n.mapLimit=d(g);n.inject=n.foldl=n.reduce=function(t,i,r,u){n.eachOfSeries(t,function(n,t,u){r(i,n,function(n,t){i=t;u(n)})},function(n){u(n,i)})};n.foldr=n.reduceRight=function(t,i,r,f){var e=h(t,u).reverse();n.reduce(e,i,r,f)};n.transform=function(t,i,r,u){3===arguments.length&&(u=r,r=i,i=e(t)?[]:{});n.eachOf(t,function(n,t,u){r(i,n,t,u)},function(n){u(n,i)})};n.select=n.filter=a(y);n.selectLimit=n.filterLimit=d(y);n.selectSeries=n.filterSeries=v(y);n.reject=a(nt);n.rejectLimit=d(nt);n.rejectSeries=v(nt);n.any=n.some=f(n.eachOf,et,u);n.someLimit=f(n.eachOfLimit,et,u);n.all=n.every=f(n.eachOf,c,c);n.everyLimit=f(n.eachOfLimit,c,c);n.detect=f(n.eachOf,u,tt);n.detectSeries=f(n.eachOfSeries,u,tt);n.detectLimit=f(n.eachOfLimit,u,tt);n.sortBy=function(t,i,r){function u(n,t){var i=n.criteria,r=t.criteria;return r>i?-1:i>r?1:0}n.map(t,function(n,t){i(n,function(i,r){i?t(i):t(null,{value:n,criteria:r})})},function(n,t){return n?r(n):void r(null,h(t.sort(u),function(n){return n.value}))})};n.auto=function(u,f,s){function y(n){a.unshift(n)}function w(n){var t=st(a,n);t>=0&&a.splice(t,1)}function b(){c--;r(a.slice(0),function(n){n()})}var v,c;if("function"==typeof arguments[1]&&(s=f,f=null),s=o(s||i),v=ut(u),c=v.length,!c)return s(null);f||(f=c);var h={},l=0,p=!1,a=[];y(function(){c||s(null,h)});r(v,function(i){function a(){return f>l&&wt(o,function(n,t){return n&&h.hasOwnProperty(t)},!0)&&!h.hasOwnProperty(i)}function v(){a()&&(l++,w(v),r[r.length-1](k,h))}if(!p){for(var c,r=e(u[i])?u[i]:[u[i]],k=t(function(t,r){if(l--,r.length<=1&&(r=r[0]),t){var u={};bt(h,function(n,t){u[t]=n});u[i]=r;p=!0;s(t,u)}else h[i]=r,n.setImmediate(b)}),o=r.slice(0,r.length-1),d=o.length;d--;){if(!(c=u[o[d]]))throw new Error("Has nonexistent dependency in "+o.join(", "));if(e(c)&&st(c,i)>=0)throw new Error("Has cyclic dependencies");}a()?(l++,r[r.length-1](k,h)):y(v)}})};n.retry=function(t,i,r){function c(n,t){if("number"==typeof t)n.times=parseInt(t,10)||f;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||f;n.interval=parseInt(t.interval,10)||h}}function s(t,i){function f(n,t){return function(r){n(function(n,i){r(!n||t,{err:n,result:i})},i)}}function o(n){return function(t){setTimeout(function(){t(null)},n)}}for(;u.times;){var r=!(u.times-=1);e.push(f(u.task,r));!r&&u.interval>0&&e.push(o(u.interval))}n.series(e,function(n,i){i=i[i.length-1];(t||u.callback)(i.err,i.result)})}var f=5,h=0,e=[],u={times:f,interval:h},o=arguments.length;if(1>o||o>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=o&&"function"==typeof t&&(r=i,i=t),"function"!=typeof t&&c(u,t),u.callback=r,u.task=i,u.callback?s():s};n.waterfall=function(r,u){function f(n){return t(function(t,i){if(t)u.apply(null,[t].concat(i));else{var r=n.next();r?i.push(f(r)):i.push(u);rt(n).apply(null,i)}})}if(u=o(u||i),!e(r)){var s=new Error("First argument to waterfall must be an array of functions");return u(s)}return r.length?void f(n.iterator(r))():u()};n.parallel=function(t,i){it(n.eachOf,t,i)};n.parallelLimit=function(n,t,i){it(l(t),n,i)};n.series=function(t,i){it(n.eachOfSeries,t,i)};n.iterator=function(n){function t(i){function r(){return n.length&&n[i].apply(null,arguments),r.next()}return r.next=function(){return i<n.length-1?t(i+1):null},r}return t(0)};n.apply=t(function(n,i){return t(function(t){return n.apply(null,i.concat(t))})});n.concat=a(ht);n.concatSeries=v(ht);n.whilst=function(n,r,u){if(u=u||i,n()){var f=t(function(t,i){t?u(t):n.apply(this,i)?r(f):u.apply(null,[null].concat(i))});r(f)}else u(null)};n.doWhilst=function(t,i,r){var u=0;return n.whilst(function(){return++u<=1||i.apply(this,arguments)},t,r)};n.until=function(t,i,r){return n.whilst(function(){return!t.apply(this,arguments)},i,r)};n.doUntil=function(t,i,r){return n.doWhilst(t,function(){return!i.apply(this,arguments)},r)};n.during=function(n,r,u){u=u||i;var e=t(function(t,i){t?u(t):(i.push(f),n.apply(this,i))}),f=function(n,t){n?u(n):t?r(e):u(null)};n(f)};n.doDuring=function(t,i,r){var u=0;n.during(function(n){u++<1?n(null,!0):i.apply(this,arguments)},t,r)};n.queue=function(n,t){return ct(function(t,i){n(t[0],i)},t,1)};n.priorityQueue=function(t,u){function o(n,t){return n.priority-t.priority}function s(n,t,i){for(var f,r=-1,u=n.length-1;u>r;)f=r+(u-r+1>>>1),i(t,n[f])>=0?r=f:u=f-1;return r}function h(t,u,f,h){if(null!=h&&"function"!=typeof h)throw new Error("task callback must be a function");return t.started=!0,e(u)||(u=[u]),0===u.length?n.setImmediate(function(){t.drain()}):void r(u,function(r){var u={data:r,priority:f,callback:"function"==typeof h?h:i};t.tasks.splice(s(t.tasks,u,o)+1,0,u);t.tasks.length===t.concurrency&&t.saturated();n.setImmediate(t.process)})}var f=n.queue(t,u);return f.push=function(n,t,i){h(f,n,t,i)},delete f.unshift,f};n.cargo=function(n,t){return ct(n,1,t)};n.log=lt("log");n.dir=lt("dir");n.memoize=function(i,r){var e={},f={},s=Object.prototype.hasOwnProperty,o;return r=r||u,o=t(function(u){var h=u.pop(),o=r.apply(null,u);s.call(e,o)?n.setImmediate(function(){h.apply(null,e[o])}):s.call(f,o)?f[o].push(h):(f[o]=[h],i.apply(null,u.concat([t(function(n){var i,t,r;for(e[o]=n,i=f[o],delete f[o],t=0,r=i.length;r>t;t++)i[t].apply(null,n)})])))}),o.memo=e,o.unmemoized=i,o};n.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}};n.times=at(n.map);n.timesSeries=at(n.mapSeries);n.timesLimit=function(t,i,r,u){return n.mapLimit(ot(t),i,r,u)};n.seq=function(){var r=arguments;return t(function(u){var e=this,f=u[u.length-1];"function"==typeof f?u.pop():f=i;n.reduce(r,u,function(n,i,r){i.apply(e,n.concat([t(function(n,t){r(n,t)})]))},function(n,t){f.apply(e,[n].concat(t))})})};n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))};n.applyEach=vt(n.eachOf);n.applyEachSeries=vt(n.eachOfSeries);n.forever=function(n,t){function r(n){return n?u(n):void f(r)}var u=s(t||i),f=rt(n);r()};n.ensureAsync=rt;n.constant=t(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}});n.wrapSync=n.asyncify=function(n){return t(function(t){var i,r=t.pop();try{i=n.apply(this,t)}catch(u){return r(u)}dt(i)&&"function"==typeof i.then?i.then(function(n){r(null,n)})["catch"](function(n){r(n.message?n:new Error(n))}):r(null,i)})};"object"==typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):p.async=n}();
/*!
 * clipboard.js v1.6.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.Clipboard=n()}}(function(){var n;return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){function r(n,t){for(;n&&n.nodeType!==u;){if(n.matches(t))return n;n=n.parentNode}}var u=9,i;"undefined"==typeof Element||Element.prototype.matches||(i=Element.prototype,i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector);t.exports=r},{}],2:[function(n,t){function i(n,t,i,u,f){var e=r.apply(this,arguments);return n.addEventListener(i,e,f),{destroy:function(){n.removeEventListener(i,e,f)}}}function r(n,t,i,r){return function(i){i.delegateTarget=u(i.target,t);i.delegateTarget&&r.call(n,i)}}var u=n("./closest");t.exports=i},{"./closest":1}],3:[function(n,t,i){i.node=function(n){return void 0!==n&&n instanceof HTMLElement&&1===n.nodeType};i.nodeList=function(n){var t=Object.prototype.toString.call(n);return void 0!==n&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in n&&(0===n.length||i.node(n[0]))};i.string=function(n){return"string"==typeof n||n instanceof String};i.fn=function(n){var t=Object.prototype.toString.call(n);return"[object Function]"===t}},{}],4:[function(n,t){function r(n,t,r){if(!n&&!t&&!r)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(r))throw new TypeError("Third argument must be a Function");if(i.node(n))return u(n,t,r);if(i.nodeList(n))return f(n,t,r);if(i.string(n))return e(n,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}function u(n,t,i){return n.addEventListener(t,i),{destroy:function(){n.removeEventListener(t,i)}}}function f(n,t,i){return Array.prototype.forEach.call(n,function(n){n.addEventListener(t,i)}),{destroy:function(){Array.prototype.forEach.call(n,function(n){n.removeEventListener(t,i)})}}}function e(n,t,i){return o(document.body,n,t,i)}var i=n("./is"),o=n("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(n,t){function i(n){var t,r,i,u;return"SELECT"===n.nodeName?(n.focus(),t=n.value):"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName?(r=n.hasAttribute("readonly"),r||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),r||n.removeAttribute("readonly"),t=n.value):(n.hasAttribute("contenteditable")&&n.focus(),i=window.getSelection(),u=document.createRange(),u.selectNodeContents(n),i.removeAllRanges(),i.addRange(u),t=i.toString()),t}t.exports=i},{}],6:[function(n,t){function i(){}i.prototype={on:function(n,t,i){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:i}),this},once:function(n,t,i){function r(){u.off(n,r);t.apply(i,arguments)}var u=this;return r._=t,this.on(n,r,i)},emit:function(n){var r=[].slice.call(arguments,1),i=((this.e||(this.e={}))[n]||[]).slice(),t=0,u=i.length;for(t;t<u;t++)i[t].fn.apply(i[t].ctx,r);return this},off:function(n,t){var u=this.e||(this.e={}),r=u[n],f=[],i,e;if(r&&t)for(i=0,e=r.length;i<e;i++)r[i].fn!==t&&r[i].fn._!==t&&f.push(r[i]);return f.length?u[n]=f:delete u[n],this}};t.exports=i},{}],7:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","select"],f);else if("undefined"!=typeof r)f(i,t("select"));else{var e={exports:{}};f(e,u.select);u.clipboardAction=e.exports}}(this,function(n,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i=r(t),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=function(){function n(t){u(this,n);this.resolveOptions(t);this.initSelection()}return e(n,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=n.action;this.emitter=n.emitter;this.target=n.target;this.text=n.text;this.trigger=n.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,r="rtl"==document.documentElement.getAttribute("dir"),n;this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[r?"right":"left"]="-9999px";n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=i.default(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=i.default(this.target);this.copyText()}},{key:"copyText",value:function(){var n=void 0;try{n=document.execCommand(this.action)}catch(t){n=!1}this.handleResult(n)}},{key:"handleResult",value:function(n){this.emitter.emit(n?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=n,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"');},get:function(){return this._action}},{key:"target",set:function(n){if(void 0!==n){if(!n||"object"!==("undefined"==typeof n?"undefined":f(n))||1!==n.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&n.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(n.hasAttribute("readonly")||n.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=n}},get:function(){return this._target}}]),n}();n.exports=o})},{select:5}],8:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","./clipboard-action","tiny-emitter","good-listener"],f);else if("undefined"!=typeof r)f(i,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var e={exports:{}};f(e,u.clipboardAction,u.tinyEmitter,u.goodListener);u.clipboard=e.exports}}(this,function(n,t,i,r){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function f(n,t){var i="data-clipboard-"+n;if(t.hasAttribute(i))return t.getAttribute(i)}var h=u(t),c=u(i),l=u(r),a=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),v=function(n){function t(n,i){e(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(i),r.listenClick(n),r}return s(t,n),a(t,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof n.action?n.action:this.defaultAction;this.target="function"==typeof n.target?n.target:this.defaultTarget;this.text="function"==typeof n.text?n.text:this.defaultText}},{key:"listenClick",value:function(n){var t=this;this.listener=l.default(n,"click",function(n){return t.onClick(n)})}},{key:"onClick",value:function(n){var t=n.delegateTarget||n.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new h.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(n){return f("action",n)}},{key:"defaultTarget",value:function(n){var t=f("target",n);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(n){return f("text",n)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],i="string"==typeof n?[n]:n,t=!!document.queryCommandSupported;return i.forEach(function(n){t=t&&!!document.queryCommandSupported(n)}),t}}]),t}(c.default);n.exports=v})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});
window.ASC.Clipboard=function(){var n=!1,t=function(){n===!1&&(n=!0);ASC.Clipboard.enable=typeof Clipboard!="undefined"&&Clipboard.isSupported()},i=function(n,t,i){var r,f,u;if(!ASC.Clipboard.enable)return null;if(r={onComplete:null,textareaId:null},jq.extend(r,i),f=r.textareaId?{target:function(){return jq("#"+r.textareaId)[0]}}:{text:function(){return n}},u=new Clipboard("#"+t,f),r.onComplete)u.on("success",r.onComplete);return u},r=function(n){return n&&n.destroy(),null};return{init:t,enable:!1,create:i,destroy:r}}(),function(n){n(function(){ASC.Clipboard.init()})}(jQuery);
(function(n){"use strict";function t(n){function ft(){return a<ii}function ri(){return b[a]}function k(){return a}function d(n){a=n}function ui(){a+=1}function at(){a=0;ii=b.length}function v(n,t){return{name:n,tokens:t||"",semantic:t||"",children:[]}}function t(n,t){var i;return t===null?null:(i=v(n),i.tokens=t.tokens,i.semantic=t.semantic,i.children.push(t),i)}function et(n,t){return t!==null&&(n.tokens+=t.tokens,n.semantic+=t.semantic),n.children.push(t),n}function l(n){var t;return ft()?(t=ri(),n(t))?(ui(),v("token",t)):null:null}function u(n){return function(){return t("literal",l(function(t){return t===n}))}}function r(){var n=arguments;return function(){var t,i,r,u;for(u=k(),i=v("and"),t=0;t<n.length;t+=1){if(r=n[t](),r===null)return d(u),null;et(i,r)}return i}}function o(){var n=arguments;return function(){for(var i,r=k(),t=0;t<n.length;t+=1){if(i=n[t](),i!==null)return i;d(r)}return null}}function f(n){return function(){var t,i;return i=k(),t=n(),t!==null?t:(d(i),v("opt"))}}function e(n){return function(){var t=n();return t!==null&&(t.semantic=""),t}}function g(n){return function(){var t=n();return t!==null&&t.semantic.length>0&&(t.semantic=" "),t}}function s(n,t){return function(){var r,u,i,f,e;for(f=k(),r=v("star"),i=0,e=t===undefined?0:t;(u=n())!==null;)i=i+1,et(r,u);return i>=e?r:(d(f),null)}}function fi(n){function r(n){return n===" "||n==="\t"||n==="\r"||n==="\n"}for(var t="",i=0;i<n.length;i+=1)r(n[i])&&r(n[i+1])||(t+=n[i]);return r(t[0])&&(t=t.substring(1)),r(t[t.length-1])&&(t=t.substring(0,t.length-1)),t}function y(n){return n.charCodeAt(0)>=128}function vt(){return t("cr",u("\r")())}function yt(){return t("crlf",r(vt,wt)())}function pt(){return t("dquote",u('"')())}function ei(){return t("htab",u("\t")())}function wt(){return t("lf",u("\n")())}function oi(){return t("sp",u(" ")())}function si(){return t("vchar",l(function(t){var r=t.charCodeAt(0),i=33<=r&&r<=126;return n.rfc6532&&(i=i||y(t)),i}))}function nt(){return t("wsp",o(oi,ei)())}function ot(){var n=t("quoted-pair",o(r(u("\\"),o(si,nt)),ur)());return n===null?null:(n.semantic=n.semantic[1],n)}function c(){return t("fws",o(er,r(f(r(s(nt),e(yt))),s(nt,1)))())}function hi(){return t("ctext",o(function(){return l(function(t){var i=t.charCodeAt(0),r=33<=i&&i<=39||42<=i&&i<=91||93<=i&&i<=126;return n.rfc6532&&(r=r||y(t)),r})},ir)())}function ci(){return t("ccontent",o(hi,ot,bt)())}function bt(){return t("comment",r(u("("),s(r(f(c),ci)),f(c),u(")"))())}function h(){return t("cfws",o(r(s(r(f(c),bt),1),f(c)),c)())}function st(){return t("atext",l(function(t){var i="a"<=t&&t<="z"||"A"<=t&&t<="Z"||"0"<=t&&t<="9"||["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"].indexOf(t)>=0;return n.rfc6532&&(i=i||y(t)),i}))}function ht(){return t("atom",r(g(f(h)),s(st,1),g(f(h)))())}function li(){var n,i;return(n=t("dot-atom-text",s(st,1)()),n===null)?n:(i=s(r(u("."),s(st,1)))(),i!==null&&et(n,i),n)}function kt(){return t("dot-atom",r(e(f(h)),li,e(f(h)))())}function ai(){return t("qtext",o(function(){return l(function(t){var i=t.charCodeAt(0),r=33===i||35<=i&&i<=91||93<=i&&i<=126;return n.rfc6532&&(r=r||y(t)),r})},rr)())}function vi(){return t("qcontent",o(ai,ot)())}function dt(){return t("quoted-string",r(e(f(h)),e(pt),s(r(f(g(c)),vi)),f(e(c)),e(pt),e(f(h)))())}function p(){return t("word",o(ht,dt)())}function yi(){return t("phrase",o(fr,s(p,1))())}function tt(){return t("address",o(w,bi)())}function w(){return t("mailbox",o(pi,lt)())}function pi(){return t("name-addr",r(f(gt),wi)())}function wi(){return t("angle-addr",o(r(e(f(h)),u("<"),lt,u(">"),e(f(h))),or)())}function bi(){return t("group",r(gt,u(":"),f(di),u(";"),e(f(h)))())}function gt(){return t("display-name",function(){var n=yi();return n!==null&&(n.semantic=fi(n.semantic)),n}())}function ki(){return t("mailbox-list",o(r(w,s(r(u(","),w))),cr)())}function ni(){return t("address-list",o(r(tt,s(r(u(","),tt))),lr)())}function di(){return t("group-list",o(ki,e(h),ar)())}function gi(){return t("local-part",o(vr,kt,dt)())}function nr(){return t("dtext",o(function(){return l(function(t){var i=t.charCodeAt(0),r=33<=i&&i<=90||94<=i&&i<=126;return n.rfc6532&&(r=r||y(t)),r})},pr)())}function tr(){return t("domain-literal",r(e(f(h)),u("["),s(r(f(c),nr)),f(c),u("]"),e(f(h)))())}function ct(){return t("domain",function(){var t=o(yr,kt,tr)();return n.rejectTLD&&t.semantic.indexOf(".")<0?null:t}())}function lt(){return t("addr-spec",r(gi,u("@"),ct)())}function it(){return n.strict?null:t("obs-NO-WS-CTL",l(function(n){var t=n.charCodeAt(0);return 1<=t&&t<=8||11===t||12===t||14<=t&&t<=31||127===t}))}function ir(){return n.strict?null:t("obs-ctext",it())}function rr(){return n.strict?null:t("obs-qtext",it())}function ur(){return n.strict?null:t("obs-qp",r(u("\\"),o(u('\0'),it,wt,vt))())}function fr(){return n.strict?null:t("obs-phrase",r(p,s(o(p,u("."),g(h))))())}function er(){return n.strict?null:t("obs-FWS",s(r(e(f(yt)),nt),1)())}function or(){return n.strict?null:t("obs-angle-addr",r(e(f(h)),u("<"),sr,lt,u(">"),e(f(h)))())}function sr(){return n.strict?null:t("obs-route",r(hr,u(":"))())}function hr(){return n.strict?null:t("obs-domain-list",r(s(o(e(h),u(","))),u("@"),ct,s(r(u(","),e(f(h)),f(r(u("@"),ct)))))())}function cr(){return n.strict?null:t("obs-mbox-list",r(s(r(e(f(h)),u(","))),w,s(r(u(","),f(r(w,e(h))))))())}function lr(){return n.strict?null:t("obs-addr-list",r(s(r(e(f(h)),u(","))),tt,s(r(u(","),f(r(tt,e(h))))))())}function ar(){return n.strict?null:t("obs-group-list",r(s(r(e(f(h)),u(",")),1),e(f(h)))())}function vr(){return n.strict?null:t("obs-local-part",r(p,s(r(u("."),p)))())}function yr(){return n.strict?null:t("obs-domain",r(ht,s(r(u("."),ht)))())}function pr(){return n.strict?null:t("obs-dtext",o(it,ot)())}function rt(n,t){var r,u,i;if(t===null||t===undefined)return null;for(u=[t];u.length>0;){if(i=u.shift(),i.name===n)return i;for(r=0;r<i.children.length;r+=1)u.push(i.children[r])}return null}function wr(n,t){var r,u,i,f;if(t===null||t===undefined)return null;for(u=[t],f=[];u.length>0;)for(i=u.shift(),i.name===n&&f.push(i),r=0;r<i.children.length;r+=1)u.push(i.children[r]);return f}function ti(t){function f(n){return n!==null?n.semantic:null}var i,r,o,e,s,u,h,c;if(t===null)return null;for(r={ast:t},o=wr("address",t),r.addresses=[],i=0;i<o.length;i+=1)e=o[i],s=rt("display-name",e),u=rt("addr-spec",e),h=rt("local-part",u),c=rt("domain",u),r.addresses.push({node:e,parts:{name:s,address:u,local:h,domain:c},name:f(s),address:f(u),local:f(h),domain:f(c)});if(n.simple)for(r=r.addresses,i=0;i<r.length;i+=1)delete r[i].node;return r}var b,a,ii,ut;if(n=i(n,{}),n===null)return null;if(b=n.input,!n.strict){if(at(),n.strict=!0,ut=ni(b),n.partial||!ft())return ti(ut);n.strict=!1}return(at(),ut=ni(b),!n.partial&&ft())?null:ti(ut)}function r(n){var r;return(n=i(n,{rfc6532:!0,simple:!0}),n===null)?null:(r=t(n),!r||!n.partial&&n.simple&&r.length>1||!n.simple&&r.addresses.length>1)?null:n.simple?r&&r[0]:r&&r.addresses&&r.addresses[0]}function u(n){var r;return(n=i(n,{rfc6532:!0,simple:!0}),n===null)?null:(r=t(n),n.simple?r:r.addresses)}function i(n,t){function u(n){return Object.prototype.toString.call(n)==="[object String]"}function e(n){return n===Object(n)}function f(n){return n===null||n===undefined}var r,i;if(u(n))n={input:n};else if(!e(n))return null;if(!u(n.input)||!t)return null;r={rfc6532:!1,partial:!1,simple:!1,strict:!1,rejectTLD:!1};for(i in r)f(n[i])&&(n[i]=f(t[i])?r[i]:t[i]),n[i]=!!n[i];return n}t.parseOneAddress=r;t.parseAddressList=u;typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=t:n.emailAddresses=t})(this);
/*! https://mths.be/punycode v1.4.1 by @mathias */
!function(n){function r(n){throw new RangeError(at[n]);}function v(n,t){for(var i=n.length,r=[];i--;)r[i]=t(n[i]);return r}function y(n,t){var i=n.split("@"),r="",u,f;return i.length>1&&(r=i[0]+"@",n=i[1]),n=n.replace(lt,"."),u=n.split("."),f=v(u,t).join("."),r+f}function p(n){for(var t,u,r=[],i=0,f=n.length;f>i;)t=n.charCodeAt(i++),t>=55296&&56319>=t&&f>i?(u=n.charCodeAt(i++),56320==(64512&u)?r.push(((1023&t)<<10)+(1023&u)+65536):(r.push(t),i--)):r.push(t);return r}function w(n){return v(n,function(n){var t="";return n>65535&&(n-=65536,t+=s(n>>>10&1023|55296),n=56320|1023&n),t+s(n)}).join("")}function ut(n){return 10>n-48?n-22:26>n-65?n-65:26>n-97?n-97:t}function b(n,t){return n+22+75*(26>n)-((0!=t)<<5)}function k(n,r,u){var f=0;for(n=u?i(n/st):n>>1,n+=i(n/r);n>a*o>>1;f+=t)n=i(n/a);return i(f+(a+1)*n/(n+ot))}function d(n){var s,f,h,y,d,c,a,v,g,nt,p=[],et=n.length,u=0,ft=it,b=tt;for(f=n.lastIndexOf(rt),0>f&&(f=0),h=0;f>h;++h)n.charCodeAt(h)>=128&&r("not-basic"),p.push(n.charCodeAt(h));for(y=f>0?f+1:0;et>y;){for(d=u,c=1,a=t;y>=et&&r("invalid-input"),v=ut(n.charCodeAt(y++)),(v>=t||v>i((e-u)/c))&&r("overflow"),u+=v*c,g=b>=a?l:a>=b+o?o:a-b,!(g>v);a+=t)nt=t-g,c>i(e/nt)&&r("overflow"),c*=nt;s=p.length+1;b=k(u-d,s,0==d);i(u/s)>e-ft&&r("overflow");ft+=i(u/s);u%=s;p.splice(u++,0,ft)}return w(p)}function g(n){var h,c,y,et,w,u,a,d,g,nt,f,ut,ft,ot,st,v=[];for(n=p(n),ut=n.length,h=it,c=0,w=tt,u=0;ut>u;++u)f=n[u],128>f&&v.push(s(f));for(y=et=v.length,et&&v.push(rt);ut>y;){for(a=e,u=0;ut>u;++u)f=n[u],f>=h&&a>f&&(a=f);for(ft=y+1,a-h>i((e-c)/ft)&&r("overflow"),c+=(a-h)*ft,h=a,u=0;ut>u;++u)if(f=n[u],h>f&&++c>e&&r("overflow"),f==h){for(d=c,g=t;nt=w>=g?l:g>=w+o?o:g-w,!(nt>d);g+=t)st=d-nt,ot=t-nt,v.push(s(b(nt+st%ot,0))),d=i(st/ot);v.push(s(b(d,0)));w=k(c,ft,y==et);c=0;++y}++c;++h}return v.join("")}function ft(n){return y(n,function(n){return ht.test(n)?d(n.slice(4).toLowerCase()):n})}function et(n){return y(n,function(n){return ct.test(n)?"xn--"+g(n):n})}var c="object"==typeof exports&&exports&&!exports.nodeType&&exports,nt="object"==typeof module&&module&&!module.nodeType&&module,u="object"==typeof global&&global;(u.global===u||u.window===u||u.self===u)&&(n=u);var f,h,e=2147483647,t=36,l=1,o=26,ot=38,st=700,tt=72,it=128,rt="-",ht=/^xn--/,ct=/[^\x20-\x7E]/,lt=/[\x2E\u3002\uFF0E\uFF61]/g,at={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=t-l,i=Math.floor,s=String.fromCharCode;if(f={version:"1.4.1",ucs2:{decode:p,encode:w},decode:d,encode:g,toASCII:et,toUnicode:ft},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return f});else if(c&&nt)if(module.exports==c)nt.exports=f;else for(h in f)f.hasOwnProperty(h)&&(c[h]=f[h]);else n.punycode=f}(this);
ASC.Controls.MailReader=function(){function n(n){n&&n.skipIO||r(!1)}function t(){r(!0)}function r(n){try{i&&i.emit("updateFolders",n)}catch(t){console.error(t.message)}}function u(n){var t,i;n=parseInt(n);StudioManager.getCurrentModule()!=="mail"&&(t=jq("#TPUnreadMessagesCount"),t&&(t.text(n>100?">100":n),t.parent().toggleClass("has-led",n!==0)));i=localStorageManager.getItem("MailUreadMessagesCount");i!==n&&localStorageManager.setItem("MailUreadMessagesCount",n)}function e(n,t){t.length&&u(t[0].unread_messages)}function o(n){n&&n.key&&n.key==="MailUreadMessagesCount"&&u(n.newValue)}function s(){ASC.SocketIO&&!ASC.SocketIO.disabled()?(i=ASC.SocketIO.Factory.counters,i.connect(function(){h()}).reconnect_failed(function(){f()})):f()}function h(){Teamlab.bind(Teamlab.events.getMailConversation,n);Teamlab.bind(Teamlab.events.getNextMailConversationId,n);Teamlab.bind(Teamlab.events.getPrevMailConversationId,n);Teamlab.bind(Teamlab.events.getMailMessage,n);Teamlab.bind(Teamlab.events.getNextMailMessageId,n);Teamlab.bind(Teamlab.events.getPrevMailMessageId,n);Teamlab.bind(Teamlab.events.removeMailFolderMessages,n);Teamlab.bind(Teamlab.events.restoreMailMessages,n);Teamlab.bind(Teamlab.events.moveMailMessages,n);Teamlab.bind(Teamlab.events.removeMailMessages,n);Teamlab.bind(Teamlab.events.markMailMessages,n);Teamlab.bind(Teamlab.events.setMailTag,n);Teamlab.bind(Teamlab.events.setMailConversationsTag,n);Teamlab.bind(Teamlab.events.unsetMailTag,n);Teamlab.bind(Teamlab.events.unsetMailConversationsTag,n);Teamlab.bind(Teamlab.events.createMailMailboxSimple,t);Teamlab.bind(Teamlab.events.createMailMailboxOAuth,t);Teamlab.bind(Teamlab.events.updateMailMailboxOAuth,t);Teamlab.bind(Teamlab.events.createMailMailbox,t);Teamlab.bind(Teamlab.events.removeMailMailbox,t);Teamlab.bind(Teamlab.events.addMailbox,t);Teamlab.bind(Teamlab.events.removeMailbox,t);Teamlab.bind(Teamlab.events.updateMailbox,t);Teamlab.bind(Teamlab.events.addMailBoxAlias,t);Teamlab.bind(Teamlab.events.removeMailBoxAlias,t);Teamlab.bind(Teamlab.events.addMailGroup,t);Teamlab.bind(Teamlab.events.removeMailGroup,t);Teamlab.bind(Teamlab.events.removeMailDomain,t);Teamlab.bind(Teamlab.events.setDefaultAccount,t);Teamlab.bind(Teamlab.events.sendMailMessage,n);Teamlab.bind(Teamlab.events.saveMailMessage,n);Teamlab.bind(Teamlab.events.moveMailConversations,n);Teamlab.bind(Teamlab.events.restoreMailConversations,n);Teamlab.bind(Teamlab.events.removeMailConversations,n);Teamlab.bind(Teamlab.events.markMailConversations,n)}function f(){StudioManager.getCurrentModule()!=="mail"&&(Teamlab.bind(Teamlab.events.getMailFolders,e),localStorageManager.isAvailable&&window.addEvent(window,"storage",o))}var i;return{updateFoldersOnOtherTabs:r,setUnreadMailMessagesCount:u,mailStart:s}}();jq(document).ready(function(){jq("#studioPageContent li.mail a.mailActiveBox").length>0&&ASC.Controls.MailReader.mailStart()});
var VideoSaver=new function(){this.Init=function(){if(jq("#dropVideoList li a").length!=0){jq(".menu-list .video-guides").find(".new-label-menu").text(jq("#dropVideoList li a").length).show();jq.dropdownToggle({switcherSelector:".menu-list .video-guides .new-label-menu",dropdownID:"studio_videoPopupPanel",inPopup:!0,addTop:5,addLeft:0});jq("#dropVideoList li a").on("click",function(){AjaxPro.timeoutPeriod=18e5;UserVideoGuideUsage.SaveWatchVideo([jq(this).attr("id")])});jq("#markVideoRead").on("click",function(){var n=[];jq("#dropVideoList li a").each(function(){n.push(jq(this).attr("id"))});AjaxPro.timeoutPeriod=18e5;UserVideoGuideUsage.SaveWatchVideo(n);jq("#studio_videoPopupPanel").hide();jq(".menu-list .video-guides").find(".new-label-menu").hide()})}}};jq(document).ready(function(){VideoSaver.Init()});
typeof ASC=="undefined"&&(ASC={});typeof ASC.Feed=="undefined"&&(ASC.Feed={});ASC.Feed=function(){function t(n,t,i){var r={createdText:n,location:t};return typeof i!="undefined"&&(r.commentedText=i),r}var n=ASC.Resources.Master.FeedResource;return jq.extend({Products:{community:n.CommunityProduct,projects:n.ProjectsProduct,crm:n.CrmProduct,documents:n.DocumentsProduct},Texts:{blog:t(n.BlogCreatedText,n.BlogsModule,n.BlogCommentedText),bookmark:t(n.BookmarkCreatedText,n.BookmarksModule,n.BookmarkCommentedText),news:t(n.NewsCreatedText,n.EventsModule,n.NewsCommentedText),order:t(n.OrderCreatedText,n.EventsModule,n.OrderCommentedText),advert:t(n.AdvertCreatedText,n.EventsModule,n.AdvertCommentedText),poll:t(n.PollCreatedText,n.EventsModule,n.PollCommentedText),forumPost:t(n.ForumPostCreatedText,n.ForumsModule),forumTopic:t(n.ForumTopicCreatedText,n.ForumsModule),forumPoll:t(n.ForumPollCreatedText,n.ForumsModule),company:t(n.CompanyCreatedText,n.ContactsModule),person:t(n.PersonCreatedText,n.ContactsModule),crmTask:{createdText:n.CrmTaskCreatedText,extraText:n.Responsible,extraText2:n.Contact,location:n.CrmTaskModule},deal:{createdText:n.DealCreatedText,extraText2:n.Contact,location:n.OpportunitiesModule},cases:t(n.CaseCreatedText,n.CasesModule),project:{createdText:n.ProjectCreatedText,extraText:n.ProjectManager},participant:{createdText:n.ParticipantCreatedText},milestone:{createdText:n.MilestoneCreatedText,extraText:n.Project,location:n.MilestonesModule},task:{createdText:n.TaskCreatedText,commentedText:n.TaskCommentedText,extraText:n.Project,extraText2:n.Responsibles,location:n.TasksModule},discussion:{createdText:n.DiscussionCreatedText,commentedText:n.DiscussionCommentedText,location:n.DiscussionsModule},file:{createdText:n.FileCreatedText,createdExtraText:n.FileCreatedInFolderText,updatedText:n.FileUpdatedText,updatedExtraText:n.FileUpdatedInFolderText,extraText:n.Size,location:n.FilesModule},sharedFile:{createdText:n.SharedFileCreatedText,createdExtraText:n.SharedFileCreatedInFolderText,extraText:n.Size,location:n.FilesModule},folder:{createdText:n.FolderCreatedText,createdExtraText:n.FolderCreatedInFolderText,location:n.FoldersModule},sharedFolder:t(n.SharedFolderCreatedText,n.FoldersModule)}},ASC.Feed)}();ASC.Feed.Reader=function(){function n(n){return n!==undefined?i=n:i}function e(n){return n!==undefined?t=n:t}function u(n){return n!==undefined?o=n:o}function s(){Teamlab.getNewFeedsCount({},{filter:{},success:f,async:!0})}function f(n,t){var r=jq(".top-item-box.feed");t==0?(r.removeClass("has-led"),r.find(".inner-label").text(t)):(t>100&&(t=">100"),r.addClass("has-led"),r.find(".inner-label").text(t),i=!0)}function c(){Teamlab.getFeeds({},{filter:{onlyNew:!0},success:l})}function l(n,t){var u=t.feeds,i=jq("#drop-feeds-box"),e=i.find(".loader-text-block"),h=i.find(".feeds-readed-msg"),o=i.find(".see-all-btn"),f=i.find(".list"),r,s;if(!u.length){e.hide();h.show();o.css("display","inline-block");return}for(f.empty(),r=0;r<u.length;r++)try{s=a(u[r]);jq.tmpl("dropFeedTmpl",s).appendTo(f)}catch(c){console.log(c)}e.hide();jq(f).removeClass("display-none");o.css("display","inline-block")}function a(n){var t=n,i=v(n);return t.author=window.UserManager.getUser(i),t.isGuest=t.author==null||t.authorId==h,t.productText=y(t),t.location||(t.location=p(t)),b(t),t.actionText=w(t),t}function v(n){return n.comments&&n.comments.length?n.comments[n.comments.length-1].authorId:n.authorId}function y(n){var t=ASC.Feed.Products;return t?t[n.product]:null}function p(n){var i=ASC.Feed.Texts,t;return i?(t=i[n.item],!t)?null:t.location:null}function w(n){var i=ASC.Feed.Texts,t;if(!i||(t=i[n.item],!t))return null;switch(n.action){case 0:return t.createdText;case 1:return t.updatedText;case 2:return t.commentedText;default:return t.createdText}}function b(n){switch(n.item){case"blog":n.itemClass="blogs";break;case"news":case"order":case"advert":case"poll":n.itemClass="events";break;case"forum":case"forumPoll":n.itemClass="forum";break;case"bookmark":n.itemClass="bookmarks";break;case"company":case"person":n.itemClass="group";break;case"crmTask":n.itemClass="tasks";break;case"deal":n.itemClass="opportunities";break;case"cases":n.itemClass="cases";break;case"project":n.itemClass="projects";break;case"participant":n.itemClass="projects";break;case"milestone":n.itemClass="milestones";break;case"task":n.itemClass="tasks";break;case"discussion":n.itemClass="discussions";break;case"file":case"sharedFile":n.itemClass="documents";break;case"folder":case"sharedFolder":n.itemClass="documents"}}function k(){if(jq("#studioPageContent li.feed a.feedActiveBox").length!=0){ASC.SocketIO&&!ASC.SocketIO.disabled()&&(r=ASC.SocketIO.Factory.counters.reconnect_failed(function(){s()}).on("sendFeedsCount",function(n){var i=Number(jq(".top-item-box.feed").find(".inner-label").text());!t&&i&&(n=i+n);t=!1;f(null,n)}).on("getNewMessagesCount",function(n){f(null,n.f)}));jq.dropdownToggle({switcherSelector:".studio-top-panel .feedActiveBox",dropdownID:"studio_dropFeedsPopupPanel",addTop:5,addLeft:-392});jq(".studio-top-panel .feedActiveBox").on("mouseup",function(t){t.which==2&&n()&&(n(!1),jq(".top-item-box.feed").removeClass("has-led"))});jq(".studio-top-panel .feedActiveBox").on("click",function(t){return u()?!1:t.which==2&&n()?(n(!1),jq(".top-item-box.feed").removeClass("has-led"),!0):t.which!=1?!0:(n()?(e()||(u(!0),c(),Teamlab.readFeeds({},{filter:{},success:function(n,t){try{r&&r.emit("sendFeedsCount")}catch(i){console.error(i.message)}t&&(u(!1),e(!0),jq(".top-item-box.feed").removeClass("has-led"))}})),t.preventDefault()):t.stopPropagation(),!0)});ASC.Resources.Master.Hub.Url||StudioManager.addPendingRequest(s)}}var h="712d9ec3-5d2b-4b13-824f-71f00191dcca",i,r,t=!1,o=!1;return{init:k}}();jq(document).ready(function(){jq("#studioPageContent li.feed a.feedActiveBox").length!=0&&ASC.Feed.Reader.init()});
ASC.Controls.TalkNavigationItem||(ASC.Controls.TalkNavigationItem={checkMessagesTimeout:1e3,currentValue:-1,init:function(n){jq("#studioPageContent li.talk").length!=0&&(isFinite(+n)&&(this.checkMessagesTimeout=+n*1e3,StudioManager.addPendingRequest(function(){ASC.Controls.TalkNavigationItem.checkNewMessages();+n>0&&setInterval(ASC.Controls.TalkNavigationItem.checkNewMessages,ASC.Controls.TalkNavigationItem.checkMessagesTimeout)})),Teamlab.bind(Teamlab.events.getTalkUnreadMessages,ASC.Controls.TalkNavigationItem.getResponce))},updateValue:function(n){if(this.currentValue===n)return undefined;this.currentValue=n;var t=document.getElementById("talkMsgCount");t&&(t.innerHTML=n>100?">100":n,jQuery("#talkMsgLabel")[n>0?"addClass":"removeClass"]("has-led"))},getResponce:function(n,t){t>0&&ASC.Controls.TalkNavigationItem.updateValue(t)},checkNewMessages:function(){jQuery("#talkMsgLabel").length>0&&Teamlab.getTalkUnreadMessages()}});jq(document).ready(function(){if(ASC.SocketIO&&!ASC.SocketIO.disabled())ASC.SocketIO.Factory.counters.on("getNewMessagesCount",function(n){ASC.Controls.TalkNavigationItem.updateValue(n.me)}).on("sendMessagesCount",function(n){ASC.Controls.TalkNavigationItem.updateValue(n)})});ASC.Controls.JabberClient||(ASC.Controls.JabberClient={username:null,jid:null,winName:"ASCJabberClient"+location.hostname,helperId:"JabberClientHelper-"+Math.floor(Math.random()*1e6),params:"",pathCmdHandler:"",pathWebTalk:"",init:function(n,t,i){if(jq("#studioPageContent li.talk").length!=0){typeof n=="string"&&n.length>0&&(this.username=n.toLowerCase());typeof t=="string"&&t.length>0&&(this.pathWebTalk=t);typeof i=="string"&&i.length>0&&(this.pathCmdHandler=i);var r=this.winName.match(/\w+/g);this.winName=r?r.join(""):this.winName}},extendChat:function(){ASC.Controls.JabberClient.open()},redirectMain:function(){try{window.open("/")}catch(n){}},open:function(n){var t=null,i=!1,r=n?n.substring(0,n.indexOf("@")):"";r=r||n||"";this.username===r.toLowerCase()&&(n=null);typeof n=="string"&&(n=n.toLowerCase());try{t=window.open("",this.winName,this.params)}catch(f){}try{i=!t||typeof t.ASC=="undefined"?!1:!0}catch(f){i=!0}if(!i&&typeof this.pathWebTalk&&(t=window.open(this.pathWebTalk+(n&&typeof n=="string"&&n.length>0?"#"+n:""),this.winName,this.params),i=!0),!i)return undefined;try{t&&t.focus()}catch(f){}try{ASC.Controls.TalkNavigationItem.updateValue(0);ASC.SocketIO&&!ASC.SocketIO.disabled()&&ASC.SocketIO.Factory.counters.emit("sendMessagesCount",0)}catch(u){console.error(u.message)}return typeof n=="string"&&n.length>0&&this.openContact(n),t},openContact:function(n){if(typeof this.username=="string"&&this.username.length>0){var t=n.substring(0,n.indexOf("@"));t=t||n||"";this.jid=n;this.username===t.toLowerCase()&&(t=null);t&&typeof t=="string"&&jQuery.ajax({async:!0,type:"get",contentType:"text/xml",cache:!1,url:this.pathCmdHandler,data:{from:t.toLowerCase(),to:this.username},complete:null})}},openTenant:function(n){n&&typeof n=="string"&&jQuery.ajax({async:!0,type:"get",contentType:"text/xml",cache:!1,url:this.pathCmdHandler,data:{from:n.toLowerCase(),to:this.username,fromtenant:!0},complete:null})},terminate:function(n,t){jQuery.ajax({async:!0,type:"post",contentType:"text/xml",cache:!1,url:t,data:n,complete:null})}});ASC.Controls.SoundManager||(ASC.Controls.SoundManager={isEnabled:null,soundContainer:null,soundPath:null,installPath:null,init:function(n,t){typeof n=="string"&&(this.soundPath=n);typeof t=="string"&&(this.installPath=t)},onLoad:function(n){if(typeof n=="string"&&(n=document.getElementById(n)),!n||typeof n=="undefined")return null;this.soundContainer=n;this.isEnabled===null&&(this.isEnabled=!0);this.play("incmsg")},alarm:function(){if(this.soundContainer===null&&this.swfPath!==null){if(this.soundPath!==null)try{var n="talkSoundContainer-"+Math.floor(Math.random()*1e6),t=document.createElement("div");t.setAttribute("id",n);document.body.appendChild(t);swfobject.embedSWF(this.soundPath,n,1,1,"9.0.0",this.installPath,{apiInit:function(n){ASC.Controls.SoundManager.onLoad(n)},apiId:n},{allowScriptAccess:"always",wmode:"transparent"},{styleclass:"sound-container",wmode:"transparent"})}catch(i){}return this.soundContainer=undefined,undefined}this.play("incmsg")},play:function(n){if(this.soundContainer!==null&&this.isEnabled===!0&&typeof n=="string")try{this.soundContainer.playSound(n)}catch(t){}}});
jq(document).ready(function(){var i,t,n,r,u;try{if(i=!0,Teamlab.profile.isPortalOwner===!0){for(t=ASC.Resources.Master.ApiResponses_ActiveProfiles.response,n=0,r=t.length;n<r;n++)if(t[n].isActivated===!0&&t[n].isOwner===!1){i=!1;break}if(i)if(jq("#menuInviteUsers").show(),ASC.Clipboard.enable)window.menuInviteUsersClip=ASC.Clipboard.destroy(window.menuInviteUsersClip),u=jq("#shareInviteUserLink").val(),window.menuInviteUsersClip=ASC.Clipboard.create(u,"menuInviteUsersBtn",{onComplete:function(){PopupKeyUpActionProvider.ClearActions();StudioBlockUIManager.blockUI("#inviteLinkContainer",550,350,0);ASC.InvitePanel.bindClipboardEvent();typeof toastr!="undefined"?toastr.success(ASC.Resources.Master.Resource.LinkCopySuccess):jq("#shareInviteUserLink, #shareInviteUserLinkCopy").yellowFade()}});else jq("#menuInviteUsersBtn").on("click",function(){PopupKeyUpActionProvider.ClearActions();StudioBlockUIManager.blockUI("#inviteLinkContainer",550,350,0);ASC.InvitePanel.bindClipboardEvent()})}}catch(f){}});
typeof ASC=="undefined"&&(ASC={});ASC.InvitePanel=function(){function o(n){var i=jq(n).is(":checked")?jq("#hiddenVisitorLink").val():jq("#hiddenUserLink").val();r?u(i):(jq("#shareInviteUserLink").val(i),ASC.InvitePanel.bindClipboardEvent(),t(i))}function u(n){Teamlab.getShortenLink({},n,{before:function(){LoadingBanner.showLoaderBtn("#inviteLinkContainer")},after:function(){LoadingBanner.hideLoaderBtn("#inviteLinkContainer")},error:function(n,t){toastr.error(t[0]);jq("#getShortenInviteLink").remove()},success:function(n,i){jq("#getShortenInviteLink").hide();jq("#shareInviteUserLink").val(i);ASC.InvitePanel.bindClipboardEvent();t(jq("#shareInviteUserLink").val());r=!0}})}function t(n){var t=jq("#shareInviteLinkViaSocPanel"),i=encodeURIComponent(n),r=encodeURIComponent(jq.format(ASC.Resources.Master.Resource.ShareInviteLinkDscr,n));t.find(".google").attr("href",ASC.Resources.Master.UrlShareGooglePlus.format(i));t.find(".facebook").attr("href",ASC.Resources.Master.UrlShareFacebook.format(i,"","",""));t.find(".twitter").attr("href",ASC.Resources.Master.UrlShareTwitter.format(r))}var i=!1,r=!1,n=null,f=function(){if(!i){i=!0;jq("#invitePanelContainer").replaceWith(jq.tmpl("template-blockUIPanel",{id:"inviteLinkContainer",headerTest:jq("#invitePanelContainer").attr("data-header"),innerHtmlText:jq("#invitePanelContainer").html(),OKBtn:jq("#invitePanelContainer").attr("data-ok")}));jq("#inviteLinkContainer").on("click",".button.blue.middle, .cancelButton",function(){var u=jq(this),i="";return n=ASC.Clipboard.destroy(n),u.is(".button.blue")&&PopupKeyUpActionProvider.CloseDialog(),jq("#getShortenInviteLink").show(),r=!1,jq("#hiddenUserLink").length!=0?(jq("#chkVisitor").prop("checked",!1),i=jq("#hiddenUserLink").val()):(jq("#chkVisitor").prop("checked",!0),i=jq("#hiddenVisitorLink").val()),jq("#shareInviteUserLink").val(i),ASC.InvitePanel.bindClipboardEvent(),t(i),u.is(".button.blue")?!1:void 0});if(jq("#hiddenUserLink").length!=0&&jq("#hiddenVisitorLink").length!=0)jq("#chkVisitor").on("click",function(){o(this)});if(jq("#getShortenInviteLink").length!=0)jq("#getShortenInviteLink").on("click",function(){u(jq("#shareInviteUserLink").val())});t(jq("#shareInviteUserLink").val());jq("#shareInviteLinkViaSocPanel").on("click","a",function(){return window.open(jq(this).attr("href"),"new","height=600,width=1020,fullscreen=0,resizable=0,status=0,toolbar=0,menubar=0,location=1"),!1})}},e=function(){if(i)if(ASC.Clipboard.enable){n=ASC.Clipboard.destroy(n);var t=jq("#shareInviteUserLink").val();n=ASC.Clipboard.create(t,"shareInviteUserLinkCopy",{onComplete:function(){typeof toastr!="undefined"?toastr.success(ASC.Resources.Master.Resource.LinkCopySuccess):jq("#shareInviteUserLink, #shareInviteUserLinkCopy").yellowFade()}})}else jq("#shareInviteUserLinkCopy").remove()};return{init:f,bindClipboardEvent:e}}();jq(document).ready(function(){try{ASC.InvitePanel.init()}catch(n){}});
