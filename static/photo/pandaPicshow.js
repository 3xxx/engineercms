$(function(){var a=[];$("[pandaPicshow=enable]").each(function(b,c){a.push($(c))});pandaPicshow.init(a);pandaPicshow.parseShowBoxRatio()});var pandaPicshow={init:function(a){$(a).each(function(c,b){b.find(".thumbnails a").each(function(){$(this).css({"background-image":"url("+$(this).attr("thumbnail")+")"})});b.find(".showBox").append('<a class="current" target="_blank"></a><a class="past" target="_blank"></a><div class="loading complete"></div>');b.find(".thumbnails a").eq(0).trigger("click");b.find(".showBox").append('<div class="navigator"><button class="prev"></button><button class="next"></button></div>')})},parseShowBoxRatio:function(){$("[pandaPicshow=enable] .showBox").each(function(a,b){$(this).height($(this).width()/parseFloat($(this).attr("ratio")))})},shadowbox:{fadeIn:function(a){$("body").append('<div class="pandaPicshowShadowbox"></div>');$(".pandaPicshowShadowbox").css({"display":"none","text-align":"center","padding":"40px","line-height":"calc(100vh - 80px)"});$(".pandaPicshowShadowbox").fadeIn("slow");$(".pandaPicshowShadowbox").append('<img src="'+a.attr("pandapicshowshadowbox")+'" />');$(".pandaPicshowShadowbox > img").css({"max-width":"100%","max-height":"100%","display":"none","box-shadow":"0 15px 20px rgba(0,0,0,.5)","border":"1px solid #000"});$(".pandaPicshowShadowbox > img").slideDown();$(".pandaPicshowShadowbox").append('');$(".pandaPicshowShadowbox > input").focus();$(document).on("keyup",".pandaPicshowShadowbox > input",function(b){alert(1);if(b.keyCode==27){pandaPicshow.shadowbox.fadeOut()}})},fadeOut:function(){$(".pandaPicshowShadowbox").fadeOut("400",function(){$(this).remove()})}}};$(document).on("click","[pandaPicshow=enable] > .thumbnails > a",function(d){$(this).parent().siblings("input").focus();if($(this).hasClass("current")){return false}$(this).addClass("current");$(this).siblings().removeClass("current");var c=$(this).parent().siblings(".showBox");var e=$(this).attr("fullsize");c.find(".past").attr("style",c.find(".current").attr("style"));c.find(".loading").removeClass("complete");c.find(".past").attr("pandaPicshowShadowbox",e);c.find(".past .title,.past .description").remove();var a=$(this).attr("title");var b=$(this).attr("description");if(a!=undefined){c.find(".past").append('<p class="title">'+a+"</p>")}if(b!=undefined){c.find(".past").append('<p class="description">'+b+"</p>")}$('<img src="'+e+'"/>').one("load",function(f){$(this).unbind("load");c.find(".loading").addClass("complete");c.find(".past").css({"background-image":"url("+e+")"});c.children("a").toggleClass("past");c.children("a").toggleClass("current");$(this).remove()}).each(function(){if(this.complete){$(this).trigger("load")}});scrollWidth=0;scrollHeight=0;$(this).prevAll().each(function(f,g){scrollWidth+=$(g).outerWidth();scrollHeight+=$(g).outerHeight()});scrollWidth=scrollWidth-$(this).parent().outerWidth()/2+$(this).outerWidth()/2;scrollHeight=scrollHeight-$(this).parent().outerHeight()/2+$(this).outerHeight()/2;if($(this).parent().parent().attr("thumbnails")=="vertical"){$(this).parent().animate({scrollTop:scrollHeight},300)}else{$(this).parent().animate({scrollLeft:scrollWidth,},300)}});$(document).on("click","[pandaPicshow=enable] > .showBox > a",function(a){if($(this).parent().parent().attr("shadowBox")!="disable"){pandaPicshow.shadowbox.fadeIn($(this))}});$(document).on("click",".pandaPicshowShadowbox",function(a){pandaPicshow.shadowbox.fadeOut()});$(document).on("keyup","[pandaPicshow=enable] > input",function(a){switch(a.keyCode){case 40:case 39:if($(this).siblings(".thumbnails").find("a.current").next().length!=0){$(this).siblings(".thumbnails").find("a.current").next().trigger("click")}else{$(this).siblings(".thumbnails").find("a").first().trigger("click")}break;case 38:case 37:if($(this).siblings(".thumbnails").find("a.current").prev().length!=0){$(this).siblings(".thumbnails").find("a.current").prev().trigger("click")}else{$(this).siblings(".thumbnails").find("a").last().trigger("click")}break}});$(document).on("click","[pandaPicshow=enable]",function(a){$(this).children("input").focus()});$(document).on("click","[pandaPicshow=enable] .showBox .navigator .prev",function(a){if($(this).parent().parent().siblings(".thumbnails").find("a.current").prev().length!=0){$(this).parent().parent().siblings(".thumbnails").find("a.current").prev().trigger("click")}else{$(this).parent().parent().siblings(".thumbnails").find("a").last().trigger("click")}});$(document).on("click","[pandaPicshow=enable] .showBox .navigator .next",function(a){if($(this).parent().parent().siblings(".thumbnails").find("a.current").next().length!=0){$(this).parent().parent().siblings(".thumbnails").find("a.current").next().trigger("click")}else{$(this).parent().parent().siblings(".thumbnails").find("a").first().trigger("click")}});$(window).resize(function(a){pandaPicshow.parseShowBoxRatio()});